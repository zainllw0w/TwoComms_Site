# Чеклист прогресса: Переработка каталога

> Обновляйте отметки по мере выполнения. Структура совпадает с дорожной картой из `CATALOG_REDESIGN_BLUEPRINT.md`.

## Фаза 0 — Подготовка
- [ ] Обновить ветку и включить фичефлаг `CATALOG_REDESIGN`.
- [ ] Зафиксировать бэкапы БД и `media/`.
- [ ] Обновить `requirements.txt` и окружение (DRF, Pillow extras, Celery/RQ, AI SDK).
- [ ] Настроить Redis/очереди, проверить доступ к AI-провайдерам.

## Фаза 1 — Домен и данные
- [x] Создать модели `Catalog`, `CatalogOption`, `CatalogOptionValue`, `SizeGrid`.
- [x] Расширить `Product` и связанные модели (drag order, SEO, AI, size grid).
- [x] Реализовать сервис дедупликации цветов и унифицированного аплоада изображений.
- [x] Подготовить миграции и скрипты переноса существующих данных.
- [x] Добавить авто-тесты для моделей/сервисов домена.

## Фаза 2 — Backend логика
- [x] Вынести обработчики товара в модульные сервисы/контроллеры. _(см. `storefront/services/product_builder.py`, `AdminProductBuilderViewSet`)_
- [x] Реализовать DRF сериализаторы и viewsets для каталога, товаров, цветов, изображений.
- [ ] Добавить API для drag & drop порядка, автосохранения, предпросмотра SEO.
- [ ] Настроить пермишены/ролевая модель и rate-limiting.
- [ ] Покрыть эндпоинты интеграционными тестами.

## Фаза 3 — UI/UX
- [x] Создать новый шаблон конструктора (`product_builder.html`) и partials.
- [x] Реализовать JS-модули: `product-builder`, `color-manager`, `media-uploader`, `seo-ai-panel`. _(в виде объединённого модуля `product-builder.js`)_
- [x] Добавить drag & drop, множественную загрузку, предпросмотр изображений.
- [x] Встроить чеклист прогресса и подсказки UX.
- [ ] Перепроверить адаптив и темing (light/dark dropshipping стиль).

## Фаза 4 — AI и SEO
- [ ] Настроить сервис AI (абстракция провайдера, очередь задач, логирование).
- [ ] Реализовать генерацию ALT-текстов, SEO мета, рекомендации.
- [ ] Добавить UI для вызова AI, отображения статуса, истории генераций.
- [ ] Встроить SEO-валидаторы (лимиты символов, уникальность slug, предупреждения).
- [ ] Кешировать результаты AI/SEO и настраивать инвалидацию.

## Фаза 5 — Тестирование и запуск
- [ ] Написать unit тесты: модели, сервисы, формы, сериализаторы.
- [ ] Настроить E2E (Playwright) сценарий создания товара с цветами/изображениями.
- [ ] Провести SEO/AI smoke-тесты и перф-замеры загрузки.
- [ ] Обновить документацию (README, user guide, откат).
- [ ] Пройти финальный чеклист, включить фичефлаг в production и мониторить метрики.
