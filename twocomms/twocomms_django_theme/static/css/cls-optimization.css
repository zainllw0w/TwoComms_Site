/* ============================================================================
   CLS OPTIMIZATION V2 - Aggressive but visual-preserving
   Date: October 18, 2025
   Goal: Reduce CLS from 0.93 to < 0.25 without changing visual appearance
   
   Strategy:
   1. Disable ALL box-shadow animations (main CLS culprits)
   2. Disable filter-based animations (drop-shadow, blur)
   3. Disable background-position animations  
   4. Keep transform/opacity animations (GPU-friendly)
   5. Add compositing layers for remaining animations
   
   Visual impact: MINIMAL - only subtle glow effects removed, main animations preserved
============================================================================ */

/* ============================================================================
   1. DISABLE BOX-SHADOW ANIMATIONS (major CLS cause)
============================================================================ */

/* Disable all Float animations that use box-shadow */
@keyframes featuredFloat {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes darkParticleFloat {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-8px); }
}

/* Disable all Glow animations with box-shadow */
@keyframes featuredBadgeGlow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; }
}

@keyframes featuredLineGlow {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

@keyframes accentLineGlow {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* ============================================================================
   2. DISABLE FILTER-BASED ANIMATIONS (CLS cause)
============================================================================ */

@keyframes featuredGlow {
  0%, 100% { opacity: 0.9; }
  50% { opacity: 1; }
}

@keyframes darkGlowPulse {
  0%, 100% { opacity: 0.8; }
  50% { opacity: 1; }
}

@keyframes featuredOuterGlow {
  0%, 100% { opacity: 0.85; }
  50% { opacity: 1; }
}

/* ============================================================================
   3. DISABLE BACKGROUND-POSITION ANIMATIONS (CLS cause)
============================================================================ */

@keyframes priceGradientFlow {
  0% { opacity: 1; }
  50% { opacity: 0.95; }
  100% { opacity: 1; }
}

/* ============================================================================
   4. DISABLE INCOMPATIBLE BACKGROUND ANIMATIONS
============================================================================ */

/* These cause TARGET_HAS_INCOMPATIBLE_ANIMATIONS */
@keyframes backgroundShift {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(10px, 10px); }
}

@keyframes backgroundPulse {
  0%, 100% { opacity: 0.95; }
  50% { opacity: 1; }
}

@keyframes backgroundRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes noiseMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(-10px, -10px); }
}

@keyframes backgroundFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(20px); }
}

/* ============================================================================
   5. DISABLE COLOR ANIMATIONS (minor CLS cause)
============================================================================ */

/* Color property cannot be GPU-accelerated, replace with opacity fade */
@keyframes color {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.9; }
}

/* ============================================================================
   6. REMOVE INVISIBLE ANIMATIONS (no visual impact)
============================================================================ */

@keyframes cartSparkFloat {
  /* Remove - ANIMATION_HAS_NO_VISIBLE_CHANGE */
}

/* Disable invisible spin */
.spin:not(.visible-spin) {
  animation: none !important;
}

/* ============================================================================
   7. ADD GPU COMPOSITING FOR REMAINING ANIMATIONS
============================================================================ */

/* Force GPU layer for all animated elements */
[class*="featured"],
[class*="dark"],
[class*="particle"],
[class*="glow"],
[class*="float"],
[class*="badge"],
[class*="price"],
[class*="gradient"],
[class*="background"],
.product-card,
.category-card,
.hero {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Contain layout shifts */
.product-card,
.category-card,
.featured-item {
  contain: layout style paint;
}

/* ============================================================================
   8. REDUCE MOTION FOR ACCESSIBILITY
============================================================================ */

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================================================
   RESULT:
   
   Visual changes:
   ❌ Removed: Subtle glow effects on featured items (barely noticeable)
   ❌ Removed: Box-shadow floating effects (replaced with transform)
   ❌ Removed: Price gradient animation (replaced with opacity pulse)
   ✅ Kept: All transform animations (floating, moving, rotating)
   ✅ Kept: All opacity animations (fades, pulses)
   ✅ Kept: Overall visual style and brand identity
   
   Performance impact:
   - CLS: 0.93 → < 0.25 (expected)
   - FPS: Improved (GPU-accelerated animations only)
   - Paint time: Reduced significantly
   
   Trade-off: We sacrifice subtle glow effects to achieve good CLS score
   while preserving the main visual identity of the site.
============================================================================ */

