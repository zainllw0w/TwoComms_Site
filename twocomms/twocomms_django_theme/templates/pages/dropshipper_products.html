{% extends "base.html" %}
{% load static %}
{% load compress %}

{% block title %}Каталог для дропшиперів • TwoComms{% endblock %}

{% block extra_css %}
{% compress css %}
<link rel="stylesheet" href="{% static 'css/dropshipper/base.css' %}" media="all">
<link rel="stylesheet" href="{% static 'css/dropshipper/products.css' %}" media="all">
{% endcompress %}
{% endblock %}

{% block content %}
<div class="ds-shell">
  {% include "partials/dropshipper_sidebar.html" with active_tab="products" %}

  <main class="ds-main" data-tab-container>
    <section class="ds-tab-panel is-active" data-tab-panel="products" data-products-url="{% url 'orders:dropshipper_products' %}">
      {% include "partials/dropshipper_products_panel.html" %}
    </section>
    
    <!-- Другие панели для переключения -->
    <section class="ds-tab-panel" data-tab-panel="orders" data-tab-autoload="{% url 'orders:dropshipper_orders' %}?partial=1">
      <div class="ds-panel-loading">
        <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
        <span>Завантажуємо замовлення...</span>
      </div>
    </section>
    
    <section class="ds-tab-panel" data-tab-panel="statistics" data-tab-autoload="{% url 'orders:dropshipper_statistics' %}?partial=1">
      <div class="ds-panel-loading">
        <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
        <span>Завантажуємо статистику...</span>
      </div>
    </section>
    
    <section class="ds-tab-panel" data-tab-panel="payouts" data-tab-autoload="{% url 'orders:dropshipper_payouts' %}?partial=1">
      <div class="ds-panel-loading">
        <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
        <span>Завантажуємо виплати...</span>
      </div>
    </section>
    
    <section class="ds-tab-panel" data-tab-panel="company" data-tab-autoload="{% url 'orders:dropshipper_company' %}?partial=1">
      <div class="ds-panel-loading">
        <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
        <span>Завантажуємо налаштування...</span>
      </div>
    </section>
  </main>
</div>

{% include "partials/dropshipper_modals.html" %}
<!-- Модальное окно добавления товара создается динамически через dropshipper-product-modal.js -->
{% endblock %}

{% block extra_js %}
{% compress js %}
<script src="{% static 'js/dropshipper.js' %}" defer></script>
<script src="{% static 'js/dropshipper.dashboard.js' %}" defer></script>
<script src="{% static 'js/dropshipper-product-modal.js' %}" defer></script>
{% endcompress %}
{% endblock %}
