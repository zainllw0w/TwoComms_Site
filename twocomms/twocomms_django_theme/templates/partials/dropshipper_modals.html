<div class="ds-modal" id="ds-order-modal" role="dialog" aria-modal="true" aria-labelledby="ds-order-modal-title" hidden>
  <div class="ds-modal__overlay" data-dismiss-modal></div>
  <div class="ds-modal__dialog ds-modal__dialog--wide">
    <header class="ds-modal__header">
      <h2 class="ds-modal__title" id="ds-order-modal-title">Створити замовлення</h2>
      <button type="button" class="ds-modal__close" data-dismiss-modal aria-label="Закрити">
        <i class="fas fa-times" aria-hidden="true"></i>
      </button>
    </header>

    <form id="ds-order-form" class="ds-form">
      {% csrf_token %}
      <div class="ds-order-form__layout">
        <div class="ds-order-form__section">
          <h3 class="ds-order-form__section-title">Дані клієнта</h3>
          <div class="ds-form__grid">
            <label class="ds-input ds-input--full">
              <span class="ds-input__label">ПІБ клієнта (прізвище, ім'я, по батькові)</span>
              <input type="text" name="client_name" required autocomplete="name" placeholder="Введіть повне ПІБ клієнта">
            </label>
            <label class="ds-input">
              <span class="ds-input__label">Телефон клієнта</span>
              <input type="tel" name="client_phone" required autocomplete="tel" placeholder="+380 __ ___ __ __">
            </label>
            <label class="ds-input">
              <span class="ds-input__label">Місто (Нова Пошта)</span>
              <input type="text" name="client_city" required placeholder="Місто доставки">
            </label>
            <label class="ds-input ds-input--full">
              <span class="ds-input__label">Відділення Нової Пошти</span>
              <input type="text" name="client_np_office" required placeholder="Номер або адреса відділення / поштомату">
            </label>
            <label class="ds-input ds-input--full">
              <span class="ds-input__label">Джерело замовлення (необов'язково)</span>
              <input type="text" name="order_source" placeholder="Посилання на сторінку або джерело">
            </label>
            <label class="ds-input ds-input--full">
              <span class="ds-input__label">Примітки до замовлення</span>
              <textarea name="notes" rows="3" placeholder="Коментарі, побажання клієнта, додаткові деталі"></textarea>
            </label>
          </div>
        </div>

        <div class="ds-order-form__section">
          <div class="ds-order-form__section-header">
            <h3 class="ds-order-form__section-title">Товари у замовленні</h3>
            <button type="button" class="ds-btn ds-btn--primary ds-btn--sm js-open-product-modal">
              <i class="fas fa-plus" aria-hidden="true"></i>
              <span>Додати товар</span>
            </button>
          </div>
          
          <div id="ds-order-items" class="ds-order-items" data-empty-text="Поки що немає товарів. Натисніть 'Додати товар' щоб почати формування замовлення."></div>
        </div>
      </div>

      <footer class="ds-modal__footer">
        <button type="button" class="ds-btn ds-btn--ghost" data-dismiss-modal>Скасувати</button>
        <button type="submit" class="ds-btn ds-btn--primary">
          <i class="fas fa-check" aria-hidden="true"></i>
          <span>Створити замовлення</span>
        </button>
      </footer>
    </form>
  </div>
</div>

<div class="ds-modal" id="ds-product-modal" role="dialog" aria-modal="true" aria-labelledby="ds-product-modal-title" hidden>
  <div class="ds-modal__overlay" data-dismiss-modal></div>
  <div class="ds-modal__dialog ds-modal__dialog--wide">
    <header class="ds-modal__header">
      <h2 class="ds-modal__title" id="ds-product-modal-title">Додати товар</h2>
      <button type="button" class="ds-modal__close" data-dismiss-modal aria-label="Закрити">
        <i class="fas fa-times" aria-hidden="true"></i>
      </button>
    </header>

    <div class="ds-product-modal">
      <form id="ds-product-search" class="ds-form ds-form--inline" role="search">
        <label class="ds-input ds-input--search">
          <span class="sr-only">Пошук товарів</span>
          <i class="fas fa-search" aria-hidden="true"></i>
          <input type="search" name="search" placeholder="Шукати по назві чи опису…" autocomplete="off">
        </label>
      </form>

      <div id="ds-product-results" class="ds-product-results" data-empty-text="Введіть пошуковий запит, щоб побачити товари."></div>
    </div>
  </div>
</div>

{% with methods=payout_methods|default:payment_method_choices %}
<div class="ds-modal" id="ds-payout-modal" role="dialog" aria-modal="true" aria-labelledby="ds-payout-modal-title" hidden>
  <div class="ds-modal__overlay" data-dismiss-modal></div>
  <div class="ds-modal__dialog">
    <header class="ds-modal__header">
      <h2 class="ds-modal__title" id="ds-payout-modal-title">Запит на виплату</h2>
      <button type="button" class="ds-modal__close" data-dismiss-modal aria-label="Закрити">
        <i class="fas fa-times" aria-hidden="true"></i>
      </button>
    </header>

    <form id="ds-payout-form" class="ds-form">
      {% csrf_token %}
      <div class="ds-form__grid">
        <label class="ds-input">
          <span class="ds-input__label">Спосіб виплати</span>
          <select name="payment_method" required>
            {% for value, label in methods %}
              <option value="{{ value }}">{{ label }}</option>
            {% endfor %}
          </select>
        </label>
        <label class="ds-input ds-input--full">
          <span class="ds-input__label">Реквізити для виплати</span>
          <input type="text" name="payment_details" required placeholder="Номер картки, рахунку чи гаманець">
        </label>
        <label class="ds-input ds-input--full">
          <span class="ds-input__label">Примітки для менеджера</span>
          <textarea name="notes" rows="3" placeholder="Додаткові побажання чи коментарі"></textarea>
        </label>
      </div>

      <footer class="ds-modal__footer">
        <button type="button" class="ds-btn ds-btn--ghost" data-dismiss-modal>Скасувати</button>
        <button type="submit" class="ds-btn ds-btn--primary">
          <i class="fas fa-paper-plane" aria-hidden="true"></i>
          <span>Надіслати запит</span>
        </button>
      </footer>
    </form>
  </div>
</div>
{% endwith %}
