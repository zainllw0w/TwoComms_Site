{% load static %}
<div class="vstack gap-3" style="min-width: 300px;">
  {% if items %}
    {% for it in items %}
      <div class="d-flex align-items-center justify-content-between border rounded-3 p-2 bg-elevate" data-cart-row data-key="{{ it.key }}">
        <div class="d-flex align-items-center gap-2">
          <div class="rounded-3 overflow-hidden bg-elevate" style="width:48px;height:48px;">
            <img src="{% if it.color_variant and it.color_variant.images.exists %}{{ it.color_variant.images.first.image.url }}{% elif it.product.main_image %}{{ it.product.main_image.url }}{% else %}{% static 'img/placeholder.jpg' %}{% endif %}" class="w-100 h-100 object-fit-cover" alt="">
          </div>
          <div>
            <div class="fw-semibold small">{{ it.product.title }}</div>
            <div class="text-secondary small">
              Розмір: {{ it.size }} • ×{{ it.qty }}
              {% if it.color_variant %}
              <br>
              <div class="d-flex align-items-center gap-1">
                <span class="swatch" style="width: 12px; height: 12px; --primary-color: {{ it.color_variant.color.primary_hex }}; --secondary-color: {{ it.color_variant.color.secondary_hex|default:'' }}; background: {{ it.color_variant.color.primary_hex }};" 
                      data-primary="{{ it.color_variant.color.primary_hex }}" 
                      data-secondary="{{ it.color_variant.color.secondary_hex|default:'' }}">
                </span>
                <span>Колір</span>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <div class="text-nowrap small fw-semibold">{{ it.line_total }} грн</div>
          <button type="button"
                  class="btn btn-sm btn-outline-light"
                  onclick="CartRemoveKey('{{ it.key }}', this); return false;"
                  aria-label="Видалити">×</button>
        </div>
      </div>
    {% endfor %}
    <div class="d-flex justify-content-between align-items-center">
      <div class="fw-semibold">Разом</div>
      <div class="fw-semibold">{{ total }} грн</div>
    </div>
    <a href="{% url 'cart' %}" class="btn btn-cta w-100">Перейти до оформлення</a>
  {% else %}
    <div class="text-secondary small">Кошик порожній.</div>
  {% endif %}
</div>
