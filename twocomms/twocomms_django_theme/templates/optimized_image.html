{% comment %}
Шаблон для оптимизированного изображения с адаптивными размерами
{% endcomment %}

{% if image_path %}
<picture>
  {% if responsive_sources %}
    {% for source in responsive_sources %}
      {% if source.format == 'avif' %}
        <source srcset="{{ source.url }}" type="image/avif" media="(max-width: {{ source.size|slice:":-1" }}px)">
      {% elif source.format == 'webp' %}
        <source srcset="{{ source.url }}" type="image/webp" media="(max-width: {{ source.size|slice:":-1" }}px)">
      {% endif %}
    {% endfor %}
  {% endif %}
  
  {% if has_avif and avif_path %}
    <source srcset="{{ avif_path }}" type="image/avif">
  {% endif %}
  {% if has_webp and webp_path %}
    <source srcset="{{ webp_path }}" type="image/webp">
  {% endif %}
  
  <img 
    src="{{ image_path }}" 
    alt="{{ alt_text }}"
    {% if class_name %}class="{{ class_name }}"{% endif %}
    {% if width %}width="{{ width }}"{% endif %}
    {% if height %}height="{{ height }}"{% endif %}
    loading="lazy"
    decoding="async"
    sizes="(max-width: 320px) 320px, (max-width: 640px) 640px, (max-width: 768px) 768px, (max-width: 1024px) 1024px, 1920px"
  >
</picture>
{% endif %}
