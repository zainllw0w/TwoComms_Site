# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê—É–¥–∏—Ç –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ TwoComms

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ TwoComms. –í –Ω–µ–º –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∏ –±–∏–∑–Ω–µ—Å, –∞ —Ç–∞–∫–∂–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é.

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–±–ª–µ–º—ã (Critical)

### 1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (Signals)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í —Ñ–∞–π–ª–µ `storefront/signals.py` —Ñ—É–Ω–∫—Ü–∏–∏ `optimize_product_main_image`, `optimize_product_extra_image` –∏ –¥—Ä—É–≥–∏–µ –≤—ã–∑—ã–≤–∞—é—Ç `generate_optimized_images`. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP/AVIF, —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å–∞–π–∑–æ–≤) **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π (`post_save`).

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
–ö–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–≤–∞—Ä –≤ –∞–¥–º–∏–Ω–∫–µ, –∑–∞–ø—Ä–æ—Å "–∑–∞–≤–∏—Å–∞–µ—Ç" –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã. –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–Ω–æ–≥–æ –∏–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–∏–µ, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ç–∞–π–º-–∞—É—Ç—É (504 Gateway Timeout) –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

**–†–∏—Å–∫–∏:**
*   –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–æ—Ç–æ.
*   –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç–æ–∫–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ (gunicorn workers), —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–æ –≤—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.
*   –ü–ª–æ—Ö–æ–π UX –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ Celery.
*   –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É `optimize_image_task` –≤ `storefront/tasks.py`.
*   –í —Å–∏–≥–Ω–∞–ª–∞—Ö –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ `.delay()`, –ø–µ—Ä–µ–¥–∞–≤–∞—è ID –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É.

### 2. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–∞—Ç–∞–ª–æ–≥–∞ (Broken Pagination/Filtering)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í —à–∞–±–ª–æ–Ω–µ `twocomms_django_theme/templates/pages/catalog.html` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–≥ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è: `{% cache 600 catalog_products cat_slug %}`. –ö–ª—é—á –∫—ç—à–∞ –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç —Å–ª–∞–≥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (`cat_slug`), –Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç GET-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–∞–≥–∏–Ω–∞—Ü–∏—è `?page=2`, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ `?sort=price`, —Ñ–∏–ª—å—Ç—Ä—ã).

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–µ—Ä–µ—Ö–æ–¥—è –Ω–∞ 2-—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞—Ç–∞–ª–æ–≥–∞, —É–≤–∏–¥–∏—Ç –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é 1-—é —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ü—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¶–µ–Ω–∞: –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é") –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤.

**–†–∏—Å–∫–∏:**
*   –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∞.
*   –ü–æ—Ç–µ—Ä—è –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –Ω–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä—ã).

**–†–µ—à–µ–Ω–∏–µ:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `vary_on_headers` –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `request.get_full_path` (–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞) –≤ –∫–ª—é—á –∫—ç—à–∞.
*   –í–∞—Ä–∏–∞–Ω—Ç 1 (–≤ —à–∞–±–ª–æ–Ω–µ): `{% cache 600 catalog_products cat_slug request.GET.urlencode %}` (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ `request` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫—ç—à–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ).
*   –í–∞—Ä–∏–∞–Ω—Ç 2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π): –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ View (`@cache_page`) —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º `key_prefix`, –∑–∞–≤–∏—Å—è—â–∏–º –æ—Ç GET-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∏–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ä–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–ª—é—á–æ–º.

---

## ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (High)

### 3. –û–≥—Ä–æ–º–Ω—ã–π –†–∞–∑–º–µ—Ä CSS –ë–∞–Ω–¥–ª–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–§–∞–π–ª `styles.min.css` –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä **~478KB** (–≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ, –Ω–æ –∏—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–≥—Ä–æ–º–µ–Ω –¥–ª—è CSS). –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ —Å—Ç–∏–ª–∏ (–≤–µ—Ä–æ—è—Ç–Ω–æ, Tailwind –∏–ª–∏ Bootstrap) –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—É PurgeCSS (—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ç–∏–ª–µ–π) –∏–ª–∏ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
–ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Render Blocking) –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç –∏ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç –≤–µ—Å—å CSS. –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç First Contentful Paint (FCP).

**–†–∏—Å–∫–∏:**
*   –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö).
*   –ù–∏–∑–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ Core Web Vitals (LCP).
*   –£—Ö—É–¥—à–µ–Ω–∏–µ SEO —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
*   –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `django-compressor` –∏–ª–∏ —Å–±–æ—Ä—â–∏–∫ (Webpack/Vite/Tailwind CLI) –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤ (PurgeCSS/Tree Shaking).
*   –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `COMPRESS_ENABLED = True` –∏ `COMPRESS_OFFLINE = True` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

### 4. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π N+1 –≤ `OrderItem.color_name`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–≤–æ–π—Å—Ç–≤–æ `color_name` –≤ –º–æ–¥–µ–ª–∏ `OrderItem` (`orders/models.py`) –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `self.color_variant.color`. –ï—Å–ª–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–∫–µ `OrderItem` –Ω–µ —Å–¥–µ–ª–∞–Ω `select_related('color_variant__color')`, —Ç–æ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –∏–ª–∏ –∞–¥–º–∏–Ω–∫–µ) –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ N+1, —Å–æ–∑–¥–∞—é—â–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–ø–∏—Å–æ—á–Ω–æ–º –≤—ã–≤–æ–¥–µ.

**–†–∏—Å–∫–∏:**
*   –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–¥–º–∏–Ω–∫–∏.
*   –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:**
*   –í View, –≥–¥–µ –≤—ã–≤–æ–¥—è—Ç—Å—è `OrderItem` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `profile.py`, `dropshipper_views.py`), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å `.select_related('color_variant__color')`.
*   –í —Å–∞–º–æ–º –º–µ—Ç–æ–¥–µ `color_name` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫—ç—à–∞ –ø—Ä–µ—Ñ–µ—Ç—á–∞, –Ω–æ –ª—É—á—à–µ —Ä–µ—à–∞—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ QuerySet.

---

## ‚ÑπÔ∏è –°—Ä–µ–¥–Ω–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Medium)

### 5. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ú–∞–ª–µ–Ω—å–∫–∏—Ö –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Middleware)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í `ImageOptimizationMiddleware` –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–º –º–µ–Ω–µ–µ 200KB –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** –ø—Ä—è–º–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–≤–µ—Ç–∞ (`process_response`).

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
–•–æ—Ç—è 200KB –∫–∞–∂–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∏–º —Ä–∞–∑–º–µ—Ä–æ–º, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è (CPU bound). –ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–Ω–æ–≥–æ –º–µ–ª–∫–∏—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ (—Ö–æ–ª–æ–¥–Ω—ã–π –∫—ç—à), —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –ø–æ–¥—Ç–æ—Ä–º–∞–∂–∏–≤–∞—Ç—å.

**–†–∏—Å–∫–∏:**
*   –£–≤–µ–ª–∏—á–µ–Ω–∏–µ Time To First Byte (TTFB) –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:**
*   –í—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–¥–∞—á–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ —Ñ–æ–Ω (Celery –∏–ª–∏ ThreadPool), –æ—Ç–¥–∞–≤–∞—è –æ—Ä–∏–≥–∏–Ω–∞–ª –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è "Stale-While-Revalidate" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ "Optimistic Response").
*   –ò–ª–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≥—Ä–µ–≤–∞—Ç—å –∫—ç—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

### 6. –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π JavaScript (`analytics-loader.js`)

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–∫—Ä–∏–ø—Ç `analytics-loader.js` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ `defer` –∏–ª–∏ `async`.

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
–ü–∞—Ä—Å–∏–Ω–≥ HTML –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.

**–†–∏—Å–∫–∏:**
*   –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç `defer` –≤ —Ç–µ–≥ `<script>`: `<script src="..." defer></script>`.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ü—É–Ω–∫—Ç—ã (Fixed / False Positives)

–°–ª–µ–¥—É—é—â–∏–µ –ø—É–Ω–∫—Ç—ã –±—ã–ª–∏ –æ—Ç–º–µ—á–µ–Ω—ã –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∞—É–¥–∏—Ç–∞—Ö, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞, —á—Ç–æ –æ–Ω–∏ **—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–ª–∏ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã**:

*   **–ò–Ω–¥–µ–∫—Å—ã –ë–î:** –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è `Order.phone`, `Order.email`, `Product.price` –∏ –¥—Ä—É–≥–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π **–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç**.
*   **–ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ (Checkout):** –§–∞–π–ª `storefront/views/checkout.py` **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Monobank. –≠—Ç–æ –Ω–µ –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥.
*   **N+1 –≤ –ö–æ—Ä–∑–∏–Ω–µ:** View `view_cart` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Product.objects.in_bulk`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –∏–∑–±–µ–∂–∞—Ç—å N+1.
*   **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Google Feed —É–∂–µ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ Celery –∑–∞–¥–∞—á–∏.

---

## üìù –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

1.  **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞** (–°—Ä–æ—á–Ω–æ, –≤–ª–∏—è–µ—Ç –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª).
2.  **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Signals) –≤ Celery** (–°—Ä–æ—á–Ω–æ, –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω–∫–∏).
3.  **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∂–∞—Ç–∏–µ CSS** (–í–∞–∂–Ω–æ –¥–ª—è SEO –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏).
4.  **–î–æ–±–∞–≤–∏—Ç—å `defer` –¥–ª—è JS —Å–∫—Ä–∏–ø—Ç–æ–≤**.
5.  **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `OrderItem` –∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è N+1.
