# SEO-аудит та рекомендації для TwoComms

Документ зібраний після ручної перевірки шаблонів Django, статичних файлів та утиліт SEO. Нижче — перелік поточного стану, уже виправлених моментів і великий список покрокових покращень для зростання органічного трафіку.

## 1. Поточні SEO-сильні сторони
- **Універсальний базовий шаблон** `twocomms/twocomms_django_theme/templates/base.html` містить канонічні URL, Open Graph, Twitter Cards, robots-мету з розширеними директивами та розумні дефолти заголовків.
- **Структуровані дані товарів** генерацією з `storefront/seo_utils.py` (Product, MerchantReturnPolicy, OfferShippingDetails, AggregateRating) + окремий JSON-LD для Google Merchant (`generate_google_merchant_schema`).
- **Система ключових слів і описів** (`SEOKeywordGenerator`, `SEOMetaGenerator`, AI-команди) дозволяє масштабно наповнювати товари та категорії релевантним текстом.
- **Динамічний sitemap** (`storefront/sitemaps.py`) покриває товари, категорії й статичні сторінки; є статичний `/static/sitemap.xml` і коректний `robots.txt` з двома каналами Sitemap.
- **Оптимізація медіа** через теги `responsive_image` та `optimized_image` (WebP/AVIF, багаторозмірні джерела) + preload критичних зображень у головних шаблонах.
- **PWA та продуктивність**: `sw.js` з трьома кеш-стратегіями, `styles.css` з CLS-фіксами, відкладене підвантаження аналітики, перевірка `save-data` режиму — позитивно впливає на Core Web Vitals.
- **Аналітика й тег-менеджмент**: відкладене завантаження GA4, Microsoft Clarity, Facebook Pixel (`facebook-pixel-modern.js`), що дає дані для A/B-тестів і ремаркетингу.

## 2. Усунуті проблеми (січень 2025)
- **Додано H1 на сторінках каталогу** (`catalog.html`) для URLs `/catalog/`, `/catalog/<slug>/`.
- **Інжектовано CollectionPage + ItemList schema** для каталогу й категорій, щоб Bing/Google розуміли списки продуктів.
- **Оновлено JSON-LD товарів**: вирізано штучний GTIN, додано платну політику повернення та вагові варіанти доставки, аби не суперечити Merchant Center.

## 3. Швидкі покращення (високий пріоритет)
1. **Перевірити H1 на інших посадкових**: у деяких hero-блоках кілька тегів `<h1>` (наприклад, `about.html`, `delivery.html`). Залишити один головний H1, інші змінити на `<h2>`.
2. **Увімкнути `seo_meta_tags` на шаблонах, де їх немає** (наприклад, кастомні адмін-сторінки, сторінки профілю клієнта) — інакше там використовуються дефолти з `base.html`.
3. **Додати `LocalBusiness`/`Organization` schema** у `base.html` через тег `{% local_business_schema %}`, аби Google краще розумів бренд і контакти.
4. **Оновити телефон в LocalBusiness schema** (`seo_tags.py`, ряд. 220) на реальний номер.
5. **Перевірити дублікати контенту**: сторінки `/catalog/` і `/catalog/<slug>` мають різні списки. Якщо планується фільтрація за параметрами, додати канонічні посилання, щоб уникнути URL з параметрами (`?color=...`).
6. **Вирівняти sitemap**: зараз статичний `sitemap.xml` має дату "2025-01-09". Автоматизуйте оновлення (`django-admin clearsitecache && generate_dynamic_sitemap`) або принаймні регенеруйте після великих оновлень.

## 4. Технічний SEO (поглиблені рекомендації)
- **HTTP-заголовки**: у `settings.py` вже є HSTS/COOP/COEP. Додайте `SECURE_REFERRER_POLICY` до продакшн-конфига (`twocomms/production_settings.py`) та перевірте, що CDN не переписує заголовки.
- **hreflang**: сайт україномовний, але є англомовні сліди. Якщо планується україно-російська/англійська версія, створіть шаблонний тег для генерації `<link rel="alternate" hreflang="...">` у `base.html`.
- **Structured data coverage**: розгляньте `Article`/`FAQPage` для блогових або інформаційних сторінок (`delivery.html`, `cooperation.html`) — у коді вже є `faq_schema` inclusion-tag, потрібно лише передати дані з view.
- **Breadcrumbs**: зараз для категорій — тільки JSON-LD. Додайте видимий навігатор (`partials/breadcrumbs.html`) на сторінках, де його немає, щоб покращити UX та внутрішню перелінковку.
- **Pagination schema**: коли кількість товарів перевищить 20-24, реалізуйте пагінацію та додайте `<link rel="next">`/`rel="prev"` + `ItemList` із `startIndex`.
- **Логування 4xx/5xx**: налаштуйте моніторинг логу `nginx`/`gunicorn` за шаблоном `SEO_*` (можна через Sentry або Telegram бот) для оперативного виправлення битих посилань.

## 5. Контент і перелінковка
- **Категорійні описи**: у шаблоні `catalog.html` тепер показуємо 40 слів. Додайте "читати більше" + повний текст нижче списку товарів із семантичними `<section>`/`<h2>`.
- **Відгуки**: якщо є UGC, інтегруйте `Review` schema на `product_detail.html` і додайте блок з реальними відгуками. Без даних Google може не показувати зірки навіть з `AggregateRating`.
- **Сторінки довіри**: "Політика повернень", "Оплата та доставка" — забезпечте детальні тексти, внутрішні лінки, схеми `HowTo` або `FAQPage`.
- **Мікрокопії CTA**: використовуйте ключові слова у кнопках ("Купити худі" замість "Додати в кошик" для hero CTA) — впливає на поведінкові фактори.
- **Візуальні елементи**: для кожного hero-фону використовуйте `<picture>` із `alt` описами; зменшуйте текст у зображеннях, щоб Google міг індексувати контент.

## 6. Медійна оптимізація
- **Alt-тексти**: Поля `main_image_alt`, `ProductImage.alt_text` наявні — перевірити, що форми (адмінка/панелі) вимагають заповнення. Для масових завантажень запустіть `generate_alt_texts.py` як регулярне завдання.
- **Lazy loading**: У `product_card.html` використовується `loading="lazy"`; переконайтеся, що перші 1-2 фото на сторінці мають `loading="eager"` для кращої Largest Contentful Paint.
- **Video/UGC**: якщо будуть відео-огляди, використовуйте `VideoObject` schema та `preload="metadata"`.

## 7. Продуктивність та Core Web Vitals
- **Критичні шрифти**: додайте preconnect до `fonts.gstatic.com`. Зараз у `sw.js` є кешування, але перший рендер може бути повільним.
- **CLS контроль**: перевірте усі зображення на наявність `width`/`height`. У `optimized_image.html` додайте `style="aspect-ratio:"` як fallback для браузерів без intrinsic size.
- **Скорочення JS**: скрипт `main.js` вже зібраний, але його можна розбити на мікромодулі (наприклад, окремо для mini-cart) і підвантажувати `type="module" defer`.
- **HTTP/2 Server Push**: замість старого підходу використовуйте `<link rel="preload">` у `base.html` для критичних CSS/JS; зараз preload зроблений лише для логотипа.

## 8. Authority та outreach
- **Digital PR**: створіть розділ кейсів/історій (можна в `templates/pages`) з структурою під `Article`. Це приведе беклінки й розширить семантичне ядро.
- **UGC & community**: використовуйте Telegram інтеграції (`orders/telegram_notifications.py`) для запуску реферальної програми. Додавайте UTM-мітки для відстеження.
- **Google Business Profile**: переконайтеся, що `LocalBusiness` дані синхронізовані з профілем, і додайте розширені атрибути (години, доставка, самовивіз).
- **Партнерські сторінки**: `cooperation.html` може містити форму з FAQ і структурованим `HowTo`, щоб залучати B2B-запити.

## 9. Аналітика та A/B тестування
- **GA4 події**: налаштуйте відстеження `view_item`, `add_to_cart`, `begin_checkout` прямо у `main.js` для рекламних кампаній (Performance Max та Advantage+). Зараз відправляється лише `page_view`.
- **Search Console**: перевірте розділ "Покращення" після оновлень H1/JSON-LD. Зберіть custom Insights при зміні багатої розмітки.
- **Bing Webmaster**: після виправлення H1 повторно надішліть скани. Для Yandex (якщо актуально) додайте `Host: twocomms.shop` у `robots.txt`.
- **Heatmaps**: Clarity підключено — створіть сегменти (користувачі з органіки vs платні) для глибоких інсайтів.

## 10. Автоматизація та процеси
- **Періодичні команди**: налаштуйте cron/CI для `python manage.py generate_ai_content --products-only --force` і `generate_alt_texts` раз на місяць залежно від релізів.
- **Контроль фідів**: `generate_google_merchant_feed.py` має перевірку GTIN; після видалення штучного GTIN додайте логіку для реального поля, якщо воно з'явиться.
- **Monitoring**: використовуйте `management/commands/generate_google_merchant_feed.py --test` (додати параметр) для швидкої валідації перед завантаженням у Merchant Center.

## 11. Ідеї для масштабування (довгострокові)
- **Blog / Lookbook**: створити розділ історій із тегами, виводити `BreadcrumbList`, `Article`, `ImageObject`. Підвищить семантичну релевантність під запити "як стилізувати".
- **Локалізація**: розширення на англійську/польську аудиторію з окремими slug (`/en/`) + `hreflang` відкриє нові ринки.
- **Schema для loyalty**: `LoyaltyProgram` schema (Schema.org beta) може описати систему балів (`user_points.html`), що підвищить видимість в SERP.
- **First-party data**: інтегрувати email-підписку з автоматичною розміткою `SubscribeAction` (JSON-LD) для Rich results.
- **Product bundles**: створити в адмінці взаємні рекомендації ("комплект"), вивести `isAccessoryOrSparePartFor`/`isSimilarTo` у JSON-LD.

## 12. Чек-лист контролю після змін
- ✅ Прогнати `python3 -m compileall storefront/seo_utils.py` (вже виконано для перевірки синтаксису).
- ✅ Перевірити `git diff` та протестувати шаблон `catalog.html` локально.
- ☐ Після деплою: відправити URL у Google Search Console (Live URL > Request indexing).
- ☐ Bing Webmaster Tools: повторне сканування.
- ☐ Merchant Center: повторна перевірка після видалення GTIN/оновлення shipping.
- ☐ Lighthouse (Mobile + Desktop) — переконатися, що LCP < 2.5 c та CLS ~0.

---

Якщо потрібні додаткові сценарії (наприклад, microdata для email-розсилок чи інтеграція з новими маркетплейсами), легко розширити існуючі утиліти SEO (`seo_utils.py`) — структура вже передбачає роздільні генератори.
