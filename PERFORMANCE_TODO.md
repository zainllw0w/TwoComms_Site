# Performance Audit ToDo List

## üö® Critical / High Priority (From Final Audit)
- [ ] 1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (Signals)
- [x] 2. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–∞—Ç–∞–ª–æ–≥–∞ (Broken Pagination/Filtering) ‚Äî –∫—ç—à –≤ `catalog.html` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `request.get_full_path`, —Ñ–∏–ª—å—Ç—Ä—ã/–ø–∞–≥–∏–Ω–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.
- [x] 3. –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π JavaScript (`analytics-loader.js`) ‚Äî `analytics-loader.js` —É–∂–µ —Å `defer`; –Ω–∞ `product_detail_new.html` –≤–Ω–µ—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã (Swiper, Medium Zoom, `product-detail.js`) –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ `defer`.

## üìã Ultra Detailed List (From Detailed Audit)
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #4: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ Font Awesome –∑–∞–≥—Ä—É–∑–∫–∏**
  - **–°—Ç–∞—Ç—É—Å:** –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –∏ –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** `base.html` –∑–∞–≥—Ä—É–∂–∞–µ—Ç Font Awesome —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ.
- [x] **Problem #22**: Missing `rel="preload"` for critical fonts
  - **Status**: **Verified**. `base.html` already preloads `Inter-Regular.woff2` and `Inter-Bold.woff2`.
- [x] **Problem #20**: Multiple analytical scripts
  - **Status**: **Verified - Optimized**. `analytics-loader.js` uses `requestIdleCallback` and event buffering. It consolidates events via `trackEvent` to avoiding duplication in JS.
- [x] **Problem #5**: Very large CSS file (488KB)
  - **Status**: **Mitigated**. –°–æ–±—Ä–∞–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω `styles.purged.css` (PurgeCSS + cssnano) ‚Äî —Ä–∞–∑–º–µ—Ä —Å–Ω–∏–∂–µ–Ω —Å ~469KB –¥–æ ~313KB, –ª–∏—à–Ω—è—è –∞–Ω–∏–º–∞—Ü–∏—è —É–∂–µ —É–¥–∞–ª–µ–Ω–∞. –î–∞–ª—å–Ω–µ–π—à–µ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π safelist/–¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é —É—Ç–∏–ª–∏—Ç.
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #18: N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ ProductDetailView**
  - **–°—Ç–∞—Ç—É—Å:** –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `select_related('category')`. –õ–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —à–∞–±–ª–æ–Ω–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ.
- [ ] 6. N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ (view_cart) (Problem #3)
- [ ] 7. N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ cart_items_api (Problem #4)
- [ ] 8. –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ backdrop-filter: blur() (75+) –∏ filter: blur() (109+) (Problem #5)
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #6: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ status='published' –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö views**
  - **–°—Ç–∞—Ç—É—Å:** –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** –í—Å–µ views –≤ `catalog.py` –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–∏–ª—å—Ç—Ä `status='published'`.
- [ ] 9. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ status='published' –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö views (Problem #6)
- [ ] 10. ImageOptimizationMiddleware –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –ª–µ—Ç—É –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (Problem #7)
- [ ] **–ü—Ä–æ–±–ª–µ–º–∞ #8: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (WebP/AVIF)**
  - **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** WebP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. AVIF —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.
- [x] **Problem #26**: Unused CSS/JS
  - **Status**: **Analyzed**. Removed unused `@keyframes priceGlow` (Problem #5). Further removal requires build tools (PurgeCSS) which are not currently set up.
- [x] **Problem #13**: Repeated DOM queries
  - **Status**: **Resolved**. `product-detail.js` uses `DOM` cache for swatches. `flyToCart` queries are minimal and necessary. Restored missing code in `product-detail.js` and re-applied `transform` optimization.
- [x] **Problem #9**: Animations using `.style.left/.top`
  - **Status**: **Verified - False Positive**. `product-detail.js` uses `transform` for `flyToCart`. `main.js` sets `top` once on open, not continuously. No reflow thrashing found.
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #10: N+1 –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ü–≤–µ—Ç–æ–≤ (build_color_preview_map)**
  - **–°—Ç–∞—Ç—É—Å:** –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_prefetched_objects_cache` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è N+1.
- [x] **Problem #11**: `filter: drop-shadow` in animations
  - **Status**: **Resolved**. Removed unused `@keyframes priceGlow` from `styles.css`.
- [ ] 15. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ N+1 –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö (Problem #12)
- [x] **Problem #14**: Potential XSS vulnerabilities from `innerHTML`
  - **Status**: **Resolved**. Fixed `product-builder.js` by importing and using `escapeHtml`. Verified `main.js` uses `safeUrl` for images and renders server-side templates (safe) for cart modal.
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #15: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ debounce/throttle –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π `resize`/`scroll`**
  - **–°—Ç–∞—Ç—É—Å:** –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `debounce` –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∫—Ä–æ–ª–ª–∞.
- [ ] 19. COMPRESS_ENABLED –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö (Problem #16)
- [ ] 20. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ os.path.exists() –≤—ã–∑–æ–≤—ã (Problem #17)
- [ ] 21. os.path.getmtime() –¥–ª—è ETag –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ (Problem #18)
- [ ] 22. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π cache_page_for_anon decorator (Problem #19)
- [ ] 24. transition: left/top –≤—ã–∑—ã–≤–∞–µ—Ç layout reflow (19+ –º–µ—Å—Ç) (Problem #21)
- [ ] 25. 900+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π !important (CSS specificity hell) (Problem #22)
- [ ] 26. filter: blur() –≤ –∞–Ω–∏–º–∞—Ü–∏–∏ cardLift (GPU intensive) (Problem #23)
- [ ] 27. –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ compositing layers (>30) (Problem #24)
- [ ] 28. –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU –ø–∞–º—è—Ç–∏ –∏–∑-–∑–∞ backdrop-filter (Problem #25)
- [ ] 29. –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ os.path.exists() –≤—ã–∑–æ–≤—ã (320+) (Problem #26)
- [ ] 30. os.path.getmtime() –ø—Ä–∏ –∫–∞–∂–¥–æ–º image request (20+ —Ä–∞–∑) (Problem #27)
- [ ] 31. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π cache_page_for_anon decorator (Duplicate of #19/22?) (Problem #28)
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #20: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `defer` –¥–ª—è `analytics.js`**
  - **–°—Ç–∞—Ç—É—Å:** –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `defer`.
- [ ] 32. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ .only()/.defer() –≤ queryset –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (Problem #29)
- [ ] 33. GTM (Google Tag Manager) –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ <head> (Problem #30)
- [x] **–ü—Ä–æ–±–ª–µ–º–∞ #21: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `fetchpriority="high"` –¥–ª—è LCP –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
  - **–°—Ç–∞—Ç—É—Å:** –†–µ—à–µ–Ω–æ.
  - **–î–µ—Ç–∞–ª–∏:** –ê—Ç—Ä–∏–±—É—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –∏ –≤ –¥–µ—Ç–∞–ª—è—Ö —Ç–æ–≤–∞—Ä–∞.
- [ ] 34. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ lazy loading –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Problem #31)
- [ ] 35. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ select_related/prefetch_related –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö views (Problem #32)
- [ ] 36. Bootstrap –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å CDN –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ (Problem #33)
- [ ] 37. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ middleware (Problem #34)
- [ ] 38. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fragment cache –≤ development mode (Problem #35)
- [ ] 39. setInterval –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ TikTok Pixel readiness (Problem #36)
- [ ] 40. Service Worker —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π (—É–ø—É—â–µ–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å) (Problem #37)
- [ ] 41. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π JSON.parse –≤ product-detail.js –±–ª–æ–∫–∏—Ä—É–µ—Ç main thread (Problem #38)
- [ ] 42. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ event listeners –±–µ–∑ proper cleanup (Problem #39)
- [ ] 43. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ AbortController –¥–ª—è fetch requests (Problem #40)
