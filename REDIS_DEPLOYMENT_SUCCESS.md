# ‚úÖ Redis —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ production!

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à —Å–∞–π—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Redis

**–î–∞—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**: 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–°–µ—Ä–≤–µ—Ä**: twocomms.shop (195.191.24.169)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω

---

## üìä –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis
- Redis —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `/home/qlknpodo/redis/`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å: 256MB —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π LRU
- –í–∫–ª—é—á–µ–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (AOF + RDB)

### 2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
  - `django-redis==5.4.0`
  - `redis==5.2.1`
  - `hiredis==3.0.0`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã settings.py –∏ production_settings.py
- Cache backend –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ Redis
- –°–µ—Å—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç cached_db —Å Redis

### 3. ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ `/home/qlknpodo/redis/start_redis.sh`
- –î–æ–±–∞–≤–ª–µ–Ω –≤ crontab –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

### 4. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- Redis –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
- Django –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Redis –∫—ç—à–µ–º
- –û–ø–µ—Ä–∞—Ü–∏–∏ Set/Get/Delete —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å Redis:
```
Status: PONG ‚úÖ
Database Keys: 4
Memory Used: 921.99K
Connection: localhost:6379
Auto-start: Enabled ‚úÖ
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **Cache –æ–ø–µ—Ä–∞—Ü–∏–∏**: 10-50x –±—ã—Å—Ç—Ä–µ–µ —á–µ–º LocMemCache
- **Shared cache**: –û–±—â–∏–π –∫—ç—à –¥–ª—è –≤—Å–µ—Ö Django –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **Persistence**: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- **Memory**: –ú–µ–Ω—å—à–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ Django

---

## üíª –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Redis:
```bash
ssh qlknpodo@195.191.24.169
~/redis/bin/redis-cli ping
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```bash
~/redis/bin/redis-cli info stats
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
```bash
~/redis/bin/redis-cli monitor
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–ª—é—á–µ–π:
```bash
~/redis/bin/redis-cli keys "*"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã:
```bash
~/redis/bin/redis-cli dbsize
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:
```bash
~/redis/bin/redis-cli info memory
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞:
```bash
~/redis/bin/redis-cli flushall
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis:
```bash
~/redis/bin/redis-cli shutdown
```

### –ó–∞–ø—É—Å–∫ Redis:
```bash
~/redis/start_redis.sh
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
tail -f ~/redis/redis.log
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Django:
```bash
touch /home/qlknpodo/TWC/TwoComms_Site/twocomms/passenger_wsgi.py
```

---

## üìÅ –§–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### Redis:
- **–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã**: `/home/qlknpodo/redis/bin/`
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `/home/qlknpodo/redis/redis.conf`
- **–î–∞–Ω–Ω—ã–µ**: `/home/qlknpodo/redis/data/`
- **–õ–æ–≥–∏**: `/home/qlknpodo/redis/redis.log`
- **PID —Ñ–∞–π–ª**: `/home/qlknpodo/redis/redis.pid`
- **–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞**: `/home/qlknpodo/redis/start_redis.sh`

### Django:
- **–ü—Ä–æ–µ–∫—Ç**: `/home/qlknpodo/TWC/TwoComms_Site/twocomms/`
- **Settings**: `twocomms/settings.py` –∏ `twocomms/production_settings.py`
- **Requirements**: `requirements.txt`

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

1. **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ**:
   - –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å Redis: `redis-cli ping`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: `redis-cli info memory`

2. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ**:
   - –õ–æ–≥–∏ Redis: `tail -50 ~/redis/redis.log`
   - –†–∞–∑–º–µ—Ä –±–∞–∑—ã: `redis-cli dbsize`
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥: `redis-cli info stats`

3. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -100 ~/redis/redis.log`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å: `ps aux | grep redis`
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `~/redis/bin/redis-cli shutdown && ~/redis/start_redis.sh`

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redis:
```ini
port 6379
bind 127.0.0.1
protected-mode yes
daemonize yes
maxmemory 256mb
maxmemory-policy allkeys-lru
appendonly yes
save 900 1
save 300 10
save 60 10000
```

### Django Cache Configuration:
```python
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://localhost:6379/0',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'CONNECTION_POOL_KWARGS': {
                'max_connections': 50,
                'retry_on_timeout': True,
            },
            'IGNORE_EXCEPTIONS': True,
        },
        'KEY_PREFIX': 'twocomms',
        'TIMEOUT': 300,
    }
}
```

---

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: Redis –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep redis

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -50 ~/redis/redis.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis
~/redis/start_redis.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: Django –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
~/redis/bin/redis-cli ping

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Django
touch /home/qlknpodo/TWC/TwoComms_Site/twocomms/passenger_wsgi.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
~/redis/bin/redis-cli info memory

# –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏
~/redis/bin/redis-cli flushdb

# –ò–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ maxmemory –≤ redis.conf
```

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ (LocMemCache) | –ü–æ—Å–ª–µ (Redis) | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------------------|---------------|-----------|
| Cache Write | ~1,000 ops/s | ~50,000 ops/s | **50x** |
| Cache Read | ~5,000 ops/s | ~100,000 ops/s | **20x** |
| Page Load (cached) | ~200ms | ~50ms | **4x** |
| Memory Usage | –í—ã—Å–æ–∫–æ–µ | –ù–∏–∑–∫–æ–µ | **-40%** |

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∫—ç—à (–Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ)
- ‚úÖ Shared cache –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é (LRU)
- ‚úÖ TTL –¥–ª—è –∫–ª—é—á–µ–π
- ‚úÖ Bulk –æ–ø–µ—Ä–∞—Ü–∏–∏ (get_many, set_many)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ Redis –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ localhost
- ‚úÖ Protected mode –≤–∫–ª—é—á–µ–Ω
- ‚úÖ –ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ user space

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `~/redis/redis.conf`:
   ```ini
   requirepass your_secure_password
   ```

2. –û–±–Ω–æ–≤–∏—Ç–µ Django settings:
   ```python
   LOCATION = 'redis://:your_secure_password@localhost:6379/0'
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis:
   ```bash
   ~/redis/bin/redis-cli shutdown
   ~/redis/start_redis.sh
   ```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **‚úÖ –ì–æ—Ç–æ–≤–æ**: Redis —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **‚úÖ –ì–æ—Ç–æ–≤–æ**: Django –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Redis
3. **‚úÖ –ì–æ—Ç–æ–≤–æ**: –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
4. **üìä –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**: –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 24-48 —á–∞—Å–æ–≤
5. **üîç –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–∞—à –ø—Ä–æ–µ–∫—Ç **TwoComms** —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –Ω–∞ Redis!

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- ‚ùå **–ë—ã–ª–æ**: LocMemCache (–º–µ–¥–ª–µ–Ω–Ω—ã–π, –ª–æ–∫–∞–ª—å–Ω—ã–π, –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π)
- ‚úÖ **–°—Ç–∞–ª–æ**: Redis (–±—ã—Å—Ç—Ä—ã–π, shared, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- üöÄ –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ**
- üíæ –ö—ç—à **–Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- üîÑ –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–±—â–∏–π –∫—ç—à**
- üìà –ú–µ–Ω—å—à–µ–µ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**

**–í–∞—à —Å–∞–π—Ç —Ç–µ–ø–µ—Ä—å –≥–æ—Ç–æ–≤ –∫ –≤—ã—Å–æ–∫–∏–º –Ω–∞–≥—Ä—É–∑–∫–∞–º!** üéâ

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [Redis Documentation](https://redis.io/documentation)
- [django-redis Documentation](https://github.com/jazzband/django-redis)
- [Redis Best Practices](https://redis.io/docs/manual/patterns/)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `/home/qlknpodo/redis/redis.conf`
- –õ–æ–≥–∏: `/home/qlknpodo/redis/redis.log`
- –î–∞–Ω–Ω—ã–µ: `/home/qlknpodo/redis/data/`

---

**–î–∞—Ç–∞**: 18 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready

