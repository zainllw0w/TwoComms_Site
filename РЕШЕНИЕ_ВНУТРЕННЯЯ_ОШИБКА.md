# üîß –†–µ—à–µ–Ω–∏–µ: Internal Error (–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞)

## üö® –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

–í—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É **"Internal Error"** - —ç—Ç–æ –æ–±—â–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ù—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É.

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ì–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞?

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è:**
- –û—Ç–∫—Ä—ã–≤–∞–ª–∏ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ? (–∫–∞–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞?)
- –ó–∞–ø—É—Å–∫–∞–ª–∏ –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ SSH?
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∏ cron —á–µ—Ä–µ–∑ cPanel?
- –ü—ã—Ç–∞–ª–∏—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç?

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Django

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
sshpass -p 'trs5m4t1' ssh -o StrictHostKeyChecking=no qlknpodo@195.191.24.169

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -50 /home/qlknpodo/TWC/TwoComms_Site/twocomms/stderr.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏
tail -50 /home/qlknpodo/TWC/TwoComms_Site/twocomms/django.log
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–¥–∞

–Ø –ø—Ä–æ–≤–µ—Ä–∏–ª –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã - —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π. –ù–æ –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /home/qlknpodo/TWC/TwoComms_Site/twocomms
source /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/activate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile orders/nova_poshta_service.py
python -m py_compile orders/management/commands/update_tracking_statuses.py
```

---

## üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–∏—á–∏–Ω–∞ 1: –û—à–∏–±–∫–∞ –≤ cPanel –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ cron

**–°–∏–º–ø—Ç–æ–º—ã:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ cron –∑–∞–¥–∞—á–∏ –≤ cPanel

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—É - –≤–æ–∑–º–æ–∂–Ω–æ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è
2. –£–ø—Ä–æ—Å—Ç–∏—Ç–µ –ø—É—Ç—å –∫ –ª–æ–≥—É: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/tmp/nova_poshta_update.log`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ SSH (—Å–º. –Ω–∏–∂–µ)

### –ü—Ä–∏—á–∏–Ω–∞ 2: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Ç—è–º–∏ –≤ cron –∫–æ–º–∞–Ω–¥–µ

**–°–∏–º–ø—Ç–æ–º—ã:** Cron –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–ª–∏ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â—ë–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É:

```bash
cd /home/qlknpodo/TWC/TwoComms_Site/twocomms && /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/python manage.py update_tracking_statuses >> /tmp/nova_poshta_update.log 2>&1
```

### –ü—Ä–∏—á–∏–Ω–∞ 3: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p /home/qlknpodo/TWC/TwoComms_Site/twocomms/logs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
chmod 755 /home/qlknpodo/TWC/TwoComms_Site/twocomms/logs
```

### –ü—Ä–∏—á–∏–Ω–∞ 4: –û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ Python

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (—Å–º. –≤—ã—à–µ)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```bash
cd /home/qlknpodo/TWC/TwoComms_Site/twocomms
source /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/activate
python manage.py update_tracking_statuses
```

---

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ SSH)

–ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ cPanel, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ SSH:

```bash
sshpass -p 'trs5m4t1' ssh -o StrictHostKeyChecking=no qlknpodo@195.191.24.169 << 'ENDSSH'
cd /home/qlknpodo/TWC/TwoComms_Site/twocomms

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤ –µ—Å–ª–∏ –Ω–µ—Ç
mkdir -p logs

# –û–±–Ω–æ–≤–∏—Ç—å cron –∑–∞–¥–∞—á—É
(crontab -l 2>/dev/null | grep -v "update_tracking_statuses" | grep -v "Nova Poshta"; \
echo "# Nova Poshta: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç"; \
echo "*/5 * * * * cd /home/qlknpodo/TWC/TwoComms_Site/twocomms && /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/python manage.py update_tracking_statuses >> /tmp/nova_poshta_update.log 2>&1") | crontab -

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–æ—Å—å
echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ cron –∑–∞–¥–∞—á ==="
crontab -l | grep update_tracking_statuses

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! Cron –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç"
ENDSSH
```

---

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥:**

```bash
tail -20 /tmp/nova_poshta_update.log
```

3. **–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**

```
[2025-10-30 14:05:00] –ù–∞—á–∞–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤...
–ù–∞–π–¥–µ–Ω–æ X –∑–∞–∫–∞–∑–æ–≤ —Å –¢–¢–ù
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ:
  –í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤ —Å –¢–¢–ù: X
  –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Ç–∞—Ç—É—Å–æ–≤: X
  –û—à–∏–±–æ–∫: 0
```

---

## üÜò –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

### –®–∞–≥ 1: –°–æ–±—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ cron
crontab -l | grep update_tracking_statuses

# 2. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
tail -50 /tmp/nova_poshta_update.log

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
cd /home/qlknpodo/TWC/TwoComms_Site/twocomms
source /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/activate
python -m py_compile orders/nova_poshta_service.py

# 4. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
python manage.py update_tracking_statuses --dry-run
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã
ls -la /home/qlknpodo/TWC/TwoComms_Site/twocomms/orders/nova_poshta_service.py
ls -la /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/python
```

---

## üí° –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è cPanel

–ï—Å–ª–∏ –≤ cPanel –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –¥–ª–∏–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```
*/5 * * * * /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/python /home/qlknpodo/TWC/TwoComms_Site/twocomms/manage.py update_tracking_statuses >> /tmp/nova_poshta.log 2>&1
```

**–í–∞–∂–Ω–æ:** –í cPanel –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —É–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –±–µ–∑ `cd`, —Ç–∞–∫ –∫–∞–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ cPanel –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `&&`.

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞, –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
1. **–ì–¥–µ –∏–º–µ–Ω–Ω–æ –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞?** (cPanel, –±—Ä–∞—É–∑–µ—Ä, SSH)
2. **–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏** (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. **–ß—Ç–æ –≤—ã –¥–µ–ª–∞–ª–∏ –ø–µ—Ä–µ–¥ –æ—à–∏–±–∫–æ–π?**

---

**–î–∞—Ç–∞:** 30.10.2025  
**–°—Ç–∞—Ç—É—Å:** –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

















