# üîç –ì–õ–£–ë–û–ö–ò–ô –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´ –¢–†–ï–ö–ò–ù–ì–ê META/TIKTOK - –û–¢–ß–ï–¢ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-01-30  
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** AI Deep Analysis System  
**–í–µ—Ä—Å–∏—è:** 1.0 - Comprehensive Deep Analysis  
**–¶–µ–ª—å:** –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ò–ò —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∏ —Ä–µ—à–µ–Ω–∏—è–º–∏

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
2. [–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º](#–∞–Ω–∞–ª–∏–∑-–∫–æ–¥–∞-–ø–æ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º)
3. [–ü—Ä–æ–±–ª–µ–º—ã –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏](#–ø—Ä–æ–±–ª–µ–º—ã-–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏)
4. [–ü—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö](#–ø—Ä–æ–±–ª–µ–º—ã-–ø–µ—Ä–µ–¥–∞—á–∏-–¥–∞–Ω–Ω—ã—Ö)
5. [–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
6. [–ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏](#—á–µ–∫–ª–∏—Å—Ç-–ø—Ä–æ–≤–µ—Ä–∫–∏)

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞ #1: Meta External ID –ø–æ–∫—Ä—ã—Ç–∏–µ 0% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- External ID: 0% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, 0% –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏–π
- Event ID: 70.59% –≤ –±—Ä–∞—É–∑–µ—Ä–µ, 67.88% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, 19.92% –ø–æ–∫—Ä—ã—Ç–∏–µ

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **–í `checkout.py` (—Å—Ç—Ä–æ–∫–∏ 255-270):** external_id –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å `None` –µ—Å–ª–∏:
   - –ù–µ—Ç `request.user.is_authenticated` (–Ω–æ —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—ã—à–µ)
   - –ù–µ—Ç `order.session_key` (–∑–∞–∫–∞–∑ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω)
   - –ù–µ—Ç `request.session.session_key` (—Å–µ—Å—Å–∏—è –Ω–µ —Å–æ–∑–¥–∞–Ω–∞)
   - –ù–µ—Ç `order.order_number` (–∑–∞–∫–∞–∑ –µ—â–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω)

2. **–í `facebook_conversions_service.py` (—Å—Ç—Ä–æ–∫–∏ 155-166):** 
   - –°–Ω–∞—á–∞–ª–∞ —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ `tracking_data.get('external_id')`
   - –ï—Å–ª–∏ –Ω–µ—Ç - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –∏–∑ `order.user_id`/`session_key`/`order_number`
   - **–ü–†–û–ë–õ–ï–ú–ê:** –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ external_id –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–∫–µ (order_success.html —Å—Ç—Ä–æ–∫–∏ 1873-1886)

3. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞:**
   - –ö–ª–∏–µ–Ω—Ç: `'user:' + userId` –∏–ª–∏ `'session:' + sessionKey` –∏–ª–∏ `'order:' + orderNumber`
   - –°–µ—Ä–≤–µ—Ä: `f"user:{order.user_id}"` –∏–ª–∏ `f"session:{order.session_key}"` –∏–ª–∏ `f"order:{order.order_number}"`
   - **–ù–û:** –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `orderId` (—á–∏—Å–ª–æ), –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ `order_number` (—Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ "TWC...")

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/storefront/views/checkout.py` (—Å—Ç—Ä–æ–∫–∏ 255-270)
- `twocomms/orders/facebook_conversions_service.py` (—Å—Ç—Ä–æ–∫–∏ 155-166)
- `twocomms/twocomms_django_theme/templates/pages/order_success.html` (—Å—Ç—Ä–æ–∫–∏ 1873-1886)

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ external_id **–í–°–ï–ì–î–ê** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ checkout.py
2. –°–æ—Ö—Ä–∞–Ω—è—Ç—å external_id –≤ payment_payload.tracking.external_id **–¥–æ** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç** –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ external_id —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

---

### –ü—Ä–æ–±–ª–µ–º–∞ #2: Meta FBP –ø–æ–∫—Ä—ã—Ç–∏–µ 3.83% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (0% –ø–æ–∫—Ä—ã—Ç–∏–µ)

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- FBP: 100% –≤ –±—Ä–∞—É–∑–µ—Ä–µ, 3.83% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, 0% –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏–π

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **–í `checkout.py` (—Å—Ç—Ä–æ–∫–∏ 236-242):** fbp —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ cookies —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ cookie —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. **–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ cookie `_fbp` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —Ä–µ–∫–ª–∞–º—ã, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º, –ø–µ—Ä–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ), fbp –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
3. **–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:** analytics-loader.js —á–∏—Ç–∞–µ—Ç fbp –∏–∑ cookies (—Å—Ç—Ä–æ–∫–∞ 87), –Ω–æ –µ—Å–ª–∏ cookie –Ω–µ—Ç - –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Meta Pixel

**–í–∞–∂–Ω–æ:** FBP –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è Meta Pixel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏. –ï—Å–ª–∏ cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞, fbp –Ω–µ –±—É–¥–µ—Ç.

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/storefront/views/checkout.py` (—Å—Ç—Ä–æ–∫–∏ 236-242)
- `twocomms/twocomms_django_theme/static/js/analytics-loader.js` (—Å—Ç—Ä–æ–∫–∏ 87-88, 175-179)
- `twocomms/orders/facebook_conversions_service.py` (—Å—Ç—Ä–æ–∫–∏ 147-149)

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –í—Å–µ–≥–¥–∞ –ª–∏ fbp –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ payment_payload –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
2. **–£–ª—É—á—à–∏—Ç—å:** –î–æ–±–∞–≤–∏—Ç—å fallback - –µ—Å–ª–∏ fbp –Ω–µ—Ç –≤ cookies, –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ JavaScript (–ø–µ—Ä–µ–¥–∞—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã)
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ß—Ç–æ fbp –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ CAPI –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)

---

### –ü—Ä–æ–±–ª–µ–º–∞ #3: Meta FBC (Click ID) –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è Meta: "–û—Ç–ø—Ä–∞–≤—å—Ç–µ ID –∫–ª–∏–∫–∞ (fbc) –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Å–∏–π –Ω–∞ 57.55%"
- FBC –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ –æ—Ç—á–µ—Ç–∞—Ö –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **–í `checkout.py` (—Å—Ç—Ä–æ–∫–∏ 243-248):** fbc —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ cookies, –Ω–æ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
2. **–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:** –í order_success.html fbc **–ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ `__meta`
3. **–í analytics-loader.js:** fbc —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ cookies (—Å—Ç—Ä–æ–∫–∞ 88), –Ω–æ –µ—Å–ª–∏ cookie –Ω–µ—Ç - –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

**–í–∞–∂–Ω–æ:** FBC –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ä–µ–∫–ª–∞–º—É Meta. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–∏—à–µ–ª –∏–∑ —Ä–µ–∫–ª–∞–º—ã, fbc –Ω–µ –±—É–¥–µ—Ç.

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/storefront/views/checkout.py` (—Å—Ç—Ä–æ–∫–∏ 243-248)
- `twocomms/twocomms_django_theme/templates/pages/order_success.html` (—Å—Ç—Ä–æ–∫–∏ 2008-2014, 2069-2075)
- `twocomms/twocomms_django_theme/static/js/analytics-loader.js` (—Å—Ç—Ä–æ–∫–∏ 88, 178-179)

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ª–∏ fbc –∏–∑ checkout.py –≤ payment_payload
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å:** –í order_success.html –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É fbc –≤ `__meta` (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ cookies)
3. **–£–ª—É—á—à–∏—Ç—å:** –í analytics-loader.js —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ fbc –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ metaOptions –µ—Å–ª–∏ –µ—Å—Ç—å

---

### –ü—Ä–æ–±–ª–µ–º–∞ #4: Meta –ø–æ–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ Conversions API –≤—Å–µ–≥–æ 20% (—Ü–µ–ª—å 75%)

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏–π: 20% (—Ü–µ–ª—å ‚â•75%)
- Event ID –ø–æ–∫—Ä—ã—Ç–∏–µ: 19.92%
- –ù–∏–∑–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–æ–±—ã—Ç–∏–π –ø–∏–∫—Å–µ–ª—è, –æ—Ö–≤–∞—Ç—ã–≤–∞–µ–º—ã—Ö —á–µ—Ä–µ–∑ Conversions API

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—é—â–∏—Ö –∫–ª—é—á–µ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:**
   - Event ID: 70.59% –≤ –±—Ä–∞—É–∑–µ—Ä–µ, 67.88% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–æ—á—Ç–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –Ω–æ –Ω–µ 100%)
   - External ID: 0% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - FBP: 100% –≤ –±—Ä–∞—É–∑–µ—Ä–µ, 3.83% –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - FBC: –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ –æ—Ç—á–µ—Ç–∞—Ö

2. **Event ID –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å:**
   - –ö–ª–∏–µ–Ω—Ç: `'{{ order.get_facebook_event_id }}'` (—à–∞–±–ª–æ–Ω Django)
   - –°–µ—Ä–≤–µ—Ä: `order.get_facebook_event_id()` (–º–µ—Ç–æ–¥ –º–æ–¥–µ–ª–∏)
   - **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –í—Å–µ–≥–¥–∞ –ª–∏ –æ–Ω–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ID

3. **–°–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è:**
   - –ö–ª–∏–µ–Ω—Ç: —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ order_success.html
   - –°–µ—Ä–≤–µ—Ä: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ payment_status (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∑–∂–µ)

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/orders/models.py` (–º–µ—Ç–æ–¥ `get_facebook_event_id`, —Å—Ç—Ä–æ–∫–∏ 115-127)
- `twocomms/twocomms_django_theme/templates/pages/order_success.html` (—Å—Ç—Ä–æ–∫–∞ 1999)
- `twocomms/orders/facebook_conversions_service.py` (—Å—Ç—Ä–æ–∫–∞ 284)
- `twocomms/storefront/views/utils.py` (—Å—Ç—Ä–æ–∫–∏ 387-445)

**–†–µ—à–µ–Ω–∏–µ:**
1. **–£–±–µ–¥–∏—Ç—å—Å—è:** Event ID –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
2. **–£–ª—É—á—à–∏—Ç—å:** –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å event_id, fbp, fbc, external_id –≤ CAPI
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π (–∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä)

---

### –ü—Ä–æ–±–ª–µ–º–∞ #5: TikTok Purchase 0 —Å–æ–±—ã—Ç–∏–π (–æ–∂–∏–¥–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è)

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- Purchase: 0 —Å–æ–±—ã—Ç–∏–π, "–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è"
- PlaceAnOrder: 0 —Å–æ–±—ã—Ç–∏–π, "–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è"
- Search: 0 —Å–æ–±—ã—Ç–∏–π, "–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è"

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **TikTok Events API –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   - –í `tiktok_events_service.py` (—Å—Ç—Ä–æ–∫–∏ 31-43): –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `TIKTOK_EVENTS_ACCESS_TOKEN` –∏ `TIKTOK_EVENTS_PIXEL_CODE`
   - –ï—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã - `enabled = False`
   - **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ settings.py –∏–ª–∏ ENV

2. **–°–æ–±—ã—Ç–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è:**
   - –í `utils.py` (—Å—Ç—Ä–æ–∫–∏ 447-494): TikTok —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ payment_status
   - –ù–æ –µ—Å–ª–∏ `tiktok_service.enabled = False`, —Å–æ–±—ã—Ç–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

3. **–û—à–∏–±–∫–∏ –≤ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:**
   - –í `tiktok_events_service.py` (—Å—Ç—Ä–æ–∫–∏ 229-253): –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∑–∞–º–µ—á–µ–Ω—ã

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/orders/tiktok_events_service.py` (—Å—Ç—Ä–æ–∫–∏ 29-43)
- `twocomms/twocomms/settings.py` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ TIKTOK_EVENTS_*)
- `twocomms/storefront/views/utils.py` (—Å—Ç—Ä–æ–∫–∏ 447-494)

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ `TIKTOK_EVENTS_ACCESS_TOKEN` –∏ `TIKTOK_EVENTS_PIXEL_CODE` –≤ ENV
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ TikTok Events API (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ)
3. **–£–ª—É—á—à–∏—Ç—å:** –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–≥–¥–∞ TikTok Events API –æ—Ç–∫–ª—é—á–µ–Ω

---

### –ü—Ä–æ–±–ª–µ–º–∞ #6: TikTok –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: "–°–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: –¢–æ–ª—å–∫–æ –±—Ä–∞—É–∑–µ—Ä"
- –ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Events API

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **TikTok Events API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** (—Å–º. –ü—Ä–æ–±–ª–µ–º–∞ #5)
2. **–°–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:**
   - –í `analytics-loader.js` –µ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TikTok Pixel (—Å—Ç—Ä–æ–∫–∏ 240-310)
   - –ù–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Events API –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/twocomms_django_theme/static/js/analytics-loader.js` (—Å—Ç—Ä–æ–∫–∏ 240-310)
- `twocomms/orders/tiktok_events_service.py` (–≤–µ—Å—å —Ñ–∞–π–ª)

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å TikTok Events API** (—Å–º. –ü—Ä–æ–±–ª–µ–º–∞ #5)
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ Events API –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ payment_status
3. **–£–ª—É—á—à–∏—Ç—å:** –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫ –≤ TikTok Events API

---

### –ü—Ä–æ–±–ª–µ–º–∞ #7: Meta –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è 3.0/10

**–°–∏–º–ø—Ç–æ–º—ã –∏–∑ –æ—Ç—á–µ—Ç–æ–≤:**
- Purchase: 3.0/10
- InitiateCheckout: 3.0/10
- AddToCart: 3.0/10
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å fbc (+57.55%), email (+88.29%), phone (+21.65%)

**–ü—Ä–∏—á–∏–Ω–∞:**
1. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:**
   - Email: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - Phone: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - FBC: –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è (—Å–º. –ü—Ä–æ–±–ª–µ–º–∞ #3)

2. **–î–∞–Ω–Ω—ã–µ –Ω–µ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
   - Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å lowercase –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω SHA-256
   - Phone –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω SHA-256
   - **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- `twocomms/twocomms_django_theme/templates/pages/order_success.html` (—Å—Ç—Ä–æ–∫–∏ 1888-1938, —Ñ—É–Ω–∫—Ü–∏—è `buildMetaUserData`)
- `twocomms/orders/facebook_conversions_service.py` (—Å—Ç—Ä–æ–∫–∏ 89-103, –º–µ—Ç–æ–¥ `_hash_data`)
- `twocomms/twocomms_django_theme/static/js/analytics-loader.js` (—Å—Ç—Ä–æ–∫–∏ 181-182)

**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è email –∏ phone –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
2. **–£–ª—É—á—à–∏—Ç—å:** –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å email –∏ phone –≤ CAPI (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å:** –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å fbc –µ—Å–ª–∏ –µ—Å—Ç—å (—Å–º. –ü—Ä–æ–±–ª–µ–º–∞ #3)

---

## üìä –ê–ù–ê–õ–ò–ó –ö–û–î–ê –ü–û –ö–û–ú–ü–û–ù–ï–ù–¢–ê–ú

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç 1: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π (order_success.html)

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/templates/pages/order_success.html`

**–°—Ç—Ä–æ–∫–∏ 1997-2026: Purchase —Å–æ–±—ã—Ç–∏–µ**
```javascript
var eventId = '{{ order.get_facebook_event_id }}';
var purchaseMeta = {
    event_id: eventId,
    user_data: fbUserData
};
if (externalHash) {
    purchaseMeta.external_id = externalHash;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå **fbp –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ `purchaseMeta`
2. ‚ùå **fbc –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ `purchaseMeta`
3. ‚ö†Ô∏è `externalHash` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω (—Å—Ç—Ä–æ–∫–∞ 2012-2013)

**–°—Ç—Ä–æ–∫–∏ 2066-2086: Lead —Å–æ–±—ã—Ç–∏–µ**
```javascript
var leadEventId = '{{ order.get_facebook_event_id }}_lead';
var leadMeta = {
    event_id: leadEventId,
    user_data: fbUserData
};
if (externalHash) {
    leadMeta.external_id = externalHash;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå **fbp –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ `leadMeta`
2. ‚ùå **fbc –ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ `leadMeta`
3. ‚ö†Ô∏è `externalHash` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω

**–°—Ç—Ä–æ–∫–∏ 1873-1886: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è external_id**
```javascript
var externalSource = '';
if (userIdAttr) {
    externalSource = 'user:' + userIdAttr;
} else if (sessionKey) {
    externalSource = 'session:' + sessionKey;
} else if (orderNumber) {
    externalSource = 'order:' + orderNumber;
} else if (orderId) {
    externalSource = 'order:' + orderId;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `orderId` (—á–∏—Å–ª–æ) –∏–ª–∏ `orderNumber` (—Å—Ç—Ä–æ–∫–∞)
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `order_number` (—Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ "TWC...")
- **–ú–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å!**

---

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç 2: –°–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π (facebook_conversions_service.py)

**–§–∞–π–ª:** `twocomms/orders/facebook_conversions_service.py`

**–°—Ç—Ä–æ–∫–∏ 143-179: –ú–µ—Ç–æ–¥ `_prepare_user_data`**
```python
tracking_data = {}
if order.payment_payload and isinstance(order.payment_payload, dict):
    tracking_data = order.payment_payload.get('tracking') or {}

fbp_value = tracking_data.get('fbp')
if fbp_value:
    user_data.fbp = fbp_value

fbc_value = tracking_data.get('fbc')
if fbc_value:
    user_data.fbc = fbc_value

external_source = tracking_data.get('external_id')
if not external_source:
    if order.user_id:
        external_source = f"user:{order.user_id}"
    elif order.session_key:
        external_source = f"session:{order.session_key}"
    elif order.order_number:
        external_source = f"order:{order.order_number}"
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ö†Ô∏è `fbp_value` –∏ `fbc_value` –º–æ–≥—É—Ç –±—ã—Ç—å `None` –µ—Å–ª–∏ –Ω–µ –≤ tracking_data
2. ‚ö†Ô∏è `external_source` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –µ—Å–ª–∏ –Ω–µ –≤ tracking_data
3. ‚ö†Ô∏è –§–æ—Ä–º–∞—Ç –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º

**–°—Ç—Ä–æ–∫–∏ 155-166: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è external_id**
```python
external_source = tracking_data.get('external_id')
if not external_source:
    # Fallback –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
    if order.user_id:
        external_source = f"user:{order.user_id}"
    elif order.session_key:
        external_source = f"session:{order.session_key}"
    elif order.order_number:
        external_source = f"order:{order.order_number}"
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `orderId` (—á–∏—Å–ª–æ) –∏–ª–∏ `orderNumber` (—Å—Ç—Ä–æ–∫–∞)
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `order.order_number` (—Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ "TWC...")
- **–ú–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å!**

---

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç 3: –°–±–æ—Ä tracking –¥–∞–Ω–Ω—ã—Ö (checkout.py)

**–§–∞–π–ª:** `twocomms/storefront/views/checkout.py`

**–°—Ç—Ä–æ–∫–∏ 236-272: –°–±–æ—Ä tracking_context**
```python
tracking_context = {}
try:
    fbp_cookie = request.COOKIES.get('_fbp')
except Exception:
    fbp_cookie = None
if fbp_cookie:
    tracking_context['fbp'] = fbp_cookie

try:
    fbc_cookie = request.COOKIES.get('_fbc')
except Exception:
    fbc_cookie = None
if fbc_cookie:
    tracking_context['fbc'] = fbc_cookie

external_source = None
if request.user.is_authenticated:
    external_source = f"user:{request.user.id}"
elif order.session_key:
    external_source = f"session:{order.session_key}"
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ö†Ô∏è `fbp_cookie` –∏ `fbc_cookie` –º–æ–≥—É—Ç –±—ã—Ç—å `None` (cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
2. ‚ö†Ô∏è `external_source` –º–æ–∂–µ—Ç –±—ã—Ç—å `None` –µ—Å–ª–∏ –Ω–µ—Ç userId/sessionKey
3. ‚ö†Ô∏è `order.session_key` –º–æ–∂–µ—Ç –±—ã—Ç—å `None` –µ—Å–ª–∏ –∑–∞–∫–∞–∑ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω

---

## üîÑ –ü–†–û–ë–õ–ï–ú–´ –î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–ò

### –ü—Ä–æ–±–ª–µ–º–∞: Event ID –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

**–ö–ª–∏–µ–Ω—Ç (order_success.html, —Å—Ç—Ä–æ–∫–∞ 1999):**
```javascript
var eventId = '{{ order.get_facebook_event_id }}';
```

**–°–µ—Ä–≤–µ—Ä (facebook_conversions_service.py, —Å—Ç—Ä–æ–∫–∞ 284):**
```python
event_id = order.get_facebook_event_id()
```

**–ú–µ—Ç–æ–¥ get_facebook_event_id (models.py, —Å—Ç—Ä–æ–∫–∏ 115-127):**
```python
def get_facebook_event_id(self):
    timestamp = int(self.created.timestamp()) if self.created else int(time.time())
    return f"{self.order_number}_{timestamp}"
```

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ `order.created` –∏–∑–º–µ–Ω–∏—Ç—Å—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π, timestamp –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º
- **–ù–û:** `order.created` –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ Event ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –º–µ—Ç–æ–¥)
- ‚ö†Ô∏è **–ù–û:** –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `order.created` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è

---

### –ü—Ä–æ–±–ª–µ–º–∞: External ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

**–ö–ª–∏–µ–Ω—Ç (order_success.html, —Å—Ç—Ä–æ–∫–∏ 1873-1886):**
```javascript
var externalSource = '';
if (userIdAttr) {
    externalSource = 'user:' + userIdAttr;
} else if (sessionKey) {
    externalSource = 'session:' + sessionKey;
} else if (orderNumber) {
    externalSource = 'order:' + orderNumber;
} else if (orderId) {
    externalSource = 'order:' + orderId;
}
```

**–°–µ—Ä–≤–µ—Ä (checkout.py, —Å—Ç—Ä–æ–∫–∏ 255-270):**
```python
external_source = None
if request.user.is_authenticated:
    external_source = f"user:{request.user.id}"
elif order.session_key:
    external_source = f"session:{order.session_key}"
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `orderId` (—á–∏—Å–ª–æ) –∏–ª–∏ `orderNumber` (—Å—Ç—Ä–æ–∫–∞)
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `order.user.id` –∏–ª–∏ `order.session_key`
- **–ú–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å!**

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—É—é –ª–æ–≥–∏–∫—É** –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
- –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ: `user:{userId}` –∏–ª–∏ `session:{sessionKey}` –∏–ª–∏ `order:{orderNumber}`

---

### –ü—Ä–æ–±–ª–µ–º–∞: FBP/FBC –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

**–ö–ª–∏–µ–Ω—Ç:**
- FBP/FBC —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ cookies –≤ analytics-loader.js (—Å—Ç—Ä–æ–∫–∏ 87-88)
- **–ù–û:** –ù–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `__meta` –≤ order_success.html

**–°–µ—Ä–≤–µ—Ä:**
- FBP/FBC —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ cookies –≤ checkout.py (—Å—Ç—Ä–æ–∫–∏ 238-248)
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ payment_payload.tracking
- –ß–∏—Ç–∞—é—Ç—Å—è –≤ facebook_conversions_service.py (—Å—Ç—Ä–æ–∫–∏ 147-153)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ cookies –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, FBP/FBC –Ω–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã
- **–ù–û:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - FBP/FBC –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å FBP/FBC –≤ `__meta` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ cookies
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ FBP/FBC –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ CAPI –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤ payment_payload

---

## üîß –ö–û–ù–ö–†–ï–¢–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #1: –ü–µ—Ä–µ–¥–∞—á–∞ fbp/fbc –≤ __meta –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/templates/pages/order_success.html`

**–°—Ç—Ä–æ–∫–∏ 2008-2014: Purchase —Å–æ–±—ã—Ç–∏–µ**
```javascript
// –ë–´–õ–û:
var purchaseMeta = {
    event_id: eventId,
    user_data: fbUserData
};

// –î–û–õ–ñ–ù–û –ë–´–¢–¨:
function getCookie(name) {
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length === 2) return parts.pop().split(";").shift();
    return null;
}

var purchaseMeta = {
    event_id: eventId,
    user_data: fbUserData
};
var fbpValue = getCookie('_fbp');
var fbcValue = getCookie('_fbc');
if (fbpValue) {
    purchaseMeta.fbp = fbpValue;
}
if (fbcValue) {
    purchaseMeta.fbc = fbcValue;
}
```

**–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è Lead —Å–æ–±—ã—Ç–∏—è (—Å—Ç—Ä–æ–∫–∏ 2069-2075)**

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #2: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ external_id –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

**–§–∞–π–ª:** `twocomms/storefront/views/checkout.py`

**–°—Ç—Ä–æ–∫–∏ 255-270:**
```python
# –ë–´–õ–û:
external_source = None
if request.user.is_authenticated:
    external_source = f"user:{request.user.id}"
elif order.session_key:
    external_source = f"session:{order.session_key}"
else:
    try:
        session_key = request.session.session_key
    except Exception:
        session_key = None
    if session_key:
        external_source = f"session:{session_key}"
if not external_source and order.order_number:
    external_source = f"order:{order.order_number}"

# –î–û–õ–ñ–ù–û –ë–´–¢–¨:
external_source = None
if request.user.is_authenticated:
    external_source = f"user:{request.user.id}"
else:
    # –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å session_key
    try:
        session_key = request.session.session_key
        if session_key:
            external_source = f"session:{session_key}"
    except Exception:
        pass
    
    # –ï—Å–ª–∏ –Ω–µ—Ç session_key, –∏—Å–ø–æ–ª—å–∑—É–µ–º order_number
    if not external_source and order.order_number:
        external_source = f"order:{order.order_number}"
    
    # –ï—Å–ª–∏ –Ω–µ—Ç order_number, –∏—Å–ø–æ–ª—å–∑—É–µ–º order.id
    if not external_source and order.id:
        external_source = f"order:{order.id}"

# –í–°–ï–ì–î–ê –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
if not external_source:
    external_source = f"order:unknown_{int(time.time())}"
```

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è external_id –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/templates/pages/order_success.html`

**–°—Ç—Ä–æ–∫–∏ 1873-1886:**
```javascript
// –ë–´–õ–û:
var externalSource = '';
if (userIdAttr) {
    externalSource = 'user:' + userIdAttr;
} else if (sessionKey) {
    externalSource = 'session:' + sessionKey;
} else if (orderNumber) {
    externalSource = 'order:' + orderNumber;
} else if (orderId) {
    externalSource = 'order:' + orderId;
}

// –î–û–õ–ñ–ù–û –ë–´–¢–¨:
// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç —á—Ç–æ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
var externalSource = '';
if (userIdAttr) {
    externalSource = 'user:' + userIdAttr;
} else if (sessionKey) {
    externalSource = 'session:' + sessionKey;
} else if (orderNumber) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º orderNumber (—Å—Ç—Ä–æ–∫–∞ —Ç–∏–ø–∞ "TWC..."), –∞ –Ω–µ orderId (—á–∏—Å–ª–æ)
    externalSource = 'order:' + orderNumber;
} else {
    // Fallback - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å orderId —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç orderNumber
    externalSource = 'order:' + (orderId || 'unknown');
}
```

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ TikTok Events API

**–§–∞–π–ª:** `twocomms/twocomms/settings.py`

**–î–æ–±–∞–≤–∏—Ç—å:**
```python
# TikTok Events API
TIKTOK_EVENTS_ACCESS_TOKEN = os.environ.get('TIKTOK_EVENTS_ACCESS_TOKEN', '')
TIKTOK_EVENTS_PIXEL_CODE = os.environ.get('TIKTOK_EVENTS_PIXEL_CODE', '')
TIKTOK_EVENTS_TEST_EVENT_CODE = os.environ.get('TIKTOK_EVENTS_TEST_EVENT_CODE', None)
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ ENV:**
- `TIKTOK_EVENTS_ACCESS_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- `TIKTOK_EVENTS_PIXEL_CODE` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #5: –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è TikTok Events API

**–§–∞–π–ª:** `twocomms/orders/tiktok_events_service.py`

**–°—Ç—Ä–æ–∫–∏ 29-43:**
```python
# –ë–´–õ–û:
if not self.access_token or not self.pixel_code:
    logger.warning(
        "TikTok Events API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω! "
        "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TIKTOK_EVENTS_ACCESS_TOKEN –∏ TIKTOK_EVENTS_PIXEL_CODE –≤ ENV."
    )
    self.enabled = False

# –î–û–õ–ñ–ù–û –ë–´–¢–¨:
if not self.access_token or not self.pixel_code:
    logger.error(
        "‚ùå TikTok Events API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω! "
        "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å TIKTOK_EVENTS_ACCESS_TOKEN –∏ TIKTOK_EVENTS_PIXEL_CODE –≤ ENV. "
        f"Access Token: {'—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if self.access_token else '–ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}, "
        f"Pixel Code: {'—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' if self.pixel_code else '–ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'}"
    )
    self.enabled = False
else:
    logger.info(
        f"‚úÖ TikTok Events API –Ω–∞—Å—Ç—Ä–æ–µ–Ω: Pixel Code={self.pixel_code[:10]}..."
    )
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Event ID —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:**
  - [ ] –ö–ª–∏–µ–Ω—Ç: `'{{ order.get_facebook_event_id }}'`
  - [ ] –°–µ—Ä–≤–µ—Ä: `order.get_facebook_event_id()`
  - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å External ID —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:**
  - [ ] –ö–ª–∏–µ–Ω—Ç: —Ñ–æ—Ä–º–∞—Ç `'user:{id}'` –∏–ª–∏ `'session:{key}'` –∏–ª–∏ `'order:{number}'`
  - [ ] –°–µ—Ä–≤–µ—Ä: —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç
  - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ external_id –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å FBP –ø–µ—Ä–µ–¥–∞—á—É:**
  - [ ] –í order_success.html: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ª–∏ fbp –≤ `__meta`
  - [ ] –í checkout.py: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–∏ fbp –≤ payment_payload
  - [ ] –í CAPI: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ª–∏ fbp –µ—Å–ª–∏ –µ—Å—Ç—å

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å FBC –ø–µ—Ä–µ–¥–∞—á—É:**
  - [ ] –í order_success.html: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ª–∏ fbc –≤ `__meta`
  - [ ] –í checkout.py: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–∏ fbc –≤ payment_payload
  - [ ] –í CAPI: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ª–∏ fbc –µ—Å–ª–∏ –µ—Å—Ç—å

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å TikTok Events API:**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ `TIKTOK_EVENTS_ACCESS_TOKEN` –∏ `TIKTOK_EVENTS_PIXEL_CODE`
  - [ ] –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)
  - [ ] –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ Purchase —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ payment_status='paid'

### –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–¥–µ–ª–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è):

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
  - [ ] Email: lowercase –∏ SHA-256 –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
  - [ ] Phone: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ SHA-256 –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
  - [ ] External ID: SHA-256 –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏–π:**
  - [ ] Meta: –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â•75%
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Meta Events Manager ‚Üí Event Coverage
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1 —Å–æ–±—ã—Ç–∏–µ, –Ω–µ 2)

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è:**
  - [ ] Meta: –∫–∞—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â•7/10
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Meta Events Manager ‚Üí Event Quality
  - [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ email/phone/fbc –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Google Tags:**
  - [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ Google Tags –≤ GTM
  - [ ] –ï—Å–ª–∏ –Ω–µ—Ç - —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:**
  - [ ] CompleteRegistration: –ø–æ—á–µ–º—É –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
  - [ ] TestEvent: —É–¥–∞–ª–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–≠—Ç–æ—Ç –æ—Ç—á–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–µ–∫–∏–Ω–≥–∞ Meta –∏ TikTok. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω:

1. **–ò–∑—É—á–∏—Ç—å –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã
2. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å** –≤—Å–µ —Ç–æ—á–∫–∏ –∏–∑ —á–µ–∫–ª–∏—Å—Ç–∞
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å** –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- Meta Events Manager ‚Üí Event Coverage (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â•75%)
- Meta Events Manager ‚Üí Event Quality (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â•7/10)
- Meta Events Manager ‚Üí Deduplication (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 100%)
- TikTok Events Manager ‚Üí Purchase —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-30  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é














