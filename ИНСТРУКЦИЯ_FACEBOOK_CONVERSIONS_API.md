# üìò –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Facebook Conversions API

**–î–∞—Ç–∞:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ Purchase —Å–æ–±—ã—Ç–∏–π –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ –ù–æ–≤—É—é –ü–æ—á—Ç—É

---

## üéØ –ß–¢–û –¢–ê–ö–û–ï CONVERSIONS API

**Facebook Conversions API** - —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ Facebook –Ω–∞–ø—Ä—è–º—É—é —Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è AdBlock  
‚úÖ –ù–∞–¥–µ–∂–Ω–µ–µ —á–µ–º JavaScript Pixel  
‚úÖ –î–æ–ø–æ–ª–Ω—è–µ—Ç browser Pixel (–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è)  
‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Facebook  

### **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:**
- –ö–æ–≥–¥–∞ –ù–æ–≤–∞—è –ü–æ—á—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å ‚Üí "–û—Ç—Ä–∏–º–∞–Ω–æ"
- Cron job (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Purchase —Å–æ–±—ã—Ç–∏–µ –≤ Facebook

---

## üìã –ß–¢–û –í–ê–ú –ü–û–ù–ê–î–û–ë–ò–¢–°–Ø

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Conversions API –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å:

1. **Pixel ID** - —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å: `823958313630148`
2. **Access Token** - –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∏–∂–µ)
3. **Test Event Code** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üîë –®–ê–ì 1: –ü–û–õ–£–ß–ï–ù–ò–ï ACCESS TOKEN

### **1.1. –û—Ç–∫—Ä–æ–π—Ç–µ Events Manager**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://business.facebook.com/events_manager2/

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Pixel: **823958313630148**

### **1.2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings**

```
Events Manager ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ Pixel (823958313630148) ‚Üí Settings (–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
```

### **1.3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Conversions API"**

–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞:
```
üîß Conversions API
```

### **1.4. –ù–∞–∂–º–∏—Ç–µ "Generate Access Token"**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Conversions API                                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                         ‚îÇ
‚îÇ  Access Token: (not set)                               ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ  [Generate Access Token]                               ‚îÇ
‚îÇ                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Generate Access Token"**

### **1.5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Token**

–ü–æ—è–≤–∏—Ç—Å—è –æ–∫–Ω–æ —Å —Ç–æ–∫–µ–Ω–æ–º:
```
‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ  Your Access Token                                  ‚îÉ
‚î£‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î´
‚îÉ                                                      ‚îÉ
‚îÉ  EAABsbCS1iHgBO7ZCxvqL9kZAw...                      ‚îÉ
‚îÉ  (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ ~200 —Å–∏–º–≤–æ–ª–æ–≤)                    ‚îÉ
‚îÉ                                                      ‚îÉ
‚îÉ  ‚ö†Ô∏è –í–ê–ñ–ù–û: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ  ‚îÉ
‚îÉ  –û–Ω –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω                         ‚îÉ
‚îÉ                                                      ‚îÉ
‚îÉ  [Copy]                                              ‚îÉ
‚îÉ                                                      ‚îÉ
‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ
```

**–ù–∞–∂–º–∏—Ç–µ "Copy"** - —Ç–æ–∫–µ–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω - –æ–Ω –ù–ï –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ!

---

## üåç –®–ê–ì 2: –î–û–ë–ê–í–õ–ï–ù–ò–ï TOKEN –í .ENV

### **2.1. –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ**

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` (–µ—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ):
```bash
nano /Users/zainllw0w/PycharmProjects/TwoComms/twocomms/.env
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```bash
# Facebook Conversions API
FACEBOOK_PIXEL_ID=823958313630148
FACEBOOK_CONVERSIONS_API_TOKEN=EAABsbCS1iHgBO7ZCxvqL9kZAw...
```

(–∑–∞–º–µ–Ω–∏—Ç–µ `EAABsbCS1iHgBO7ZCxvqL9kZAw...` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω)

### **2.2. –ù–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ**

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:
```bash
sshpass -p 'trs5m4t1' ssh -o StrictHostKeyChecking=no qlknpodo@195.191.24.169
```

–û—Ç–∫—Ä–æ–π—Ç–µ `.env`:
```bash
cd /home/qlknpodo/TWC/TwoComms_Site/twocomms
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ —Ç–µ –∂–µ —Å—Ç—Ä–æ–∫–∏:
```bash
FACEBOOK_PIXEL_ID=823958313630148
FACEBOOK_CONVERSIONS_API_TOKEN=EAABsbCS1iHgBO7ZCxvqL9kZAw...
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+X` ‚Üí `Y` ‚Üí `Enter`

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
touch tmp/restart.txt
```

---

## üß™ –®–ê–ì 3: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï CONVERSIONS API

### **3.1. –ü–æ–ª—É—á–∏—Ç–µ Test Event Code (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**

–í Events Manager ‚Üí Settings ‚Üí Conversions API:
```
Test Events: [Create Test Event Code]
```

–ö–æ–¥ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫: `TEST12345`

### **3.2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ**

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
python manage.py shell
```

–í–≤–µ–¥–∏—Ç–µ:
```python
from orders.facebook_conversions import FacebookConversionsAPI
from orders.models import Order

# –ü–æ–ª—É—á–∏—Ç–µ –ª—é–±–æ–π –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑
order = Order.objects.filter(payment_status='paid').first()

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
fb_api = FacebookConversionsAPI(test_event_code='TEST12345')
result = fb_api.send_purchase_event(order)

print(result)
```

### **3.3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Events Manager**

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Events Manager ‚Üí Test Events**

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–±—ã—Ç–∏–µ:
```
‚úÖ Purchase
   Source: Server (Conversions API)
   Value: 1500 UAH
   Test Event: TEST12345
```

–ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –ø–æ—è–≤–∏–ª–æ—Å—å - **–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å–ø–µ—à–Ω–∞!** üéâ

---

## üìä –®–ê–ì 4: –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´ –í PRODUCTION

### **4.1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑**

1. –û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑ —Å –ø–µ—Ä–µ–¥–ø–ª–∞—Ç–æ–π 200 –≥—Ä–Ω
2. –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ MonoPay
3. –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –¢–¢–ù –≤ –ù–æ–≤–æ–π –ü–æ—á—Ç–µ
4. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å—Ç–∞—Ç—É—Å–∞ "–û—Ç—Ä–∏–º–∞–Ω–æ" (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ –∞–¥–º–∏–Ω–∫–µ)

### **4.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
tail -f /var/log/twocomms/conversions_api.log
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[2025-10-30 15:30:00] Purchase event sent for order TWC30102025N01
[2025-10-30 15:30:00] Facebook response: {"events_received": 1, "fbtrace_id": "..."}
```

### **4.3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Events Manager**

Events Manager ‚Üí Overview ‚Üí –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–±—ã—Ç–∏—è:
```
üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞:
   Server (Conversions API): 5 —Å–æ–±—ã—Ç–∏–π
   Browser (Pixel): 12 —Å–æ–±—ã—Ç–∏–π
```

---

## üîÑ –®–ê–ì 5: –î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–Ø (–í–ê–ñ–ù–û!)

Facebook –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–±—ã—Ç–∏–µ –¥–≤–∞–∂–¥—ã:
1. –ò–∑ –±—Ä–∞—É–∑–µ—Ä–∞ (JavaScript Pixel)
2. –° —Å–µ—Ä–≤–µ—Ä–∞ (Conversions API)

–î–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **event_id**.

### **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

**JavaScript Pixel** (–≤ –±—Ä–∞—É–∑–µ—Ä–µ):
```javascript
fbq('track', 'Purchase', {
  value: 1500,
  currency: 'UAH'
}, {
  eventID: 'order_TWC30102025N01_purchase'  // ‚Üê —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
});
```

**Conversions API** (—Å —Å–µ—Ä–≤–µ—Ä–∞):
```python
{
  "event_name": "Purchase",
  "event_id": "order_TWC30102025N01_purchase",  # ‚Üê —Ç–æ—Ç –∂–µ ID
  "event_time": 1698675000,
  ...
}
```

Facebook –≤–∏–¥–∏—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `event_id` ‚Üí —Å—á–∏—Ç–∞–µ—Ç –∫–∞–∫ **–æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ**.

**–í –Ω–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ! ‚úÖ**

---

## üìà –®–ê–ì 6: –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### **6.1. Event Match Quality**

Events Manager ‚Üí Data Sources ‚Üí Pixel ‚Üí **Event Match Quality**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö:
```
Event Match Quality: 8.2 / 10  ‚úÖ –•–æ—Ä–æ—à–æ
```

–ß–µ–º –≤—ã—à–µ - —Ç–µ–º –ª—É—á—à–µ –∞—Ç—Ä–∏–±—É—Ü–∏—è.

### **6.2. –£–ª—É—á—à–µ–Ω–∏–µ Quality Score**

–ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ Email (—É –≤–∞—Å –µ—Å—Ç—å –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
- ‚úÖ Phone (—É –≤–∞—Å –µ—Å—Ç—å)
- ‚úÖ First Name, Last Name (—É –≤–∞—Å –µ—Å—Ç—å)
- ‚úÖ City (—É –≤–∞—Å –µ—Å—Ç—å)
- üî≤ ZIP Code (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
- üî≤ IP Address (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
- üî≤ User Agent (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

### **6.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫**

Events Manager ‚Üí Diagnostics ‚Üí **Data Quality Issues**

–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –æ–Ω–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –∑–¥–µ—Å—å.

---

## ‚öôÔ∏è –®–ê–ì 7: –ù–ê–°–¢–†–û–ô–ö–ê CRON JOB

### **7.1. –°–æ–∑–¥–∞–π—Ç–µ cron task**

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç):
```bash
*/5 * * * * cd /home/qlknpodo/TWC/TwoComms_Site/twocomms && /home/qlknpodo/virtualenv/TWC/TwoComms_Site/twocomms/3.13/bin/python manage.py update_tracking_statuses >> /var/log/twocomms/np_cron.log 2>&1
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+X` ‚Üí `Y` ‚Üí `Enter`

### **7.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ cron —Ä–∞–±–æ—Ç–∞–µ—Ç**

–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 –º–∏–Ω—É—Ç, –∑–∞—Ç–µ–º:
```bash
tail -f /var/log/twocomms/np_cron.log
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
[2025-10-30 15:35:00] Checking 15 orders...
[2025-10-30 15:35:01] Order TWC30102025N01: status updated
[2025-10-30 15:35:01] Purchase event sent to Facebook
```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### **‚ö†Ô∏è –ù–ï –î–ï–õ–ê–ô–¢–ï:**

‚ùå –ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ Git  
‚ùå –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ª–æ–≥–∞—Ö  
‚ùå –ù–ï –¥–µ–ª–∏—Ç–µ—Å—å —Ç–æ–∫–µ–Ω–æ–º —Å –¥—Ä—É–≥–∏–º–∏  

### **‚úÖ –î–ï–õ–ê–ô–¢–ï:**

‚úÖ –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`  
‚úÖ –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ environment variables  
‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–∫–µ–Ω (—Ä–∞–∑ –≤ –≥–æ–¥)  

---

## üìã CHECKLIST: –ß–¢–û –ù–ê–°–¢–†–û–ò–¢–¨

- [ ] 1. –ü–æ–ª—É—á–∏—Ç—å Access Token –≤ Events Manager
- [ ] 2. –î–æ–±–∞–≤–∏—Ç—å token –≤ `.env` (–ª–æ–∫–∞–ª—å–Ω–æ)
- [ ] 3. –î–æ–±–∞–≤–∏—Ç—å token –≤ `.env` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- [ ] 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å Test Event Code
- [ ] 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Events Manager —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—à–ª–æ
- [ ] 7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron job –¥–ª—è –ù–ü
- [ ] 8. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∑–∞–∫–∞–∑–µ
- [ ] 9. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Event Match Quality (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å > 7)
- [ ] 10. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ Diagnostics

---

## üÜò TROUBLESHOOTING

### **–ü—Ä–æ–±–ª–µ–º–∞: –°–æ–±—ã—Ç–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç**

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –¢–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `.env`
2. Pixel ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö: `tail -f /var/log/twocomms/conversions_api.log`
4. Cron job –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è: `tail -f /var/log/twocomms/np_cron.log`

### **–ü—Ä–æ–±–ª–µ–º–∞: Event Match Quality –Ω–∏–∑–∫–∏–π**

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ user data (email, phone, name)
- –•–µ—à–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ (SHA256) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (+380...)

### **–ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏–∫–∞—Ç—ã —Å–æ–±—ã—Ç–∏–π**

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `event_id` –¥–ª—è Pixel –∏ API
- –§–æ—Ä–º–∞—Ç: `order_{order_number}_purchase`
- Facebook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ—Ç

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- Conversions API: https://developers.facebook.com/docs/marketing-api/conversions-api/
- Event Reference: https://developers.facebook.com/docs/meta-pixel/reference
- Best Practices: https://www.facebook.com/business/help/308855623112583

### **Python SDK:**
- GitHub: https://github.com/facebook/facebook-python-business-sdk
- Docs: https://facebook-business-sdk.readthedocs.io/

### **–ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- Event Manager: https://business.facebook.com/events_manager2/
- Pixel Helper (Chrome Extension): –ø—Ä–æ–≤–µ—Ä–∫–∞ Pixel –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- Test Events: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## ‚úÖ –ò–¢–û–ì–û

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É –≤–∞—Å –±—É–¥–µ—Ç:

1. ‚úÖ **–î–≤–æ–π–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π:**
   - Browser (JavaScript Pixel) - –¥–ª—è –æ–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç—ã
   - Server (Conversions API) - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Purchase:**
   - –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–≤–∞—Ä —á–µ—Ä–µ–∑ –ù–ü
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞ –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. ‚úÖ **–ù–∞–¥–µ–∂–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è AdBlock
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
   - –í—ã—Å–æ–∫–∏–π Event Match Quality

4. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π ROAS:**
   - Purchase —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ç–æ–≤–∞—Ä –ø–æ–ª—É—á–µ–Ω
   - –ß–µ—Å—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–π

---

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ - —è –ø–æ–º–æ–≥—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üöÄ

---

**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–î–∞—Ç–∞:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

