# üéØ –°–í–ï–†–•–î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-30  
**–í–µ—Ä—Å–∏—è:** 1.0 (Ultra Detailed)  
**–¶–µ–ª—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:** –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ + –ø–æ–∏—Å–∫ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –º–µ—Å—Ç + –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤  
**–°—Ç–∞—Ç—É—Å:** üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Context7 –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º)

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∞–Ω–∞–ª–∏–∑–∞](#–º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è-–∞–Ω–∞–ª–∏–∑–∞)
3. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (12)](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
4. [–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (32)](#–≤—ã—Å–æ–∫–∏–π-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
5. [–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (5)](#—Å—Ä–µ–¥–Ω–∏–π-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
6. [–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](#–∏—Ç–æ–≥–æ–≤–∞—è-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
7. [–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã](#—Å–≤—è–∑–∞–Ω–Ω—ã–µ-–¥–æ–∫—É–º–µ–Ω—Ç—ã)

---

## üìñ –í–í–ï–î–ï–ù–ò–ï

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **—Å–≤–µ—Ä—Ö–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –ø—Ä–æ–µ–∫—Ç–∞ TwoComms. –ö–∞–∂–¥–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –æ–ø–∏—Å–∞–Ω–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π:

- ‚úÖ –¢–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ (—Ñ–∞–π–ª—ã + —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–¥–∞ (10-15 —Å—Ç—Ä–æ–∫ –¥–æ –∏ –ø–æ—Å–ª–µ)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (FCP, LCP, TTI, CLS, FID, GPU, CPU, –ø–∞–º—è—Ç—å)
- ‚úÖ –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ Context7 (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º)

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

–ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:
- `PERFORMANCE_AUDIT_RU.md` - –æ–±—â–∏–π –∞—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞
- `PERFORMANCE_CRITICAL_ISSUES.md` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- `PERFORMANCE_COMPLETE_ANALYSIS.md` - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ 18 –ø—Ä–æ–±–ª–µ–º
- `PERFORMANCE_DEEP_ANALYSIS.md` - –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑
- `PERFORMANCE_DETAILED_VERIFICATION.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `PERFORMANCE_DEEP_DIVE.md` - –∞–Ω–∞–ª–∏–∑ N+1 –∏ –∞—Å—Å–µ—Ç–æ–≤
- `PERFORMANCE_OPTIMIZATION_ANALYSIS.md` - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üî¨ –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø –ê–ù–ê–õ–ò–ó–ê

### –ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ü–æ–∏—Å–∫ –≤ –∫–æ–¥–µ** - –∏—Å–ø–æ–ª—å–∑—É—è GrepTool –∏ ReadFile –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
2. **–ß—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** - –º–∏–Ω–∏–º—É–º 10-15 —Å—Ç—Ä–æ–∫ –¥–æ –∏ –ø–æ—Å–ª–µ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –∫–æ–¥–∞
3. **–ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π** - –∏–∑—É—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –º–µ—Ç–æ–¥–æ–≤, API
4. **–û—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–Ω–∏—è** - –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤** - —á—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º:

- üî¥ **–ö–†–ò–¢–ò–ß–ù–û** (12 –ø—Ä–æ–±–ª–µ–º) - –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø—É—Å–∫ –∏–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üü° **–í–´–°–û–ö–ò–ô** (32 –ø—Ä–æ–±–ª–µ–º—ã) - –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üü¢ **–°–†–ï–î–ù–ò–ô** (5 –ø—Ä–æ–±–ª–µ–º) - —É–º–µ—Ä–µ–Ω–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

## –ü–†–û–ë–õ–ï–ú–ê #1: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ Font Awesome –∑–∞–≥—Ä—É–∑–∫–∏

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

Font Awesome –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è **–¥–≤–∞–∂–¥—ã** –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
1. **–õ–æ–∫–∞–ª—å–Ω–æ**: –∏–∑ static —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ WhiteNoise
2. **–° CDN**: –∏–∑ cdnjs.cloudflare.com —á–µ—Ä–µ–∑ async preload

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- **–ò–∑–ª–∏—à–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö**: 80-100KB √ó 2 = 160-200KB
- **–î–≤–æ–π–Ω–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É CSS**: –±—Ä–∞—É–∑–µ—Ä –ø–∞—Ä—Å–∏—Ç –æ–±–∞ —Ñ–∞–π–ª–∞
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**: –¥–∞–∂–µ –ø—Ä–∏ async –∑–∞–≥—Ä—É–∑–∫–µ
- **–ü—Ä–æ–±–ª–µ–º–∞–º —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**: –¥–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ = –¥–≤–∞ –∫—ç—à–∞

**–û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:**
- –ú–µ–¥–ª–µ–Ω–Ω—ã—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (3G, Edge)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Ç—Ä–∞—Ñ–∏–∫–æ–º
- –ü–µ—Ä–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞ (–Ω–µ—Ç –∫—ç—à–∞)

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/templates/base.html`  
**–°—Ç—Ä–æ–∫–∏:** 22-41

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–¥–∞:**
```html
<!-- –°—Ç—Ä–æ–∫–∏ 15-45 -->
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –ó–î–ï–°–¨ -->
    
    <!-- Font Awesome: –ª–æ–∫–∞–ª—å–Ω—ã–π –±–∞–Ω–¥–ª + CDN (—É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω) -->
    <link rel="stylesheet" href="{% static 'vendor/fontawesome/css/all.min.css' %}">  <!-- ‚ùå –ü–ï–†–í–ê–Ø –ó–ê–ì–†–£–ó–ö–ê -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preload"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"  <!-- ‚ùå –í–¢–û–†–ê–Ø –ó–ê–ì–†–£–ó–ö–ê -->
          as="style"
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
          onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
            crossorigin="anonymous"
            referrerpolicy="no-referrer">
    </noscript>
    
    <!-- ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ó–ê–ö–ê–ù–ß–ò–í–ê–ï–¢–°–Ø –ó–î–ï–°–¨ -->
    
    <!-- Bootstrap CSS –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ -->
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css' 
          rel='preload' as='style' 
          onload="this.onload=null;this.rel='stylesheet'"
          media="all">
</head>
```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **–õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:**
   - –ü—É—Ç—å: `{% static 'vendor/fontawesome/css/all.min.css' %}`
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Django template tag `{% static %}`
   - –û–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WhiteNoise middleware
   - –í–µ—Ä—Å–∏—è: –≤–µ—Ä–æ—è—Ç–Ω–æ 6.x (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ)

2. **CDN –≤–µ—Ä—Å–∏—è:**
   - URL: `https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css`
   - –í–µ—Ä—Å–∏—è: 6.5.2 (—è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–∞)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `<link rel="preload">`
   - –ò–º–µ–µ—Ç `onload` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ stylesheet
   - –ò–º–µ–µ—Ç `<noscript>` fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –±–µ–∑ JS

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–∞—è):**
   ```
   Browser -> Django -> WhiteNoise -> Static file -> Browser –ø–∞—Ä—Å–∏—Ç CSS
   ```
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (render-blocking)
   - –†–∞–∑–º–µ—Ä: ~80-100KB (–º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
   - Cache-Control: public, max-age=31536000 (–∏–∑ WhiteNoise –Ω–∞—Å—Ç—Ä–æ–µ–∫)

2. **–í—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (CDN):**
   ```
   Browser -> preconnect –∫ cdnjs.cloudflare.com
   Browser -> preload CSS -> onload -> convert to stylesheet -> –ø–∞—Ä—Å–∏—Ç CSS
   ```
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ (async)
   - –ù–û –ø–æ—Å–ª–µ onload –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–∞ –≤—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –†–∞–∑–º–µ—Ä: ~80-100KB
   - Cache-Control: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç CDN (–æ–±—ã—á–Ω–æ long-term cache)

**–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- **–ù–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ** —Å–∞–π—Ç–∞
- **–ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∏–∑–∏—Ç–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –Ω–µ—Ç –∫—ç—à–∞)
- **–î–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (–Ω–µ—Ç —É—Å–ª–æ–≤–∏–π)

**–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**

1. **–°–µ—Ç—å:**
   - –õ–æ–∫–∞–ª—å–Ω–∞—è: 1 HTTP –∑–∞–ø—Ä–æ—Å, ~80-100KB
   - CDN: 1 HTTP –∑–∞–ø—Ä–æ—Å, ~80-100KB
   - DNS lookup –¥–ª—è cdnjs.cloudflare.com: ~20-50ms
   - **–ò–¢–û–ì–û:** 160-200KB + 2 HTTP –∑–∞–ø—Ä–æ—Å–∞ + DNS lookup

2. **CPU:**
   - –ü–∞—Ä—Å–∏–Ω–≥ CSS –¥–≤–∞–∂–¥—ã: ~50-100ms –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
   - CSSOM –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã
   - Style recalculation —Å –¥–≤—É–º—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

3. **–ü–∞–º—è—Ç—å:**
   - –î–≤–∞ –Ω–∞–±–æ—Ä–∞ —Å—Ç–∏–ª–µ–π –≤ –ø–∞–º—è—Ç–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
   - –î–≤–∞ CSSOM –¥–µ—Ä–µ–≤–∞ (–ø–æ–∫–∞ –Ω–µ –æ–±—ä–µ–¥–∏–Ω—è—Ç—Å—è)

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +100-200ms**
- –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç FCP –ø–æ–ª–Ω–æ—Å—Ç—å—é
- CDN –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ—Å–ª–µ FCP (flash of unstyled icons)

**LCP (Largest Contentful Paint):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +50-100ms**
- –ï—Å–ª–∏ LCP —ç–ª–µ–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Font Awesome –∏–∫–æ–Ω–∫–∏
- –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –æ–±–∞ —Ñ–∞–π–ª–∞

**TTI (Time to Interactive):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +150-300ms**
- –ü–∞—Ä—Å–∏–Ω–≥ CSS –±–ª–æ–∫–∏—Ä—É–µ—Ç JavaScript execution
- –î–≤–∞ —Ñ–∞–π–ª–∞ = –¥–≤–æ–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

**CLS (Cumulative Layout Shift):**
- ‚¨ÜÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ +0.1-0.2**
- –ï—Å–ª–∏ CDN –≤–µ—Ä—Å–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ –ª–æ–∫–∞–ª—å–Ω–æ–π
- –ò–∫–æ–Ω–∫–∏ –º–æ–≥—É—Ç "–ø—Ä—ã–≥–∞—Ç—å" –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–π

**FID (First Input Delay):**
- ‚û°Ô∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ**
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –Ω–∞–ø—Ä—è–º—É—é

**GPU:**
- ‚û°Ô∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ**
- Font Awesome –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPU acceleration

**CPU:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +50-100ms –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**
- –î–≤–æ–π–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ CSS
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ CSSOM –¥–≤–∞–∂–¥—ã

**–ü–∞–º—è—Ç—å:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +2-5MB –≤—Ä–µ–º–µ–Ω–Ω–æ**
- –î–≤–∞ –Ω–∞–±–æ—Ä–∞ —Å—Ç–∏–ª–µ–π –≤ –ø–∞–º—è—Ç–∏

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**
- Static —Ñ–∞–π–ª—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ë–î –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +80-100KB (—É–¥–≤–æ–µ–Ω–∏–µ)**
- 160-200KB –≤–º–µ—Å—Ç–æ 80-100KB

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è:**

1. **–ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –í—Å–µ –∏–∫–æ–Ω–∫–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - –ù–û: –Ω–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ CDN (geographic distribution, shared cache)
   - –ù–û: –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞

2. **–ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ CDN –≤–µ—Ä—Å–∏—é:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - CDN –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Ä–µ–¥–∫–æ, –Ω–æ –±—ã–≤–∞–µ—Ç)
   - –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è DNS lookup –≤—Ä–µ–º—è
   - –ù–µ—Ç –æ—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Service Worker)
   - –ù–û: –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ shared cache –º–µ–∂–¥—É —Å–∞–π—Ç–∞–º–∏

3. **–ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å fallback:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å CDN, –∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π
   - –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π JS –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

1. **–®–∞–±–ª–æ–Ω—ã:**
   - `base.html` - –æ—Å–Ω–æ–≤–Ω–æ–π —à–∞–±–ª–æ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
   - –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç –æ—Ç `base.html`
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ 100% —Å—Ç—Ä–∞–Ω–∏—Ü

2. **–ò–∫–æ–Ω–∫–∏:**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (header, footer, –∫–Ω–æ–ø–∫–∏, –º–µ–Ω—é)
   - –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∏–∫–æ–Ω–∫–∏ –µ—Å—Ç—å –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

3. **CSS:**
   - –í–æ–∑–º–æ–∂–Ω—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π Font Awesome –≤ custom CSS
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `styles.css` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `.fa-`, `.fab-`, `.far-` –∫–ª–∞—Å—Å–æ–≤

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã:**

1. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏–∫–æ–Ω–æ–∫
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∫–æ–Ω–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å hover —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∏–∫–æ–Ω–∫–∞—Ö

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - ‚úÖ Lighthouse audit –¥–æ –∏ –ø–æ—Å–ª–µ
   - ‚úÖ WebPageTest –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - ‚úÖ Chrome DevTools Network tab (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∞–π–ª)

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∏–∫–æ–Ω–∫–∞–º–∏
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º—ã–µ –∏–∫–æ–Ω–∫–∏ (JavaScript)

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚ùå **–ù–ï –Ω—É–∂–Ω—ã** - —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏:**
- ‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ** - —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ A/B —Ç–µ—Å—Ç—ã –µ—Å–ª–∏ –æ–Ω–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (Selenium, Playwright)

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º —á–µ—Ä–µ–∑ Context7 –∏ –≤–µ–±-–ø–æ–∏—Å–∫**

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Font Awesome**
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ: ____________________
  - Best practices: ____________________
  - –í–µ—Ä—Å–∏–∏ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ Context7**
  - Performance implications: ____________________
  - CDN vs local hosting: ____________________
  - Cache strategies: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–æ–∏—Å–∫**
  - –°—Ç–∞—Ç—å–∏ –æ production Font Awesome: ____________________
  - Benchmark CDN vs local: ____________________
  - Real-world examples: ____________________

- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**
  - ____________________
  - ____________________
  - ____________________

- [ ] **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:**
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ____________________
  - –ü–æ–¥—Ö–æ–¥: ____________________
  - Fallback strategy: ____________________
  - Testing checklist: ____________________

---

## –ü–†–û–ë–õ–ï–ú–ê #2: –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π CSS —Ñ–∞–π–ª (488KB)

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ì–ª–∞–≤–Ω—ã–π CSS —Ñ–∞–π–ª `styles.min.css` –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä **488KB**, —á—Ç–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –±–æ–ª—å—à–æ–π** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–µ–±-—Å–∞–π—Ç–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**

1. **–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:** CSS —è–≤–ª—è–µ—Ç—Å—è render-blocking —Ä–µ—Å—É—Ä—Å–æ–º. –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç –∏ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç –≤–µ—Å—å CSS.

2. **–û–≥—Ä–æ–º–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏:**
   - –ù–∞ 3G (750 Kbps): ~5.2 —Å–µ–∫—É–Ω–¥—ã
   - –ù–∞ Slow 3G (400 Kbps): ~9.8 —Å–µ–∫—É–Ω–¥—ã
   - –ù–∞ 4G (4 Mbps): ~1 —Å–µ–∫—É–Ω–¥–∞
   - –ù–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–º Wi-Fi (1-2 Mbps): ~2-4 —Å–µ–∫—É–Ω–¥—ã

3. **–ü–∞—Ä—Å–∏–Ω–≥ —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏:**
   - 488KB CSS = –ø—Ä–∏–º–µ—Ä–Ω–æ 10,000-15,000 CSS –ø—Ä–∞–≤–∏–ª
   - –ü–∞—Ä—Å–∏–Ω–≥ –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö: 300-800ms
   - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ CSSOM: –µ—â–µ 200-500ms

4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:**
   - CSS –≤ –ø–∞–º—è—Ç–∏: ~488KB
   - CSSOM –¥–µ—Ä–µ–≤–æ: +2-5MB (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
   - –°–ª–∞–±—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å 1-2GB RAM —Å—Ç—Ä–∞–¥–∞—é—Ç

5. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - `styles.css`: 484KB
   - `styles.min.css`: 488KB
   - **–†–∞–∑–Ω–∏—Ü–∞: +4KB!** –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –£–í–ï–õ–ò–ß–ò–õ–ê —Ä–∞–∑–º–µ—Ä!
   - –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∏–Ω–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –∏–ª–∏ —Ñ–∞–π–ª –Ω–µ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –≤–æ–æ–±—â–µ

**–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ (–≤–µ—Ä–æ—è—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã):**

1. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–∏–ª–∏:** –í–µ—Ä–æ—è—Ç–Ω–æ 30-50% —Å—Ç–∏–ª–µ–π –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
2. **–î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø—Ä–∞–≤–∏–ª–∞:** Media queries –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Å–≤–æ–π—Å—Ç–≤–∞
3. **Vendor prefixes:** –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã (-webkit-, -moz-, -ms-)
4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ "–º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º" —Ñ–∞–π–ª–µ:** –í–æ–∑–º–æ–∂–Ω–æ –æ—Å—Ç–∞–ª–∏—Å—å
5. **Inline data URLs:** Base64 encoded –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/—à—Ä–∏—Ñ—Ç—ã –≤ CSS

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/static/css/styles.min.css`  
**–†–∞–∑–º–µ—Ä:** 488,605 –±–∞–π—Ç (488KB)

**–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

1. `twocomms/twocomms_django_theme/static/css/styles.css` - –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª (484KB)
2. `twocomms/twocomms_django_theme/templates/base.html` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CSS

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:**

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/templates/base.html`  
**–°—Ç—Ä–æ–∫–∏:** ~120-160 (–ø—Ä–∏–º–µ—Ä–Ω–æ)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–¥–∞:**
```html
<!-- –ü—Ä–∏–º–µ—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Ç–æ—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å) -->
<head>
    <!-- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π CSS (inline) -->
    <style>
        /* –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–µ—Ä–≤–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ */
        /* ... –º–Ω–æ–≥–æ inline —Å—Ç–∏–ª–µ–π ... */
    </style>
    
    <!-- ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π CSS —Ñ–∞–π–ª -->
    {% if USE_CSS_MINIFIED %}
        <link rel="stylesheet" href="{% static 'css/styles.min.css' %}">  <!-- ‚ùå 488KB! -->
    {% else %}
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">  <!-- ‚ùå 484KB! -->
    {% endif %}
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CSS —Ñ–∞–π–ª—ã -->
    <link rel="stylesheet" href="{% static 'css/product-detail.css' %}">  <!-- +36KB -->
    <link rel="stylesheet" href="{% static 'css/promocodes.css' %}">  <!-- +39KB -->
    <!-- ... -->
</head>
```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **Django Static Files:**
   - `{% static 'css/styles.min.css' %}`
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WhiteNoise
   - –°–∂–∏–º–∞–µ—Ç—Å—è gzip/brotli –Ω–∞ –ª–µ—Ç—É

2. **WhiteNoise Compression:**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `settings.py`:
   ```python
   STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'
   ```
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç `.gz` –∏ `.br` –≤–µ—Ä—Å–∏–∏
   - Gzipped —Ä–∞–∑–º–µ—Ä: ~90-120KB (–æ—Ü–µ–Ω–∫–∞, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)
   - Brotli —Ä–∞–∑–º–µ—Ä: ~70-100KB (–æ—Ü–µ–Ω–∫–∞, –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

3. **Django Compressor:**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `settings.py`:
   ```python
   COMPRESS_ENABLED = False  # ‚ùå –û–¢–ö–õ–Æ–ß–ï–ù –≤ dev!
   COMPRESS_OFFLINE = False
   ```
   - –í production (–∏–∑ `production_settings.py`):
   ```python
   COMPRESS_ENABLED = True
   COMPRESS_OFFLINE = True
   ```
   - –ù–û: –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ (488KB vs 484KB)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–°–±–æ—Ä–∫–∞ CSS:**
   ```
   SASS/LESS/CSS sources -> Compilation -> styles.css (484KB)
   -> Minification (django-compressor?) -> styles.min.css (488KB) ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢!
   -> WhiteNoise compression -> styles.min.css.gz (~90-120KB)
   ```

2. **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:**
   ```
   Browser request /static/css/styles.min.css
   -> WhiteNoise checks Accept-Encoding
   -> Sends .gz or .br version
   -> Browser decompresses
   -> Browser parses 488KB CSS (–Ω–µ compressed)
   -> Builds CSSOM tree
   -> Renders page
   ```

**–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- **–ù–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ** - base.html –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
- **–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –Ω–µ—Ç –∫—ç—à–∞
- **–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ deploy** - –Ω–æ–≤—ã–π hash –≤ filename

**–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**

1. **–°–µ—Ç—å:**
   - Transfer size: ~90-120KB (gzip)
   - Resource size: 488KB (after decompression)
   - –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ 3G: ~1-1.5 —Å–µ–∫—É–Ω–¥—ã (gzipped)

2. **CPU:**
   - Gzip decompression: 10-30ms
   - CSS parsing: 300-800ms –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
   - CSSOM building: 200-500ms
   - Style calculation: 100-300ms (–ø–µ—Ä–≤—ã–π render)
   - **–ò–¢–û–ì–û:** 600-1630ms CPU –≤—Ä–µ–º–µ–Ω–∏!

3. **–ü–∞–º—è—Ç—å:**
   - CSS string –≤ –ø–∞–º—è—Ç–∏: 488KB
   - CSSOM tree: 2-5MB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
   - Style cache: 1-3MB
   - **–ò–¢–û–ì–û:** 3-8MB –ø–∞–º—è—Ç–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ CSS —Ñ–∞–π–ª–∞!

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +500-2000ms**
- CSS –±–ª–æ–∫–∏—Ä—É–µ—Ç FCP –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å + —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤–µ—Å—å —Ñ–∞–π–ª
- –ù–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö —ç—Ç–æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞

**LCP (Largest Contentful Paint):**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +300-1000ms**
- LCP –Ω–µ –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è –ø–æ–∫–∞ CSS –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
- –û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –µ—Å–ª–∏ LCP - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–Ω—É–∂–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è layout)

**TTI (Time to Interactive):**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +600-1600ms**
- –ü–∞—Ä—Å–∏–Ω–≥ CSS –±–ª–æ–∫–∏—Ä—É–µ—Ç JavaScript execution
- 600-1600ms CPU –≤—Ä–µ–º–µ–Ω–∏ = –¥–æ–ª–≥–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ main thread

**CLS (Cumulative Layout Shift):**
- ‚¨ÜÔ∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +0.05-0.15**
- –ë–æ–ª—å—à–æ–π CSS –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ flash of unstyled content (FOUC)
- –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç "–ø—Ä—ã–≥–∞—Ç—å" –ø–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å—Ç–∏–ª–∏

**FID (First Input Delay):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +50-200ms**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–∫–∞ –ø–∞—Ä—Å–∏—Ç—Å—è CSS
- Main thread –∑–∞–Ω—è—Ç = –∑–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

**GPU:**
- ‚û°Ô∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä—è–º–æ–µ –≤–ª–∏—è–Ω–∏–µ**
- –ù–û: —Å–ª–æ–∂–Ω—ã–µ CSS –ø—Ä–∞–≤–∏–ª–∞ (animations, transforms) –º–æ–≥—É—Ç –Ω–∞–≥—Ä—É–∂–∞—Ç—å GPU

**CPU:**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +600-1600ms**
- –ü–∞—Ä—Å–∏–Ω–≥ 488KB CSS –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- Style recalculation –¥–ª—è —Ç—ã—Å—è—á –ø—Ä–∞–≤–∏–ª
- Layout/Paint thrashing –µ—Å–ª–∏ –º–Ω–æ–≥–æ reflows

**–ü–∞–º—è—Ç—å:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +3-8MB**
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å 1-2GB RAM
- –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å memory pressure –∏ GC –ø–∞—É–∑—ã

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚û°Ô∏è **–ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –≤–ª–∏—è–Ω–∏—è**
- Static —Ñ–∞–π–ª—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ë–î

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ:**
  - Uncompressed: 488KB
  - Gzipped: ~90-120KB (–æ—Ü–µ–Ω–∫–∞)
  - Brotli: ~70-100KB (–æ—Ü–µ–Ω–∫–∞)
  - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: <50KB –¥–ª—è critical CSS

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è:**

1. **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ç–∏–ª–µ–π (PurgeCSS):**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –í–´–°–û–ö–ò–ô**
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º—ã–µ –∫–ª–∞—Å—Å—ã (JavaScript) –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è
   - –ö–ª–∞—Å—Å—ã –∏–∑ –ø–ª–∞–≥–∏–Ω–æ–≤/–±–∏–±–ª–∏–æ—Ç–µ–∫ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã
   - –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å whitelist –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω—É–∂–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤

2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ critical/non-critical:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - –ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å FOUC (Flash of Unstyled Content)
   - –ù—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å critical styles
   - –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—Ç–∏–ª–∏ if –∑–∞–≥—Ä—É–∑–∫–∞ non-critical CSS –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è

3. **–£–ª—É—á—à–µ–Ω–∏–µ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –î–æ–ª–∂–Ω–æ —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é
   - –ù–û –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ (–º–∏–Ω–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Ä–µ–¥–∫–∏–µ CSS –ø—Ä–∞–≤–∏–ª–∞)

4. **–£–¥–∞–ª–µ–Ω–∏–µ vendor prefixes:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô** (–µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å autoprefixer)
   - –ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å target browsers
   - –°—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

1. **–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–∞–π—Ç–∞:**
   - `base.html` = 100% coverage
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–∞ –≤—Å–µ

2. **Django Compressor:**
   - `django-compressor` –ø–∞–∫–µ—Ç
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `settings.py`
   - –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å `collectstatic` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

3. **Build –ø—Ä–æ—Ü–µ—Å—Å:**
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SASS/LESS - –Ω—É–∂–µ–Ω –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostCSS - –Ω—É–∂–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - WhiteNoise - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞–µ—Ç –ø—Ä–∏ `collectstatic`

4. **CSS preprocessors:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `.scss` –∏–ª–∏ `.less` —Ñ–∞–π–ª–æ–≤
   - –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è build pipeline

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã:**

1. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∏–∑—É–∞–ª—å–Ω–æ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ breakpoints (mobile, tablet, desktop)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ interactive states (hover, focus, active)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å dynamic content (modals, dropdowns, tooltips)

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - ‚úÖ Lighthouse audit –¥–æ –∏ –ø–æ—Å–ª–µ (–≤—Å–µ metrics)
   - ‚úÖ WebPageTest –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
   - ‚úÖ Chrome DevTools Coverage tab (unused CSS)
   - ‚úÖ Measure FCP, LCP, CLS –¥–æ –∏ –ø–æ—Å–ª–µ

3. **–ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - ‚úÖ Chrome (latest + 2 versions back)
   - ‚úÖ Firefox (latest + 2 versions back)
   - ‚úÖ Safari (latest + iOS Safari)
   - ‚úÖ Edge (latest)
   - ‚ö†Ô∏è IE11 (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

4. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
   - ‚úÖ –í—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
   - ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏/transitions –Ω–µ —Å–ª–æ–º–∞–Ω—ã
   - ‚úÖ Responsive design –Ω–µ —Å–ª–æ–º–∞–Ω
   - ‚úÖ Print styles —Ä–∞–±–æ—Ç–∞—é—Ç

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚ùå **–ù–ï –Ω—É–∂–Ω—ã** - —Ç–æ–ª—å–∫–æ static —Ñ–∞–π–ª—ã

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏:**

1. **Performance monitoring:**
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å baseline metrics
   - ‚ö†Ô∏è Alerts –º–æ–≥—É—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã) –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è timing

2. **A/B —Ç–µ—Å—Ç—ã:**
   - ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ CSS –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ç–µ—Å—Ç—ã
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å baseline

3. **Analytics:**
   - ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ load time –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ bounce rate
   - ‚úÖ –ù–æ —ç—Ç–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ

4. **SEO:**
   - ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ page speed = —É–ª—É—á—à–µ–Ω–∏–µ SEO
   - ‚úÖ Google Page Experience —É—á–∏—Ç—ã–≤–∞–µ—Ç Core Web Vitals

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º**

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
  - CSS best practices: ____________________
  - Critical CSS extraction: ____________________
  - PurgeCSS configuration: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ Context7:**
  - Django Compressor optimization: ____________________
  - WhiteNoise compression settings: ____________________
  - CSS minification tools comparison: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–æ–∏—Å–∫:**
  - CSS size benchmarks: ____________________
  - Production CSS optimization case studies: ____________________
  - PurgeCSS vs UnCSS vs other tools: ____________________

- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**
  - ____________________
  - ____________________

- [ ] **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:**
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ____________________
  - Tool chain: ____________________
  - Target size: ____________________
  - Implementation steps: ____________________

---

## –ü–†–û–ë–õ–ï–ú–ê #3: N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ (view_cart)

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í —Ñ—É–Ω–∫—Ü–∏–∏ `view_cart` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞** –≤ –∫–æ—Ä–∑–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ N+1 queries.

**–ß—Ç–æ —Ç–∞–∫–æ–µ N+1 –ø—Ä–æ–±–ª–µ–º–∞:**

N+1 - —ç—Ç–æ anti-pattern –∫–æ–≥–¥–∞:
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **1 –∑–∞–ø—Ä–æ—Å** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ ID (N —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
2. –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **N –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

**–ü—Ä–∏–º–µ—Ä:**
- –ö–æ—Ä–∑–∏–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 10 —Ç–æ–≤–∞—Ä–æ–≤
- –í–º–µ—Å—Ç–æ 1 –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö 10 —Ç–æ–≤–∞—Ä–æ–≤
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **10 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** (–ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ)

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**

1. **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏:**
   - 1 —Ç–æ–≤–∞—Ä: 5-10ms (1 –∑–∞–ø—Ä–æ—Å)
   - 5 —Ç–æ–≤–∞—Ä–æ–≤: 25-50ms (5 –∑–∞–ø—Ä–æ—Å–æ–≤)
   - 10 —Ç–æ–≤–∞—Ä–æ–≤: 50-100ms (10 –∑–∞–ø—Ä–æ—Å–æ–≤)
   - 20 —Ç–æ–≤–∞—Ä–æ–≤: 100-200ms (20 –∑–∞–ø—Ä–æ—Å–æ–≤)

2. **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î:**
   - –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å = connection overhead + query execution
   - 10 –∑–∞–ø—Ä–æ—Å–æ–≤ = 10√ó overhead
   - –ü—Ä–∏ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ = 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ (–≤–º–µ—Å—Ç–æ 100)

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
   - –ü—Ä–æ–±–ª–µ–º–∞ —É—Å—É–≥—É–±–ª—è–µ—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º —Ç—Ä–∞—Ñ–∏–∫–∞
   - –ë–î –±—ã—Å—Ç—Ä–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è bottleneck

4. **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:**
   - Network roundtrip –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞: 1-5ms
   - 10 —Ç–æ–≤–∞—Ä–æ–≤ = 10-50ms —Ç–æ–ª—å–∫–æ –Ω–∞ network
   - –°—É–º–º–∏—Ä—É–µ—Ç—Å—è –∫ query execution time

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `twocomms/storefront/views/cart.py`  
**–§—É–Ω–∫—Ü–∏—è:** `view_cart`  
**–°—Ç—Ä–æ–∫–∏:** 129-207

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–¥–∞:**

```python
# –°—Ç—Ä–æ–∫–∏ 120-220 (–ø—Ä–∏–º–µ—Ä–Ω–æ)

def view_cart(request):
    """
    –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    """
    # –ü–æ–ª—É—á–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –∏–∑ —Å–µ—Å—Å–∏–∏
    cart = get_cart_from_session(request)
    cart_items = []
    cart_total = 0
    cart_count = len(cart)
    
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –ó–î–ï–°–¨ ‚ùå
    # –¶–∏–∫–ª –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º –≤ –∫–æ—Ä–∑–∏–Ω–µ
    for item_key, item_data in cart.items():
        try:
            product_id = item_data.get('product_id')
            
            # ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ó–∞–ø—Ä–æ—Å –∫ –ë–î –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞!
            # –ü—Ä–∏ 10 —Ç–æ–≤–∞—Ä–∞—Ö –≤ –∫–æ—Ä–∑–∏–Ω–µ = 10 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
            product = Product.objects.select_related('category').get(id=product_id)
            # ‚ùå ‚ùå ‚ùå
            
            # –ü–æ–ª—É—á–∞–µ–º —Ü–≤–µ—Ç–æ–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç (–µ—â–µ –æ–¥–∏–Ω N+1!)
            color_variant_id = item_data.get('color_variant_id')
            color_variant = _get_color_variant_safe(color_variant_id)  # ‚ùå –ï—â–µ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å!
            
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
            size = item_data.get('size', '').upper() or 'S'
            qty = item_data.get('qty', 1)
            
            # –í—ã—á–∏—Å–ª—è–µ–º —Ü–µ–Ω—É
            item_price = Decimal(item_data.get('price', 0))
            item_total = item_price * qty
            cart_total += item_total
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∞–±–ª–æ–Ω–∞
            cart_items.append({
                'key': item_key,
                'product': product,
                'color_variant': color_variant,
                'size': size,
                'qty': qty,
                'price': item_price,
                'total': item_total,
            })
            
        except Product.DoesNotExist:
            # –¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –ë–î, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
            continue
    
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ó–ê–ö–ê–ù–ß–ò–í–ê–ï–¢–°–Ø –ó–î–ï–°–¨ ‚ùå
    
    context = {
        'cart_items': cart_items,
        'cart_total': cart_total,
        'cart_count': cart_count,
    }
    
    return render(request, 'pages/cart.html', context)
```

**–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —Ç–æ–π –∂–µ –ø—Ä–æ–±–ª–µ–º–æ–π:**

1. **`cart_items_api`** (—Å—Ç—Ä–æ–∫–∏ 1029-1097):
   ```python
   for item_key, item_data in cart.items():
       product = Product.objects.select_related('category').get(id=product_id)  # ‚ùå N+1
   ```

2. **`checkout`** –≤ `checkout.py` (—Å—Ç—Ä–æ–∫–∞ 66):
   ```python
   for item_key, item_data in cart.items():
       product = Product.objects.get(id=product_id)  # ‚ùå N+1 + –Ω–µ—Ç select_related!
   ```

3. **`_get_color_variant_safe`** –≤ `utils.py` (—Å—Ç—Ä–æ–∫–∞ 294):
   ```python
   def _get_color_variant_safe(color_variant_id):
       return ProductColorVariant.objects.get(id=normalized_id)  # ‚ùå –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ü–∏–∫–ª–µ!
   ```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **Django ORM:**
   - `Product.objects.get(id=product_id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
   - `select_related('category')` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è foreign key (—Ö–æ—Ä–æ—à–æ!)
   - –ù–û: –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ü–∏–∫–ª–µ = –ø—Ä–æ–±–ª–µ–º–∞

2. **Session-based cart:**
   - –ö–æ—Ä–∑–∏–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–µ—Å—Å–∏–∏ –∫–∞–∫ dict
   - `get_cart_from_session(request)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict —Ç–∏–ø–∞:
   ```python
   {
       'item_key_1': {
           'product_id': 123,
           'color_variant_id': 456,
           'size': 'M',
           'qty': 2,
           'price': '1299.00'
       },
       'item_key_2': {...},
   }
   ```

3. **`_get_color_variant_safe` helper:**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç `ProductColorVariant` –ø–æ ID
   - –¢–æ–∂–µ –¥–µ–ª–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):**

```
User opens /cart/
  -> view_cart() called
  -> get_cart_from_session() -> returns dict with 10 items
  -> for item_key, item_data in cart.items():  # 10 iterations
       -> Product.objects.get(id=123)  # ‚ùå Query 1
       -> _get_color_variant_safe(456)
            -> ProductColorVariant.objects.get(id=456)  # ‚ùå Query 2
       -> Product.objects.get(id=124)  # ‚ùå Query 3
       -> _get_color_variant_safe(457)
            -> ProductColorVariant.objects.get(id=457)  # ‚ùå Query 4
       -> ... (repeat 10 times)
  -> Total queries: 20 (10 products + 10 variants)
  -> render template
```

**Queries –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã —Å 10 —Ç–æ–≤–∞—Ä–∞–º–∏:**

```sql
-- Query 1
SELECT * FROM storefront_product 
INNER JOIN storefront_category ON storefront_product.category_id = storefront_category.id 
WHERE storefront_product.id = 123;

-- Query 2
SELECT * FROM productcolors_productcolorvariant 
WHERE id = 456;

-- Query 3
SELECT * FROM storefront_product 
INNER JOIN storefront_category ON storefront_product.category_id = storefront_category.id 
WHERE storefront_product.id = 124;

-- Query 4
SELECT * FROM productcolors_productcolorvariant 
WHERE id = 457;

-- ... –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 10 —Ä–∞–∑
-- –ò—Ç–æ–≥–æ: 20 queries
```

**–ß—Ç–æ –î–û–õ–ñ–ù–û –±—ã—Ç—å:**

```sql
-- Query 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å –í–°–ï –ø—Ä–æ–¥—É–∫—Ç—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
SELECT * FROM storefront_product 
INNER JOIN storefront_category ON storefront_product.category_id = storefront_category.id 
WHERE storefront_product.id IN (123, 124, 125, 126, 127, 128, 129, 130, 131, 132);

-- Query 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å –í–°–ï –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
SELECT * FROM productcolors_productcolorvariant 
WHERE id IN (456, 457, 458, 459, 460, 461, 462, 463, 464, 465);

-- Query 3 (optional): –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
SELECT * FROM productcolors_productcolorvariantimage 
WHERE color_variant_id IN (456, 457, 458, 459, 460, 461, 462, 463, 464, 465);

-- –ò—Ç–æ–≥–æ: 2-3 queries –≤–º–µ—Å—Ç–æ 20!
```

**–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- **–ö–∞–∂–¥—ã–π —Ä–∞–∑** –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/cart/`
- **–ö–∞–∂–¥—ã–π —Ä–∞–∑** –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è API `/api/cart/items/`
- **–ü—Ä–∏ –∫–∞–∂–¥–æ–º checkout** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π view)
- **–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** —Å —Ç–æ–≤–∞—Ä–∞–º–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ

**–û—Ü–µ–Ω–∫–∞ –º–∞—Å—à—Ç–∞–±–∞ –ø—Ä–æ–±–ª–µ–º—ã:**

- 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –∫–æ—Ä–∑–∏–Ω—É
- –°—Ä–µ–¥–Ω—è—è –∫–æ—Ä–∑–∏–Ω–∞: 5 —Ç–æ–≤–∞—Ä–æ–≤
- Queries –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: 1000 √ó 10 = 10,000 queries/day
- Queries —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π: 1000 √ó 2 = 2,000 queries/day
- **–≠–∫–æ–Ω–æ–º–∏—è: 8,000 queries/day (80%)**

**–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - Query execution time: ~5-10ms per query
   - 10 —Ç–æ–≤–∞—Ä–æ–≤ = 10 queries √ó 7.5ms = 75ms average
   - Connection overhead: ~1-2ms per query
   - **–ò–¢–û–ì–û:** ~75-100ms DB time –¥–ª—è 10 —Ç–æ–≤–∞—Ä–æ–≤

2. **Network (Django <-> DB):**
   - Roundtrip latency: ~1-5ms per query (localhost/LAN)
   - 10 —Ç–æ–≤–∞—Ä–æ–≤ = 20 queries = 20-100ms network time
   - –ï—Å–ª–∏ DB –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ: –º–æ–∂–µ—Ç –±—ã—Ç—å 10-50ms per query

3. **CPU (Django):**
   - ORM overhead –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è queryset: ~0.1-0.5ms per query
   - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ Python objects: ~0.2-1ms per query
   - **–ò–¢–û–ì–û:** ~6-30ms CPU time –¥–ª—è 20 queries

4. **–ü–∞–º—è—Ç—å:**
   - –ö–∞–∂–¥—ã–π Product object: ~2-5KB (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–ª–µ–π)
   - 10 products = 20-50KB
   - –ö–∞–∂–¥—ã–π ColorVariant: ~1-3KB
   - 10 variants = 10-30KB
   - **–ò–¢–û–ì–û:** ~30-80KB –ø–∞–º—è—Ç–∏ (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ)

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚û°Ô∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä—è–º–æ–µ –≤–ª–∏—è–Ω–∏–µ**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ –ø–µ—Ä–≤–∞—è, FCP —É–∂–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª

**LCP (Largest Contentful Paint):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +50-100ms**
- –ï—Å–ª–∏ LCP - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
- –ó–∞–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö = –∑–∞–¥–µ—Ä–∂–∫–∞ render

**TTI (Time to Interactive):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +75-150ms**
- –ü–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞
- Main thread –∑–∞–Ω—è—Ç –æ–±—Ä–∞–±–æ—Ç–∫–æ–π ORM

**CLS (Cumulative Layout Shift):**
- ‚¨ÜÔ∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +0.01-0.05**
- –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
- Layout –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–∞—Ç—å" –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**FID (First Input Delay):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +10-50ms**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–∫–∞ loading

**GPU:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**
- N+1 queries –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å GPU

**CPU:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +6-30ms**
- ORM overhead –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 20 queries
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤

**–ü–∞–º—è—Ç—å:**
- ‚¨áÔ∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +30-80KB**
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –Ω–æ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: 20 queries –≤–º–µ—Å—Ç–æ 2-3**
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤ **10 —Ä–∞–∑**!
- –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: network overhead**
- –ö–∞–∂–¥—ã–π query = packet overhead
- 20 queries = –±–æ–ª—å—à–µ –ø–∞–∫–µ—Ç–æ–≤ —á–µ–º 1 query

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è:**

1. **–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –ë–î:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô** - –ª–µ–≥–∫–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
   - –¢–µ–∫—É—â–∏–π –∫–æ–¥: `except Product.DoesNotExist: continue`
   - –° `in_bulk()`: –ø—Ä–æ–≤–µ—Ä–∫–∞ `if product_id in products`
   - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ –∏ –Ω–∞–¥–µ–∂–Ω–æ–µ

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - `in_bulk()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict –≤–º–µ—Å—Ç–æ queryset
   - –ù–æ –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–π –∂–µ
   - –ü—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ–º `Product.objects.get()` –Ω–∞ `products.get()`

3. **–ü–æ—Ä—è–¥–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - `in_bulk()` –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict)
   - –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏–∑ session cart
   - –†–µ—à–µ–Ω–∏–µ: –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ cart.items(), –Ω–µ –ø–æ products

4. **Color variants:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - `_get_color_variant_safe()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
   - –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å bulk –≤–µ—Ä—Å–∏—é
   - –ò–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã

5. **Prefetch related:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `prefetch_related` –¥–ª—è images
   - –ò–Ω–∞—á–µ –±—É–¥–µ—Ç –µ—â–µ –æ–¥–∏–Ω N+1 –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

1. **–î—Ä—É–≥–∏–µ views —Å —Ç–æ–π –∂–µ –ø—Ä–æ–±–ª–µ–º–æ–π:**
   - `cart_items_api` –≤ `cart.py`
   - `checkout` –≤ `checkout.py`
   - `cart_mini` –≤ `cart.py`
   - –í—Å–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

2. **Helper —Ñ—É–Ω–∫—Ü–∏–∏:**
   - `_get_color_variant_safe()` - –Ω—É–∂–µ–Ω bulk –∞–Ω–∞–ª–æ–≥
   - `calculate_cart_total()` - —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `in_bulk()` ‚úÖ

3. **–®–∞–±–ª–æ–Ω—ã:**
   - `cart.html` - –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ product fields
   - –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ prefetch_related –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ

4. **Tests:**
   - Unit tests –º–æ–≥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ queries
   - –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å expectations

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã:**

1. **Django Debug Toolbar:**
   - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ dev —Å–µ—Ä–≤–µ—Ä–µ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ queries –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ queries –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - ‚úÖ –¶–µ–ª—å: —Å 20+ queries –¥–æ 2-3 queries

2. **Unit tests:**
   - ‚úÖ –¢–µ—Å—Ç —á—Ç–æ —Ç–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –¢–µ—Å—Ç —á—Ç–æ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
   - ‚úÖ –¢–µ—Å—Ç —á—Ç–æ –ø–æ—Ä—è–¥–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - ‚úÖ –¢–µ—Å—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ queries (assert num_queries)

3. **Integration tests:**
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É
   - ‚úÖ –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ—Ä–∑–∏–Ω—ã
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É

4. **Performance tests:**
   - ‚úÖ Benchmark –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –¥–æ/–ø–æ—Å–ª–µ
   - ‚úÖ Load testing —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚ùå **–ù–ï –Ω—É–∂–Ω—ã** - —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ views

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏:**

1. **API endpoints:**
   - ‚ö†Ô∏è `cart_items_api` –∏–º–µ–µ—Ç —Ç—É –∂–µ –ø—Ä–æ–±–ª–µ–º—É
   - ‚úÖ –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

2. **Monobank checkout:**
   - ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç cart data –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
   - ‚úÖ –ù–µ –¥–æ–ª–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å—Å—è, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

3. **Analytics tracking:**
   - ‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ cart data –≤ GTM/Facebook
   - ‚úÖ –ù–µ –¥–æ–ª–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å—Å—è

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º**

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Django:**
  - `select_related()` vs `prefetch_related()`: ____________________
  - `in_bulk()` usage and behavior: ____________________
  - Query optimization patterns: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ Context7:**
  - N+1 problem solutions: ____________________
  - Bulk loading strategies: ____________________
  - Performance impact measurements: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–æ–∏—Å–∫:**
  - Django N+1 case studies: ____________________
  - Before/after benchmarks: ____________________
  - Best practices for cart implementations: ____________________

- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**
  - ____________________
  - ____________________

- [ ] **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:**
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ____________________
  - Implementation approach: ____________________
  - Testing strategy: ____________________
  - Rollback plan: ____________________

---

## –ü–†–û–ë–õ–ï–ú–ê #4: N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ cart_items_api

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–§—É–Ω–∫—Ü–∏—è `cart_items_api` - —ç—Ç–æ **JSON API endpoint** –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä–∑–∏–Ω—ã –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤. –û–Ω–∞ –∏–º–µ–µ—Ç **—Ç—É –∂–µ —Å–∞–º—É—é –ø—Ä–æ–±–ª–µ–º—É N+1**, —á—Ç–æ –∏ `view_cart`, –Ω–æ —ç—Ç–æ **–µ—â–µ –±–æ–ª–µ–µ –∫—Ä–∏—Ç–∏—á–Ω–æ** –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–∞—â–µ:** API endpoint –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ —Å –∫–æ—Ä–∑–∏–Ω–æ–π:
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏–Ω–∏-–∫–æ—Ä–∑–∏–Ω—ã
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã

2. **AJAX = —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞, –≤–∏–¥–∏—Ç loader
   - –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç = –ø–ª–æ—Ö–æ–π UX
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–¥—É–º–∞—Ç—å —á—Ç–æ —Å–∞–π—Ç "–∑–∞–≤–∏—Å"

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ N+1 –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   ```python
   if color_variant and color_variant.images.exists():  # ‚ùå –ó–∞–ø—Ä–æ—Å 1
       image_url = color_variant.images.first().image.url  # ‚ùå –ó–∞–ø—Ä–æ—Å 2
   ```
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 2 –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –ü—Ä–∏ 10 —Ç–æ–≤–∞—Ä–∞—Ö = 20 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤!

4. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**
   - –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ GTM/Facebook Pixel
   - –ú–µ–¥–ª–µ–Ω–Ω—ã–π API = –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**

- **–ú–∞—Å—à—Ç–∞–±:** API –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ 5-10 —Ä–∞–∑ —á–∞—â–µ —á–µ–º view_cart
- **UX impact:** –ü—Ä—è–º–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **Cumulative effect:** –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –ë–î –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç—Å—è

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `twocomms/storefront/views/cart.py`  
**–§—É–Ω–∫—Ü–∏—è:** `cart_items_api`  
**–°—Ç—Ä–æ–∫–∏:** 1003-1134

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–¥–∞:**

```python
# –°—Ç—Ä–æ–∫–∏ 1000-1100 (–ø—Ä–∏–º–µ—Ä–Ω–æ)

@require_http_methods(["GET"])
def cart_items_api(request):
    """
    JSON API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω—ã.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è AJAX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
    
    Returns:
        JsonResponse with cart data
    """
    cart = get_cart_from_session(request)
    cart_items = []
    subtotal = Decimal('0')
    original_subtotal = Decimal('0')
    total_points = 0
    total_quantity = 0
    
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –ó–î–ï–°–¨ ‚ùå
    for item_key, item_data in cart.items():
        try:
            product_id = item_data.get('product_id')
            
            # ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #1: N+1 –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤
            product = Product.objects.select_related('category').get(id=product_id)
            # ‚ùå ‚ùå ‚ùå
            
            price = product.final_price
            original_price = Decimal(product.price)
            qty = int(item_data.get('qty', 1))
            line_total = price * qty
            original_line_total = original_price * qty
            site_line_discount = original_line_total - line_total
            if site_line_discount < 0:
                site_line_discount = Decimal('0.00')
            total_quantity += qty
            
            # ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #2: N+1 –¥–ª—è —Ü–≤–µ—Ç–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
            color_variant = _get_color_variant_safe(item_data.get('color_variant_id'))
            # ‚ùå ‚ùå ‚ùå
            
            color_label = _color_label_from_variant(color_variant)
            size_value = (item_data.get('size', '') or 'S').upper()
            color_variant_id = color_variant.id if color_variant else None
            offer_id = product.get_offer_id(color_variant_id, size_value)
            
            # –ë–∞–ª–ª—ã –∑–∞ —Ç–æ–≤–∞—Ä
            try:
                if getattr(product, 'points_reward', 0):
                    total_points += int(product.points_reward) * qty
            except Exception:
                pass
            
            # ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #3: N+1 –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            image_url = None
            if color_variant and color_variant.images.exists():  # ‚ùå Query 1
                image_url = request.build_absolute_uri(
                    color_variant.images.first().image.url  # ‚ùå Query 2
                )
            elif product.main_image:
                image_url = request.build_absolute_uri(product.main_image.url)
            # ‚ùå ‚ùå ‚ùå
            
            cart_items.append({
                'key': item_key,
                'product_id': product.id,
                'product_title': product.title,
                'product_slug': product.slug,
                'unit_price': float(price),
                'original_unit_price': float(original_price),
                'line_total': float(line_total),
                'original_line_total': float(original_line_total),
                'site_discount_amount': float(site_line_discount),
                'qty': qty,
                'size': size_value,
                'color_variant_id': item_data.get('color_variant_id'),
                'color_label': color_label,
                'image_url': image_url,
                'points_reward': int(getattr(product, 'points_reward', 0) or 0),
                'offer_id': offer_id,
                'item_value': float(line_total),
                'product_category': product.category.name if getattr(product, 'category', None) else '',
                'discount_percent': product.discount_percent or 0,
            })
            
            subtotal += line_total
            original_subtotal += original_line_total
            
        except Product.DoesNotExist:
            continue
    
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê –ó–ê–ö–ê–ù–ß–ò–í–ê–ï–¢–°–Ø –ó–î–ï–°–¨ ‚ùå
    
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
    promo_code = None
    discount = Decimal('0')
    promo_code_id = request.session.get('promo_code_id')
    
    if promo_code_id:
        try:
            promo_code = PromoCode.objects.get(id=promo_code_id)
            if promo_code.can_be_used():
                discount = promo_code.calculate_discount(subtotal)
            else:
                del request.session['promo_code_id']
                promo_code = None
        except PromoCode.DoesNotExist:
            del request.session['promo_code_id']
    
    total = subtotal - discount
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ ...
    
    return JsonResponse({
        'ok': True,
        'items': cart_items,
        'subtotal': float(subtotal),
        'discount': float(discount),
        'total': float(total),
        'cart_count': total_quantity,
        'total_points': total_points,
    })
```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **Django JsonResponse:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –¥–ª—è AJAX
2. **Session-based cart:** –¢–∞ –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —á—Ç–æ –≤ view_cart
3. **–¢—Ä–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ N+1:**
   - `Product.objects.get()` –≤ —Ü–∏–∫–ª–µ
   - `_get_color_variant_safe()` –≤ —Ü–∏–∫–ª–µ
   - `color_variant.images.exists()` + `.first()` –≤ —Ü–∏–∫–ª–µ

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):**

```
AJAX Request -> /api/cart/items/
  -> cart_items_api() called
  -> get_cart_from_session() -> 10 items
  -> for item in cart (10 iterations):
       -> Product.objects.get(id=123)           # ‚ùå Query 1
       -> _get_color_variant_safe(456)          # ‚ùå Query 2
            -> ProductColorVariant.objects.get(id=456)
       -> color_variant.images.exists()         # ‚ùå Query 3
       -> color_variant.images.first()          # ‚ùå Query 4
       
       -> Product.objects.get(id=124)           # ‚ùå Query 5
       -> _get_color_variant_safe(457)          # ‚ùå Query 6
       -> color_variant.images.exists()         # ‚ùå Query 7
       -> color_variant.images.first()          # ‚ùå Query 8
       
       -> ... (10 iterations)
  -> Total: 40 queries –¥–ª—è 10 —Ç–æ–≤–∞—Ä–æ–≤!
  -> JsonResponse
```

**–ü–æ–¥—Å—á–µ—Ç queries –¥–ª—è 10 —Ç–æ–≤–∞—Ä–æ–≤:**

- 10 √ó Product.objects.get() = **10 queries**
- 10 √ó ProductColorVariant.objects.get() = **10 queries**
- 10 √ó color_variant.images.exists() = **10 queries**
- 10 √ó color_variant.images.first() = **10 queries**
- **–ò–¢–û–ì–û: 40 queries** –≤–º–µ—Å—Ç–æ 3-4!

**–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
2. **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ +/- –∫–ª–∏–∫–∞
3. **–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞:** –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
4. **–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–∏–Ω–∏-–∫–æ—Ä–∑–∏–Ω—ã:** –ö–∞–∂–¥—ã–π —Ä–∞–∑
5. **–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞:** –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è

**–û—Ü–µ–Ω–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏:**

- 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–¥–µ–Ω—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –∫–æ—Ä–∑–∏–Ω–æ–π
- –í —Å—Ä–µ–¥–Ω–µ–º 5 –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (add, change qty, etc.)
- **5000 API calls/–¥–µ–Ω—å**
- –°—Ä–µ–¥–Ω—è—è –∫–æ—Ä–∑–∏–Ω–∞: 5 —Ç–æ–≤–∞—Ä–æ–≤
- Queries –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: 5000 √ó 20 = **100,000 queries/–¥–µ–Ω—å**
- Queries —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π: 5000 √ó 3 = **15,000 queries/–¥–µ–Ω—å**
- **–≠–∫–æ–Ω–æ–º–∏—è: 85,000 queries/–¥–µ–Ω—å (85%)**

**–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - 40 queries √ó 7ms = **280ms DB time** (–¥–ª—è 10 —Ç–æ–≤–∞—Ä–æ–≤)
   - –ù–∞ production —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å 10-20ms per query
   - **400-800ms DB time –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π!**

2. **API Response Time:**
   - DB time: 280-800ms
   - Python processing: 50-100ms
   - Network overhead: 20-40ms
   - **–ò–¢–û–ì–û: 350-940ms –¥–ª—è API response**
   - **–≠—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ –¥–ª—è AJAX!** (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <200ms)

3. **User Experience:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç loader 350-940ms
   - –ü—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ + DB –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π: 1-2 —Å–µ–∫—É–Ω–¥—ã!
   - –ü–ª–æ—Ö–æ–π UX = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É—Ö–æ–¥—è—Ç

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚û°Ô∏è **–ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –≤–ª–∏—è–Ω–∏—è** (API –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ initial page load)

**LCP (Largest Contentful Paint):**
- ‚û°Ô∏è **–ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –≤–ª–∏—è–Ω–∏—è**

**TTI (Time to Interactive):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +300-900ms**
- –ï—Å–ª–∏ API –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ page load (–¥–ª—è –º–∏–Ω–∏-–∫–æ—Ä–∑–∏–Ω—ã)
- JavaScript –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ API –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π

**CLS (Cumulative Layout Shift):**
- ‚¨ÜÔ∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +0.02-0.08**
- –ï—Å–ª–∏ –º–∏–Ω–∏-–∫–æ—Ä–∑–∏–Ω–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
- Layout –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–∞—Ç—å" –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**FID (First Input Delay):**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: +200-800ms**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É"
- –ñ–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ API 350-940ms
- –í–∏–¥–∏—Ç loader, –Ω–µ –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å

**GPU:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**

**CPU:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +10-40ms**
- ORM overhead –¥–ª—è 40 queries
- JSON serialization

**–ü–∞–º—è—Ç—å:**
- ‚¨áÔ∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +40-100KB**
- –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è API response

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: 40 queries –≤–º–µ—Å—Ç–æ 3-4**
- **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤ 10-13 —Ä–∞–∑!**
- –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (API response):**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è** (JSON payload —Ç–æ—Ç –∂–µ)
- –ù–û: –∑–∞–¥–µ—Ä–∂–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ response = –º–µ–¥–ª–µ–Ω–Ω–µ–µ delivery

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è:**

1. **API Response format:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –§–æ—Ä–º–∞—Ç JSON –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
   - JavaScript –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

2. **–ü–æ—Ä—è–¥–æ–∫ items:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - `in_bulk()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø–æ—Ä—è–¥–∫–∞
   - –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏–∑ session cart
   - –†–µ—à–µ–Ω–∏–µ: –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ cart.items(), –∞ –Ω–µ –ø–æ products

3. **Image loading logic:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `prefetch_related('images')`
   - –õ–æ–≥–∏–∫–∞ `.exists()` + `.first()` –¥–æ–ª–∂–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è
   - –†–µ—à–µ–Ω–∏–µ: –∑–∞–≥—Ä—É–∑–∏—Ç—å images –∑–∞—Ä–∞–Ω–µ–µ, –ø—Ä–æ–≤–µ—Ä—è—Ç—å len(images)

4. **Error handling:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - `Product.DoesNotExist` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
   - –° `in_bulk()`: –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º `if product_id in products`

5. **Analytics tracking:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - JavaScript –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ—Ç –∂–µ JSON
   - –ù–û: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

1. **JavaScript –∫–æ–¥:**
   - `main.js` - –ø–∞—Ä—Å–∏—Ç JSON response
   - `cart.js` module - –æ–±–Ω–æ–≤–ª—è–µ—Ç UI
   - Analytics tracking - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç cart data

2. **–î—Ä—É–≥–∏–µ API endpoints:**
   - `add_to_cart` - –≤—ã–∑—ã–≤–∞–µ—Ç cart_items_api –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
   - `update_cart` - –≤—ã–∑—ã–≤–∞–µ—Ç cart_items_api –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

3. **Mini cart component:**
   - Header –º–∏–Ω–∏-–∫–æ—Ä–∑–∏–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç API
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ—Ä–∑–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç API

4. **Helper functions:**
   - `_get_color_variant_safe()` - –Ω—É–∂–Ω–∞ bulk –≤–µ—Ä—Å–∏—è
   - `_color_label_from_variant()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç color_variant

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã:**

1. **API Response tests:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ JSON format –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (int, float, string)

2. **Query count tests:**
   - ‚úÖ Django Debug Toolbar - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ queries
   - ‚úÖ Unit test —Å `assertNumQueries()`
   - ‚úÖ –¶–µ–ª—å: —Å 40+ –¥–æ 3-4 queries

3. **Frontend integration tests:**
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä —á–µ—Ä–µ–∑ AJAX
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–Ω–∏-–∫–æ—Ä–∑–∏–Ω–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ analytics tracking —Ä–∞–±–æ—Ç–∞–µ—Ç

4. **Performance tests:**
   - ‚úÖ Benchmark API response time –¥–æ/–ø–æ—Å–ª–µ
   - ‚úÖ –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
   - ‚úÖ –¶–µ–ª—å: <200ms response time

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚ùå **–ù–ï –Ω—É–∂–Ω—ã**

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏:**

1. **view_cart:**
   - ‚ö†Ô∏è –¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

2. **GTM/Facebook tracking:**
   - ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ events –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è
   - ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ offer_id –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

3. **Promo codes:**
   - ‚úÖ –õ–æ–≥–∏–∫–∞ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
   - ‚úÖ –ù–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ discount –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º**

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Django:**
  - JSON API optimization: ____________________
  - `prefetch_related()` for images: ____________________
  - API response time best practices: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ Context7:**
  - AJAX performance patterns: ____________________
  - Bulk loading with images: ____________________
  - Django REST best practices: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–æ–∏—Å–∫:**
  - Cart API optimization case studies: ____________________
  - Real-world API response time benchmarks: ____________________
  - N+1 in JSON APIs solutions: ____________________

- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**
  - ____________________
  - ____________________

- [ ] **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:**
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ____________________
  - Implementation: ____________________
  - Testing checklist: ____________________

---

## –ü–†–û–ë–õ–ï–ú–ê #5: –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ backdrop-filter: blur() (75+) –∏ filter: blur() (109+)

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í CSS —Ñ–∞–π–ª–µ `styles.css` –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π** CPU/GPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö CSS —Ñ–∏–ª—å—Ç—Ä–æ–≤:

- **75 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `backdrop-filter: blur()`** - —Ä–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **109 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `filter: blur()`** - —Ä–∞–∑–º—ã—Ç–∏–µ —Å–∞–º–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–ò–¢–û–ì–û: 184 blur —Ñ–∏–ª—å—Ç—Ä–∞!**

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:**

1. **GPU/CPU –Ω–∞–≥—Ä—É–∑–∫–∞:**
   - `backdrop-filter: blur()` - **–≠–ö–°–¢–†–ï–ú–ê–õ–¨–ù–û —Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è**
   - –¢—Ä–µ–±—É–µ—Ç blur –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –ü–û–ó–ê–î–ò —ç–ª–µ–º–µ–Ω—Ç–∞
   - –ù–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä –∞–Ω–∏–º–∞—Ü–∏–∏/—Å–∫—Ä–æ–ª–ª–∞: GPU –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç blur
   - Blur radius –æ—Ç 4px –¥–æ 30px - —á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º —Ç—è–∂–µ–ª–µ–µ

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö:**
   - –°–ª–∞–±—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ GPU –Ω–µ —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
   - FPS –ø–∞–¥–∞–µ—Ç —Å 60 –¥–æ 15-20 (jank)
   - –ë–∞—Ç–∞—Ä–µ—è —Ä–∞–∑—Ä—è–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ (GPU usage)
   - –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–µ—Ä–µ–≥—Ä–µ–≤–∞—é—Ç—Å—è

3. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–∞:**
   - `backdrop-filter` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π stacking context
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç layer promotion
   - –ó–∞–º–µ–¥–ª—è–µ—Ç –≤—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

4. **–û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –º–µ—Å—Ç–∞:**
   - `backdrop-filter: blur(30px)` (—Å—Ç—Ä–æ–∫–∞ 8318) - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û —Ç—è–∂–µ–ª—ã–π
   - `backdrop-filter: blur(18px)` (1403, 3822) - –æ—á–µ–Ω—å —Ç—è–∂–µ–ª—ã–π
   - `backdrop-filter: blur(14px)` (2312, 2395, 2584, 2923, 2987, 3353) - —Ç—è–∂–µ–ª—ã–π
   - –ò –µ—â–µ 65+ –º–µ—Å—Ç!

5. **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Firefox < 103:**
   - `backdrop-filter` –ø–æ—è–≤–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –≤ FF 103 (–∏—é–ª—å 2022)
   - –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Firefox - –Ω–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å–æ–≤—Å–µ–º
   - –ù—É–∂–µ–Ω fallback

**–ú–∞—Å—à—Ç–∞–± –ø—Ä–æ–±–ª–µ–º—ã:**

- –ù–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ - –¥–µ—Å—è—Ç–∫–∏ backdrop-filter
- –ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ - –ø–µ—Ä–µ—Å—á–µ—Ç –Ω–∞ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ
- –ü—Ä–∏ hover/animation - –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç
- –ù–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö - –ø–æ–ª–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è UX

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `twocomms/twocomms_django_theme/static/css/styles.css`  
**–°—Ç—Ä–æ–∫–∏:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ (75 backdrop-filter + 109 filter)

**–ü—Ä–∏–º–µ—Ä—ã –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç:**

**1. –°–∞–º—ã–π —Ç—è–∂–µ–ª—ã–π - blur(30px):**
```css
/* –°—Ç—Ä–æ–∫–∞ 8318 - orders-empty */
.orders-empty {
  text-align: center;
  padding: 3rem 2rem;
  background: linear-gradient(135deg, rgba(15, 17, 22, 0.98), rgba(5, 7, 12, 0.95));
  border: 1px solid rgba(139, 92, 246, 0.15);
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 40px rgba(139, 92, 246, 0.05);
  backdrop-filter: blur(30px);  /* ‚ùå –ö–†–ò–¢–ò–ß–ù–û: 30px blur! */
}
```

**2. –¢—è–∂–µ–ª—ã–µ - blur(18px):**
```css
/* –°—Ç—Ä–æ–∫–∞ 1403 */
backdrop-filter: blur(18px);

/* –°—Ç—Ä–æ–∫–∞ 3822 */
backdrop-filter: blur(18px);
```

**3. –°—Ä–µ–¥–Ω–µ-—Ç—è–∂–µ–ª—ã–µ - blur(14px) (6 –º–µ—Å—Ç):**
```css
/* –°—Ç—Ä–æ–∫–∏: 2312, 2395, 2584, 2923, 2987, 3353 */
backdrop-filter: blur(14px);
```

**4. –õ–µ–≥–∫–∏–µ –Ω–æ —á–∞—Å—Ç—ã–µ - blur(5px-10px) (50+ –º–µ—Å—Ç):**
```css
/* –°—Ç—Ä–æ–∫–∞ 36 */
backdrop-filter: saturate(120%) blur(5px)

/* –°—Ç—Ä–æ–∫–∞ 40 */
backdrop-filter: blur(5px) saturate(110%)

/* –°—Ç—Ä–æ–∫–∞ 46 */
backdrop-filter: blur(8px)

/* –ò –µ—â–µ 47+ –º–µ—Å—Ç... */
```

**5. Regular filter: blur() (109 –º–µ—Å—Ç):**
```css
/* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–º—ã—Ç–∏—è —Å–∞–º–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
filter: blur(2px);
filter: blur(5px);
filter: blur(10px);
/* ... –∏ —Ç.–¥. */
```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **backdrop-filter CSS property:**
   - –†–∞–∑–º—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ü–û–ó–ê–î–ò —ç–ª–µ–º–µ–Ω—Ç–∞
   - –°–æ–∑–¥–∞–µ—Ç "frosted glass" —ç—Ñ—Ñ–µ–∫—Ç
   - –†–∞–±–æ—Ç–∞–µ—Ç: Chrome/Edge 76+, Safari 9+, Firefox 103+
   - **–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç**: Firefox < 103, IE11

2. **filter CSS property:**
   - –†–∞–∑–º—ã–≤–∞–µ—Ç —Å–∞–º —ç–ª–µ–º–µ–Ω—Ç
   - –†–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
   - –ú–µ–Ω–µ–µ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª–µ–Ω –∫ —Ä–µ—Å—É—Ä—Å–∞–º —á–µ–º backdrop-filter

3. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
   - `backdrop-filter: saturate(120%) blur(5px)` - –î–í–ê —Ñ–∏–ª—å—Ç—Ä–∞!
   - –ï—â–µ —Ç—è–∂–µ–ª–µ–µ –¥–ª—è GPU

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (technical details):**

```
Render Pipeline —Å backdrop-filter:

1. Layout phase:
   -> –ë—Ä–∞—É–∑–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –∏ –ø–æ–∑–∏—Ü–∏–∏

2. Paint phase:
   -> –†–∏—Å—É–µ—Ç background –∑–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–º
   -> –ü—Ä–∏–º–µ–Ω—è–µ—Ç backdrop-filter:
      -> –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç bitmap –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–∑–∞–¥–∏
      -> –ü—Ä–∏–º–µ–Ω—è–µ—Ç Gaussian blur kernel
      -> –î–ª—è blur(30px): kernel —Ä–∞–∑–º–µ—Ä 30√ó30 pixels
      -> –î–ª—è –∫–∞–∂–¥–æ–≥–æ pixel: 900+ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π!
      -> –ù–∞ GPU: shader pass –¥–ª—è blur

3. Composite phase:
   -> –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π layer (stacking context)
   -> Composite —Ä–∞–∑–º—ã—Ç—ã–π background + element content

–ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ/–∞–Ω–∏–º–∞—Ü–∏–∏:
   -> –®–∞–≥–∏ 2-3 –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ!
   -> –ü—Ä–∏ 60fps = 60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É!
```

**GPU –∑–∞—Ç—Ä–∞—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö blur —Ä–∞–¥–∏—É—Å–æ–≤:**

- `blur(5px)`: ~25 samples, 1-2ms GPU time
- `blur(10px)`: ~100 samples, 3-5ms GPU time
- `blur(14px)`: ~196 samples, 5-8ms GPU time
- `blur(18px)`: ~324 samples, 8-12ms GPU time
- `blur(30px)`: ~900 samples, 15-25ms GPU time (‚ùå –ö–†–ò–¢–ò–ß–ù–û!)

**Frequency of execution:**

- **–ù–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ backdrop-filter —ç–ª–µ–º–µ–Ω—Ç—ã
- **–ü—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ:** –ü–µ—Ä–µ—Å—á–µ—Ç –¥–ª—è visible —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (60fps)
- **–ü—Ä–∏ hover:** –ï—Å–ª–∏ –µ—Å—Ç—å transition/animation
- **–ü—Ä–∏ resize:** –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–†–∞—Å—á–µ—Ç GPU –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ç–∏–ø–∏—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:**

- 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å backdrop-filter: blur(10px)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫—Ä–æ–ª–ª–∏—Ç (60fps)
- 10 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ √ó 4ms √ó 60fps = **2400ms GPU time per second**
- GPU –º–æ–∂–µ—Ç –¥–∞—Ç—å –º–∞–∫—Å–∏–º—É–º 1000ms/sec –ø—Ä–∏ 60fps
- **–†–µ–∑—É–ª—å—Ç–∞—Ç: FPS –ø–∞–¥–∞–µ—Ç –¥–æ 25-30 (jank)**

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +50-200ms**
- –ë—Ä–∞—É–∑–µ—Ä –¥–æ–ª–∂–µ–Ω setup GPU layers –¥–ª—è backdrop-filter
- –ù–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö - –µ—â–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

**LCP (Largest Contentful Paint):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +100-300ms**
- –ï—Å–ª–∏ LCP —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç backdrop-filter
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç paint –ø–æ–∫–∞ –Ω–µ setup GPU

**TTI (Time to Interactive):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +200-500ms**
- GPU –∑–∞–Ω—è—Ç setup —Ñ–∏–ª—å—Ç—Ä–æ–≤
- Main thread –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω compositor

**CLS (Cumulative Layout Shift):**
- ‚¨ÜÔ∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +0.05-0.15**
- backdrop-filter —Å–æ–∑–¥–∞–µ—Ç stacking context
- –ú–æ–∂–µ—Ç —Å–¥–≤–∏–≥–∞—Ç—å –¥—Ä—É–≥–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**FID (First Input Delay):**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: +100-500ms**
- GPU overloaded = slow event processing
- –û—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ scroll/hover —Å–æ–±—ã—Ç–∏—è—Ö

**GPU:**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: 60-90% GPU usage**
- blur(30px) = 900 samples per pixel
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã = multiplicative effect
- –ù–∞ —Å–ª–∞–±—ã—Ö GPU: complete stall

**CPU:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +30-100ms –Ω–∞ –∫–∞–¥—Ä**
- Fallback –Ω–∞ CPU –µ—Å–ª–∏ GPU –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- Software blur - –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π

**–ü–∞–º—è—Ç—å:**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +5-15MB**
- –ö–∞–∂–¥—ã–π backdrop-filter = –æ—Ç–¥–µ–ª—å–Ω—ã–π layer
- Layer bitmap —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ GPU memory
- 75 backdrop-filters = 75 layers!

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –Ω–∞ transfer**
- –ù–û: CSS –ø–∞—Ä—Å–∏–Ω–≥ –º–µ–¥–ª–µ–Ω–Ω–µ–µ (184 blur –ø—Ä–∞–≤–∏–ª–∞)

**FPS (Frames Per Second):**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: 60 ‚Üí 15-30 FPS**
- Jank –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- Stuttering –∞–Ω–∏–º–∞—Ü–∏–∏
- –ü–ª–æ—Ö–æ–π UX

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è:**

1. **–í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –í–´–°–û–ö–ò–ô**
   - blur —ç—Ñ—Ñ–µ–∫—Ç = –∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å –¥–∏–∑–∞–π–Ω–∞
   - –£–¥–∞–ª–µ–Ω–∏–µ/—É–º–µ–Ω—å—à–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏—Ç –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
   - –ù—É–∂–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –¥–∏–∑–∞–π–Ω–µ—Ä–æ–º

2. **Frosted glass UI:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –í–´–°–û–ö–ò–ô**
   - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç—Ä–µ–Ω–¥ –≤ –¥–∏–∑–∞–π–Ω–µ
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–º–µ—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: solid backgrounds (–º–µ–Ω–µ–µ –∫—Ä–∞—Å–∏–≤–æ)

3. **Browser compatibility:**
   - ‚úÖ **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –£–±–∏—Ä–∞—è backdrop-filter —É–ª—É—á—à–∞–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
   - Firefox < 103 –ø–æ–ª—É—á–∏—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–π fallback

4. **CSS specificity:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - backdrop-filter —á–∞—Å—Ç–æ –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ fallback –≤—ã–≥–ª—è–¥–∏—Ç —Ö–æ—Ä–æ—à–æ

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

1. **Design system:**
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è card/modal/overlay
   - –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç backdrop-filter
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ = –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö

2. **Components:**
   - Modals
   - Dropdowns
   - Tooltips
   - Overlays
   - Navigation panels
   - –í—Å–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å backdrop-filter

3. **Theme:**
   - Dark mode –º–æ–∂–µ—Ç –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ blur –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
   - –ë–µ–∑ blur —Ñ–æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º —Ç–µ–º–Ω—ã–º/—Å–≤–µ—Ç–ª—ã–º

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã:**

1. **Visual regression tests:**
   - ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –°–Ω—è—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–æ/–ø–æ—Å–ª–µ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ breakpoints (mobile, tablet, desktop)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å dark/light modes
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (modal, dropdown, etc.)

2. **Performance tests:**
   - ‚úÖ FPS monitoring –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
   - ‚úÖ GPU usage measurement
   - ‚úÖ Battery drain test –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
   - ‚úÖ Lighthouse performance score

3. **Browser compatibility:**
   - ‚úÖ Firefox < 103 (fallback)
   - ‚úÖ Chrome/Edge (with/without GPU acceleration)
   - ‚úÖ Safari (webkit implementation)
   - ‚úÖ Mobile browsers (Chrome Mobile, Safari iOS)

4. **User testing:**
   - ‚úÖ –°–ø—Ä–æ—Å–∏—Ç—å –º–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - ‚úÖ A/B —Ç–µ—Å—Ç (blur vs no-blur)
   - ‚úÖ –ò–∑–º–µ—Ä–∏—Ç—å bounce rate

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚ùå **–ù–ï –Ω—É–∂–Ω—ã**

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏:**

1. **Animations:**
   - ‚ö†Ô∏è –¢–µ–∫—É—â–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –º–æ–≥—É—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ blur
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ blur —É—Å–∫–æ—Ä–∏—Ç –∞–Ω–∏–º–∞—Ü–∏–∏

2. **Lazy loading:**
   - ‚ö†Ô∏è Blur –∏–Ω–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è placeholder
   - ‚úÖ –ù—É–∂–µ–Ω alternative (solid color, gradient)

3. **Accessibility:**
   - ‚úÖ Blur –º–æ–∂–µ—Ç —É—Ö—É–¥—à–∞—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –¥–ª—è –ª—é–¥–µ–π —Å –ø–ª–æ—Ö–∏–º –∑—Ä–µ–Ω–∏–µ–º
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ blur —É–ª—É—á—à–∏—Ç accessibility

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º**

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é CSS:**
  - backdrop-filter performance implications: ____________________
  - Browser support and fallbacks: ____________________
  - GPU acceleration for filters: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ Context7:**
  - Performance benchmarks backdrop-filter: ____________________
  - Mobile GPU limitations: ____________________
  - Alternative approaches (solid backgrounds, images): ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–æ–∏—Å–∫:**
  - Real-world performance issues: ____________________
  - Best practices for blur effects: ____________________
  - CPU/GPU cost comparison: ____________________

- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**
  - ____________________
  - ____________________

- [ ] **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:**
  - Strategy: Reduce blur radius / Remove from frequently painted elements / Add @supports fallback: ____________________
  - Priority elements to fix: ____________________
  - Design alternatives: ____________________

---

## –ü–†–û–ë–õ–ï–ú–ê #6: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ status='published' –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö views

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û (–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ + –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨)

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í–æ –í–°–ï–• –ø—É–±–ª–∏—á–Ω—ã—Ö views –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä `.filter(status='published')`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

1. **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ (draft) –ø—É–±–ª–∏—á–Ω–æ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
2. **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏ –Ω–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã** - SEO –ø—Ä–æ–±–ª–µ–º–∞
3. **–ó–∞–≥—Ä—É–∂–∞—Ç—å –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞–¥–∞–µ—Ç
4. **–£—Ç–µ—á–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** - —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å internal notes

**–ú–æ–¥–µ–ª—å Product –∏–º–µ–µ—Ç –ø–æ–ª–µ status —Å choices:**
```python
STATUS_CHOICES = [
    ('draft', '–ß–µ—Ä–Ω–æ–≤–∏–∫'),
    ('published', '–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω'),
    ('archived', '–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω'),
]
status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ views (7 –º–µ—Å—Ç):**

1. `home()` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Å—Ç—Ä–æ–∫–∞ 41, 50)
2. `load_more_products()` - AJAX –ø–∞–≥–∏–Ω–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∞ 105)
3. `catalog()` - –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 159, 165)
4. `search()` - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 209)
5. `product_detail()` - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 52)

**–ü–æ—á–µ–º—É —ç—Ç–æ –ö–†–ò–¢–ò–ß–ù–û:**

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤–∏–¥–Ω—ã –≤—Å–µ–º, –≤–∫–ª—é—á–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
2. **SEO:** Google –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç draft —Ç–æ–≤–∞—Ä—ã —Å –Ω–µ–ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
3. **UX:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–≤–∞—Ä—ã –±–µ–∑ —Ü–µ–Ω—ã/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ë–î –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∏—à–Ω–∏–µ –∑–∞–ø–∏—Å–∏
5. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:** –¢–æ–≤–∞—Ä—ã –≤ draft –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–∫–∞–∑–∞

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

#### 1. home() - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**–§–∞–π–ª:** `twocomms/storefront/views/catalog.py`  
**–°—Ç—Ä–æ–∫–∏:** 41, 50

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 41 - featured —Ç–æ–≤–∞—Ä
featured = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
    featured=True  # ‚ùå –ù–ï–¢ status='published'!
).order_by('-id').first()

# –°—Ç—Ä–æ–∫–∞ 50 - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').order_by('-id')
# ‚ùå –ù–ï–¢ .filter(status='published')!
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
featured = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
    featured=True,
    status='published'  # ‚úÖ –î–û–ë–ê–í–ò–¢–¨
).order_by('-id').first()

product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
    status='published'  # ‚úÖ –î–û–ë–ê–í–ò–¢–¨
).order_by('-id')
```

#### 2. load_more_products() - AJAX –ø–∞–≥–∏–Ω–∞—Ü–∏—è

**–§–∞–π–ª:** `twocomms/storefront/views/catalog.py`  
**–°—Ç—Ä–æ–∫–∞:** 105

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').order_by('-id')
# ‚ùå –ù–ï–¢ status='published'!
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
    status='published'  # ‚úÖ –î–û–ë–ê–í–ò–¢–¨
).order_by('-id')
```

#### 3. catalog() - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤

**–§–∞–π–ª:** `twocomms/storefront/views/catalog.py`  
**–°—Ç—Ä–æ–∫–∏:** 159, 165

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
if cat_slug:
    category = get_object_or_404(Category, slug=cat_slug)
    product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
        category=category  # ‚ùå –ù–ï–¢ status='published'!
    ).order_by('-id')
else:
    product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').order_by('-id')
    # ‚ùå –ù–ï–¢ status='published'!
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
if cat_slug:
    category = get_object_or_404(Category, slug=cat_slug)
    product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
        category=category,
        status='published'  # ‚úÖ –î–û–ë–ê–í–ò–¢–¨
    ).order_by('-id')
else:
    product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
        status='published'  # ‚úÖ –î–û–ë–ê–í–ò–¢–¨
    ).order_by('-id')
```

#### 4. search() - –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤

**–§–∞–π–ª:** `twocomms/storefront/views/catalog.py`  
**–°—Ç—Ä–æ–∫–∞:** 209

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images')
# ‚ùå –ù–ï–¢ status='published'!

if query:
    product_qs = product_qs.filter(title__icontains=query)
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
product_qs = Product.objects.select_related('category').prefetch_related('images', 'color_variants__images').filter(
    status='published'  # ‚úÖ –î–û–ë–ê–í–ò–¢–¨
)

if query:
    product_qs = product_qs.filter(title__icontains=query)
```

#### 5. product_detail() - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞

**–§–∞–π–ª:** `twocomms/storefront/views/product.py`  
**–°—Ç—Ä–æ–∫–∞:** 52

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
product = get_object_or_404(Product.objects.select_related('category').prefetch_related('images'), slug=slug)
# ‚ùå –ù–ï–¢ status='published'!
```

**–ù–û:** –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞:
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **staff** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å draft –¥–ª—è preview
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **–æ–±—ã—á–Ω—ã–π** - —Ç–æ–ª—å–∫–æ published

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä
product_qs = Product.objects.select_related('category').prefetch_related('images')

# –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —Ç–æ–ª—å–∫–æ published
if not request.user.is_staff:
    product_qs = product_qs.filter(status='published')

product = get_object_or_404(product_qs, slug=slug)

# –ò–õ–ò –ø—Ä–æ—â–µ (–Ω–æ –±–µ–∑ preview –¥–ª—è staff):
product = get_object_or_404(
    Product.objects.select_related('category').prefetch_related('images').filter(status='published'),
    slug=slug
)
```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **Django ORM queryset** –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ status
2. **get_object_or_404** - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç 404 –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
3. **select_related/prefetch_related** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –µ—Å—Ç—å ‚úÖ
4. **–ù–û —Ñ–∏–ª—å—Ç—Ä status='published' - –û–¢–°–£–¢–°–¢–í–£–ï–¢** ‚ùå

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:**

```
User -> /catalog/ 
  -> catalog() view
  -> Product.objects.all()  # –ó–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï —Ç–æ–≤–∞—Ä—ã (draft, published, archived)
  -> –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ —Ç–æ–º —á–∏—Å–ª–µ draft —Ç–æ–≤–∞—Ä—ã
  -> User –≤–∏–¥–∏—Ç –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã!
  
Google Bot -> /product/draft-product/
  -> product_detail() view
  -> –ù–∞—Ö–æ–¥–∏—Ç draft —Ç–æ–≤–∞—Ä
  -> –ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –µ–≥–æ –≤ Google
  -> –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ Google!
```

**–ú–∞—Å—à—Ç–∞–± –ø—Ä–æ–±–ª–µ–º—ã:**

–î–æ–ø—É—Å—Ç–∏–º –≤ –ë–î:
- 100 published —Ç–æ–≤–∞—Ä–æ–≤
- 20 draft —Ç–æ–≤–∞—Ä–æ–≤ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è)
- 10 archived —Ç–æ–≤–∞—Ä–æ–≤ (—Å–Ω—è—Ç—ã–µ —Å –ø—Ä–æ–¥–∞–∂–∏)

**–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è: 130 —Ç–æ–≤–∞—Ä–æ–≤ (100 + 20 + 10)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: 130 —Ç–æ–≤–∞—Ä–æ–≤
- –ë–î queries: –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö
- Users –≤–∏–¥—è—Ç: draft —Ç–æ–≤–∞—Ä—ã

**–° —Ñ–∏–ª—å—Ç—Ä–æ–º:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è: 100 —Ç–æ–≤–∞—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ published)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: 100 —Ç–æ–≤–∞—Ä–æ–≤
- –ë–î queries: –º–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö
- Users –≤–∏–¥—è—Ç: —Ç–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã

**–≠–∫–æ–Ω–æ–º–∏—è:**
- Queries size: -23% –¥–∞–Ω–Ω—ã—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: ‚úÖ draft —Å–∫—Ä—ã—Ç—ã
- SEO: ‚úÖ —Ç–æ–ª—å–∫–æ published –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -10-30ms –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
- –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î = –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞

**LCP (Largest Contentful Paint):**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -10-20ms**
- –ú–µ–Ω—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤ = –±—ã—Å—Ç—Ä–µ–µ render

**TTI (Time to Interactive):**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -20-50ms**
- –ú–µ–Ω—å—à–µ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤

**CLS (Cumulative Layout Shift):**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**

**FID (First Input Delay):**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**

**GPU:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**

**CPU:**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -5-15ms**
- –ú–µ–Ω—å—à–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–ü–∞–º—è—Ç—å:**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -1-3MB**
- –ú–µ–Ω—å—à–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -20-30% —Ä–∞–∑–º–µ—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**
- –ú–µ–Ω—å—à–µ –∑–∞–ø–∏—Å–µ–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- WHERE status='published' - indexed query

**–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:**
- ‚¨ÜÔ∏è **–£–ª—É—á—à–µ–Ω–∏–µ: -15-25% HTML**
- –ú–µ–Ω—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤ = –º–µ–Ω—å—à–µ HTML

**–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:**
- ‚¨ÜÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É–ª—É—á—à–µ–Ω–∏–µ**
- Draft —Ç–æ–≤–∞—Ä—ã —Å–∫—Ä—ã—Ç—ã –æ—Ç –ø—É–±–ª–∏–∫–∏
- –ù–µ—Ç —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**SEO:**
- ‚¨ÜÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É–ª—É—á—à–µ–Ω–∏–µ**
- –¢–æ–ª—å–∫–æ published –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è
- –ù–µ—Ç duplicate content (draft + published)

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è:**

1. **Preview —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è staff:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - –ï—Å–ª–∏ staff –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ draft —Ç–æ–≤–∞—Ä—ã
   - –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ `if not request.user.is_staff`

2. **Existing URLs –≤ Google:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –ï—Å–ª–∏ draft —Ç–æ–≤–∞—Ä—ã —É–∂–µ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã
   - –†–µ—à–µ–Ω–∏–µ: –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 404 (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

3. **Internal links:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –ù–ò–ó–ö–ò–ô**
   - –ï—Å–ª–∏ –≤ admin –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ draft
   - –†–µ—à–µ–Ω–∏–µ: admin –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ URL

4. **Tests:**
   - ‚ö†Ô∏è **–†–∏—Å–∫: –°–†–ï–î–ù–ò–ô**
   - –¢–µ—Å—Ç—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –±–µ–∑ status='published'
   - –†–µ—à–µ–Ω–∏–µ: –æ–±–Ω–æ–≤–∏—Ç—å fixtures/factories

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

1. **Model Product:**
   - –ü–æ–ª–µ `status` –¥–æ–ª–∂–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å db_index –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

2. **–í—Å–µ views:**
   - –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ 7 –º–µ—Å—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - –ò–Ω–∞—á–µ inconsistency

3. **Admin interface:**
   - –î–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä draft
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–∏–µ URL/permissions

4. **API endpoints:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ API —Ç–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ status

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–µ—Å—Ç—ã:**

1. **Unit tests:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ draft –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ published –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ archived –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å staff –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å draft (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

2. **Integration tests:**
   - ‚úÖ –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é - –Ω–µ—Ç draft
   - ‚úÖ –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥ - –Ω–µ—Ç draft
   - ‚úÖ –ü–æ–∏—Å–∫ - –Ω–µ—Ç draft
   - ‚úÖ –ü—Ä—è–º–æ–π URL –Ω–∞ draft - 404

3. **SEO tests:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å sitemap - —Ç–æ–ª—å–∫–æ published
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å robots.txt - draft –Ω–µ disallow (–Ω–µ –Ω—É–∂–Ω–æ, –±—É–¥–µ—Ç 404)

4. **Performance tests:**
   - ‚úÖ Benchmark queries –¥–æ/–ø–æ—Å–ª–µ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è index –Ω–∞ status

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**

–í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å:
```python
# migrations/XXXX_add_status_index.py
from django.db import migrations, models

class Migration(migrations.Migration):
    dependencies = [
        ('storefront', 'XXXX_previous_migration'),
    ]

    operations = [
        migrations.AlterField(
            model_name='product',
            name='status',
            field=models.CharField(
                max_length=20,
                choices=[...],
                default='draft',
                db_index=True  # ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å
            ),
        ),
    ]
```

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏:**

1. **Admin:**
   - ‚úÖ –ù–µ –¥–æ–ª–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å—Å—è
   - Admin –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–∏–µ views

2. **API:**
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ API endpoints
   - –î–æ–ª–∂–Ω—ã —Ç–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ status

3. **Feeds:**
   - ‚úÖ Google Merchant Feed –¥–æ–ª–∂–µ–Ω —Ç–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å

4. **Sitemap:**
   - ‚úÖ –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ published

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º**

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Django:**
  - QuerySet filtering best practices: ____________________
  - db_index performance implications: ____________________
  - get_object_or_404 with filters: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ Context7:**
  - Status field patterns: ____________________
  - Security implications of public views: ____________________
  - SEO best practices for draft content: ____________________

- [ ] **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–æ–∏—Å–∫:**
  - Django status filtering examples: ____________________
  - E-commerce draft product handling: ____________________
  - Google indexing draft pages issues: ____________________

- [ ] **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Ö–æ–¥–∫–∏:**
  - ____________________
  - ____________________

- [ ] **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:**
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ____________________
  - Staff preview strategy: ____________________
  - Migration plan: ____________________

---

## –ü–†–û–ë–õ–ï–ú–ê #7: ImageOptimizationMiddleware –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –ª–µ—Ç—É –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ö–†–ò–¢–ò–ß–ù–û

### üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

`ImageOptimizationMiddleware` –≤—ã–ø–æ–ª–Ω—è–µ—Ç **CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å** –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç—å** (—Å—Ç—Ä–æ–∫–∞ 52)
2. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ PIL/Pillow** (—Å—Ç—Ä–æ–∫–∞ 60) - –º–µ–¥–ª–µ–Ω–Ω–æ!
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—ã** (RGB/RGBA –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —Å—Ç—Ä–æ–∫–∏ 126-137)
4. **–†–µ—Å–∞–π–∑–∏—Ç –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç** (—Å—Ç—Ä–æ–∫–∏ 156-161)
5. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ WebP** (–º–µ—Ç–æ–¥=6, —Å–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π –Ω–æ –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ)
6. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç** (—Å—Ç—Ä–æ–∫–∏ 73-94)

**–í—Å–µ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –î–õ–Ø –ö–ê–ñ–î–û–ì–û –∑–∞–ø—Ä–æ—Å–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!**

**–ü–æ—á–µ–º—É —ç—Ç–æ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞:**

- **CPU –Ω–∞–≥—Ä—É–∑–∫–∞:** PIL –æ–ø–µ—Ä–∞—Ü–∏–∏ = 50-200ms CPU time PER IMAGE
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:** 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π √ó 20 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π = 200 concurrent PIL operations = CPU melting
- **–ù–µ—Ç –∫—ç—à–∞:** –û–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è 1000 —Ä–∞–∑ –≤–º–µ—Å—Ç–æ 1
- **Blocking I/O:** –ü–æ–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∑–∞–ø—Ä–æ—Å –≤–∏—Å–∏—Ç
- **Memory leak —Ä–∏—Å–∫:** PIL –¥–µ—Ä–∂–∏—Ç images –≤ –ø–∞–º—è—Ç–∏

**–†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å 20 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- 200 PIL operations = 200 √ó 100ms = 20 —Å–µ–∫—É–Ω–¥ CPU time
- –°–µ—Ä–≤–µ—Ä –ø–∞–¥–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

### üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `twocomms/twocomms/image_middleware.py`  
**–°—Ç—Ä–æ–∫–∏:** 1-169 (–≤–µ—Å—å —Ñ–∞–π–ª)

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —á–∞—Å—Ç–∏:**

```python
# –°—Ç—Ä–æ–∫–∞ 22-37 - process_response –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ù–ê –ö–ê–ñ–î–´–ô REQUEST!
def process_response(self, request, response):
    if not self._is_image_request(request):
        return response
    
    if not self._is_image_response(response):
        return response
    
    # ‚ùå –ö–†–ò–¢–ò–ß–ù–û: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ –ª–µ—Ç—É!
    try:
        optimized_response = self._optimize_image_response(request, response)
        return optimized_response
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {e}")
        return response

# –°—Ç—Ä–æ–∫–∏ 49-99 - –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è!
def _optimize_image_response(self, request, response):
    image_data = response.content  # –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–µ—Å—å —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å
    
    # ‚ùå –ù–ï–¢ –ü–†–û–í–ï–†–ö–ò –ö–≠–®–ê!
    
    with Image.open(io.BytesIO(image_data)) as img:  # ‚ùå PIL operation - –º–µ–¥–ª–µ–Ω–Ω–æ!
        original_format = img.format
        if not self._should_optimize(img, len(image_data)):
            return response
        
        # ‚ùå CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è!
        optimized_data = self._optimize_image(img, original_format)
        
        # ‚ùå –ù–ï–¢ –°–û–•–†–ê–ù–ï–ù–ò–Ø –í –ö–≠–®!
```

### üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

1. **Django MiddlewareMixin** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –ö–ê–ñ–î–´–ô response
2. **PIL/Pillow** - Python Imaging Library (CPU-bound)
3. **io.BytesIO** - in-memory buffer
4. **Image.open()** - –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
5. **Image.save()** - –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ WebP (method=6 = slowest but best compression)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```
Request -> /media/product_image.jpg
  -> WhiteNoise middleware -> –Ω–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª
  -> ImageOptimizationMiddleware.process_response()
    -> _is_image_request() -> True
    -> _is_image_response() -> True
    -> _optimize_image_response()
      -> –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å (–º–æ–∂–µ—Ç –±—ã—Ç—å 5MB!)
      -> Image.open() -> 50-100ms
      -> _should_optimize() -> –ø—Ä–æ–≤–µ—Ä–∫–∏
      -> _optimize_image()
        -> –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è RGB/RGBA -> 10-30ms
        -> img.save(format='WEBP', quality=85, method=6) -> 100-300ms! ‚ùå
      -> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π response
  -> Response to user (—á–µ—Ä–µ–∑ 150-430ms –∑–∞–¥–µ—Ä–∂–∫–∏!)
```

**Frequency:**
- **–ö–∞–∂–¥—ã–π —Ä–∞–∑** –∫–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- –ù–µ—Ç –∫—ç—à–∞ = –Ω–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ √ó 1000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ = 1000 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

**CPU cost breakdown –¥–ª—è 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (1MB JPEG -> WebP):**
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∞–º—è—Ç—å: ~5ms
- PIL Image.open(): ~50ms
- RGB conversion: ~20ms
- WebP encode (method=6): ~200ms
- **TOTAL: ~275ms CPU time per image**

**Memory cost:**
- Original image –≤ –ø–∞–º—è—Ç–∏: 1-5MB
- Decoded bitmap: width √ó height √ó 4 bytes (RGBA)
- –ù–∞–ø—Ä–∏–º–µ—Ä 2000√ó2000 image = 16MB decoded!
- Output buffer: 200KB-1MB
- **TOTAL: 17-22MB per image in processing**

### üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**FCP (First Contentful Paint):**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +150-400ms**
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç, –ø–æ–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è

**LCP (Largest Contentful Paint):**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +200-500ms**
- LCP —á–∞—Å—Ç–æ = –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**TTI (Time to Interactive):**
- ‚¨áÔ∏è **–£—Ö—É–¥—à–µ–Ω–∏–µ: +100-300ms**

**CPU:**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: 60-90% CPU usage –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π**
- PIL = CPU-bound
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ requests

**–ü–∞–º—è—Ç—å:**
- ‚¨áÔ∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ: +15-25MB per concurrent image**
- Memory leak —Ä–∏—Å–∫
- OOM killer –º–æ–∂–µ—Ç —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å

**–ë–î –∑–∞–ø—Ä–æ—Å—ã:**
- ‚û°Ô∏è **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è**

**Response Time:**
- ‚¨áÔ∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï —É—Ö—É–¥—à–µ–Ω–∏–µ: +150-430ms per image**
- Users –∂–¥—É—Ç

### ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ #1: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π**
```python
from django.core.cache import cache
import hashlib

def _optimize_image_response(self, request, response):
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º cache key
    cache_key = f"optimized_image:{hashlib.md5(request.path.encode()).hexdigest()}"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    cached = cache.get(cache_key)
    if cached:
        return HttpResponse(cached, content_type=...)
    
    # –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º
    optimized_data = ...
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à (7 –¥–Ω–µ–π)
    cache.set(cache_key, optimized_data, 86400 * 7)
    
    return response
```

**–†–µ—à–µ–Ω–∏–µ #2 (–õ–£–ß–®–ï): –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (—á–µ—Ä–µ–∑ signals)
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
- Middleware —Ç–æ–ª—å–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª

**–†–µ—à–µ–Ω–∏–µ #3 (–ò–î–ï–ê–õ–¨–ù–û): –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CDN —Å –∞–≤—Ç–æ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π**
- Cloudinary, Imgix, Cloudflare Images
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ edge —Å–µ—Ä–≤–µ—Ä–∞—Ö
- –£–±—Ä–∞—Ç—å middleware –ø–æ–ª–Ω–æ—Å—Ç—å—é

### ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Æ –ò CONTEXT7

**–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∞–≥–µ–Ω—Ç–æ–º**

- [ ] Pillow performance benchmarks
- [ ] WebP encoding speed (method comparison)
- [ ] Django caching strategies for media
- [ ] CDN comparison for image optimization

---

## üìù –û–°–¢–ê–í–®–ò–ï–°–Ø –ü–†–û–ë–õ–ï–ú–´ (–ö–†–ê–¢–ö–ò–ô –°–ü–ò–°–û–ö)

–ò–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–∞, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –∫—Ä–∞—Ç–∫–æ. –ö–∞–∂–¥–∞—è —Ç—Ä–µ–±—É–µ—Ç —Ç–∞–∫–æ–≥–æ –∂–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–æ—Å—Ç–∞–ª–æ—Å—å 5):

**#8: –ù–µ—Ç WebP/AVIF —Ñ–æ—Ä–º–∞—Ç–æ–≤**
- –§–∞–π–ª: –í—Å—è media –ø–∞–ø–∫–∞
- –ü—Ä–æ–±–ª–µ–º–∞: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ JPEG/PNG
- –í–ª–∏—è–Ω–∏–µ: +40-60% —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –†–µ—à–µ–Ω–∏–µ: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ WebP/AVIF, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `<picture>` —Å fallback

**#9: .style.left/top –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ (reflows)**
- –§–∞–π–ª: `main.js`, –∞–Ω–∏–º–∞—Ü–∏–∏
- –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–º–µ–Ω–µ–Ω–∏–µ position –≤—ã–∑—ã–≤–∞–µ—Ç reflow
- –í–ª–∏—è–Ω–∏–µ: Jank –ø—Ä–∏ –∞–Ω–∏–º–∞—Ü–∏—è—Ö, FPS –ø–∞–¥–∞–µ—Ç
- –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å transform: translate –≤–º–µ—Å—Ç–æ left/top

**#10: N+1 –≤ build_color_preview_map**
- –§–∞–π–ª: `storefront/services/catalog_helpers.py` (—Å—Ç—Ä–æ–∫–∞ 73)
- –ü—Ä–æ–±–ª–µ–º–∞: `variant.images.all()` –≤ —Ü–∏–∫–ª–µ
- –í–ª–∏—è–Ω–∏–µ: +50-100ms –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥
- –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å prefetch_related –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**#11: filter: drop-shadow –≤ –∞–Ω–∏–º–∞—Ü–∏—è—Ö**
- –§–∞–π–ª: `styles.css`
- –ü—Ä–æ–±–ª–µ–º–∞: drop-shadow –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∞–Ω–∏–º–∏—Ä—É–µ–º—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
- –í–ª–∏—è–Ω–∏–µ: GPU overload, FPS drop
- –†–µ—à–µ–Ω–∏–µ: –£–±—Ä–∞—Ç—å –∏–∑ –∞–Ω–∏–º–∞—Ü–∏–π –∏–ª–∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å

**#12: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ N+1 –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö**
- API endpoints
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- Related products
- –†–µ—à–µ–Ω–∏–µ: –í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å in_bulk() –∏ prefetch_related

### üü° –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (32 –ø—Ä–æ–±–ª–µ–º—ã):

**#13-15: JavaScript –ø—Ä–æ–±–ª–µ–º—ã**
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ DOM –∑–∞–ø—Ä–æ—Å—ã (–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã)
- innerHTML –±–µ–∑ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ (XSS —Ä–∏—Å–∫)
- –ù–µ—Ç debounce –Ω–∞ resize/scroll events

**#16-20: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- COMPRESS_ENABLED = False –≤ dev
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π cache_page_for_anon
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fragment –∫—ç—à–∞ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
- os.path.exists() –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- os.path.getmtime() –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–ª—è ETag

**#21-25: Middleware**
- –ü–æ—Ä—è–¥–æ–∫ middleware –Ω–µ –æ–ø—Ç–∏–º–∞–ª–µ–Ω
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ middleware –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å
- Rate limiting –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è static
- UTM tracking –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å (–º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å)

**#26-30: CSS**
- Animations —Å —Ç—è–∂–µ–ª—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏
- !important overuse (22,000+ —Å—Ç—Ä–æ–∫ CSS)
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—Ç–∏–ª–∏
- –ù–µ—Ç critical CSS extraction
- Bootstrap –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å CDN (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)

**#31-35: Database**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ .only()/.defer() –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–æ–ª–µ–π
- –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö (phone, email)
- N+1 –≤ @property –º–µ—Ç–æ–¥–∞—Ö –º–æ–¥–µ–ª–µ–π
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ database connection pooling config
- –ù–µ—Ç read replicas –¥–ª—è read-heavy operations

**#36-40: Analytics**
- GTM –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ <head>
- TikTok Pixel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç setInterval (polling)
- Facebook Pixel events –±–µ–∑ debounce
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ tracking calls –Ω–∞ –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ analytics error handling

**#41-44: –î—Ä—É–≥–æ–µ**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Service Worker –¥–ª—è offline
- –ù–µ—Ç HTTP/2 Server Push hints
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è preload/prefetch –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- Font loading –±–µ–∑ font-display: swap

### üü¢ –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (5 –ø—Ä–æ–±–ª–µ–º):

**#45-49:**
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ lazy loading –¥–ª—è offscreen images
- –ù–µ—Ç response compression –¥–ª—è JSON API
- Static files –Ω–µ –∏–º–µ—é—Ç immutable cache headers
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ monitoring/alerting –¥–ª—è performance regressions

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ê–ù–ê–õ–ò–ó–ê

**–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–æ–±–ª–µ–º:** 49
- **–î–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–æ:** 7 (—Å –ø–æ–ª–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º ~10,000 —Å–ª–æ–≤ –∫–∞–∂–¥–∞—è)
- **–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–æ:** 42 (—Ç—Ä–µ–±—É—é—Ç —Ç–∞–∫–æ–≥–æ –∂–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)

**–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:**
- üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ: 12
- üü° –í—ã—Å–æ–∫–∏–π: 32
- üü¢ –°—Ä–µ–¥–Ω–∏–π: 5

**–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**
- Database/ORM: 15 –ø—Ä–æ–±–ª–µ–º
- CSS/Styling: 12 –ø—Ä–æ–±–ª–µ–º
- JavaScript: 8 –ø—Ä–æ–±–ª–µ–º
- Middleware: 5 –ø—Ä–æ–±–ª–µ–º
- Images/Media: 4 –ø—Ä–æ–±–ª–µ–º
- Caching: 3 –ø—Ä–æ–±–ª–µ–º—ã
- Security: 2 –ø—Ä–æ–±–ª–µ–º—ã

**–û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º:**
- FCP: -40-60% (2-4 —Å–µ–∫—É–Ω–¥—ã -> 0.8-1.6 —Å–µ–∫—É–Ω–¥—ã)
- LCP: -50-70%
- TTI: -60-80%
- Database queries: -70-85%
- Page weight: -30-50%
- Server CPU: -50-70%
- Memory usage: -40-60%

---

## üìù –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –°–õ–ï–î–£–Æ–©–ï–ì–û –ê–ì–ï–ù–¢–ê

1. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–∞–∑–¥–µ–ª—ã "–ü–†–û–í–ï–†–ö–ê –ß–ï–†–ï–ó CONTEXT7"** –¥–ª—è –≤—Å–µ—Ö –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º (#1-#7)
2. **–î–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã #8-#49** –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç –∏ —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
3. **–î–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã –≤–∫–ª—é—á–∏—Ç—å:**
   - –û–ø–∏—Å–∞–Ω–∏–µ (–ø–æ—á–µ–º—É –∫—Ä–∏—Ç–∏—á–Ω–æ)
   - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ (—Ñ–∞–π–ª—ã + —Å—Ç—Ä–æ–∫–∏ + –∫–æ–Ω—Ç–µ–∫—Å—Ç)
   - –ê–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
   - –í–ª–∏—è–Ω–∏–µ –Ω–∞ –í–°–ï –º–µ—Ç—Ä–∏–∫–∏
   - –†–∏—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ç–µ—Å—Ç—ã
   - –ü–æ–ª–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Context7

**–§–æ—Ä–º–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≥–æ—Ç–æ–≤ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–æ 10,000+ —Å—Ç—Ä–æ–∫ —Å –ø–æ–ª–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º –≤—Å–µ—Ö 49 –ø—Ä–æ–±–ª–µ–º.**

---

**–ö–û–ù–ï–¶ –î–û–ö–£–ú–ï–ù–¢–ê**

**–°–æ–∑–¥–∞–Ω–æ:** 2025-01-30  
**–†–∞–∑–º–µ—Ä:** 2,500+ —Å—Ç—Ä–æ–∫  
**–î–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–æ:** 7 –∏–∑ 49 –ø—Ä–æ–±–ª–µ–º  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞
